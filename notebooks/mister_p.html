<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Bambi – mister_p</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../notebooks/ordinal_regression.html" rel="next">
<link href="../notebooks/quantile_regression.html" rel="prev">
<link href="../logos/favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js" crossorigin="anonymous"></script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../logos/RGB/Bambi_logo.png" alt="bambi-home" class="navbar-logo">
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../notebooks/getting_started.html">
 <span class="menu-text">Getting Started</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../api/index.html">
 <span class="menu-text">API Reference</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../notebooks/index.html" aria-current="page">
 <span class="menu-text">Examples</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../faq.html">
 <span class="menu-text">FAQ</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../changelog.html">
 <span class="menu-text">Changelog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../contact.html">
 <span class="menu-text">Contact</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/bambinos/bambi"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/index.html" class="sidebar-item-text sidebar-link">Examples gallery</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">Linear regression models</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/t-test.html" class="sidebar-item-text sidebar-link">Comparison of two means (T-test)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/ESCS_multiple_regression.html" class="sidebar-item-text sidebar-link">Multiple linear regression</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/splines_cherry_blossoms.html" class="sidebar-item-text sidebar-link">Regression splines (Cherry blossom example)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/multi-level_regression.html" class="sidebar-item-text sidebar-link">Hierarchical Linear Regression (Pigs dataset)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/sleepstudy.html" class="sidebar-item-text sidebar-link">Hierarchical Linear Regression (Sleepstudy example)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/radon_example.html" class="sidebar-item-text sidebar-link">Hierarchical Linear Regression (Radon Contamination dataset)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/Strack_RRR_re_analysis.html" class="sidebar-item-text sidebar-link">Bayesian Workflow (Strack RRR Analysis Replication)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/shooter_crossed_random_ANOVA.html" class="sidebar-item-text sidebar-link">Bayesian Workflow (Police Officer’s Dilemma)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/t_regression.html" class="sidebar-item-text sidebar-link">Robust Linear Regression</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/predict_new_groups.html" class="sidebar-item-text sidebar-link">Predict New Groups</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/polynomial_regression.html" class="sidebar-item-text sidebar-link">Polynomial Regression</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Generalized linear models</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/logistic_regression.html" class="sidebar-item-text sidebar-link">Logistic Regression (Vote intention with ANES data)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/model_comparison.html" class="sidebar-item-text sidebar-link">Logistic Regression and Model Comparison with Bambi and ArviZ</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/hierarchical_binomial_bambi.html" class="sidebar-item-text sidebar-link">Hierarchical Logistic regression with Binomial family</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/alternative_links_binary.html" class="sidebar-item-text sidebar-link">Regression for Binary responses: Alternative link functions</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/wald_gamma_glm.html" class="sidebar-item-text sidebar-link">Wald and Gamma Regression (Australian insurance claims 2004-2005)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/negative_binomial.html" class="sidebar-item-text sidebar-link">Negative Binomial Regression (Students absence example)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/beta_regression.html" class="sidebar-item-text sidebar-link">Beta Regression</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/categorical_regression.html" class="sidebar-item-text sidebar-link">Categorical Regression</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/circular_regression.html" class="sidebar-item-text sidebar-link">Circular Regression</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/quantile_regression.html" class="sidebar-item-text sidebar-link">Quantile Regression</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/mister_p.html" class="sidebar-item-text sidebar-link active">Multilevel Regression and Post-stratification</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/ordinal_regression.html" class="sidebar-item-text sidebar-link">Ordinal Regression</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/zero_inflated_regression.html" class="sidebar-item-text sidebar-link">Zero inflated models</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">More advanced models</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/distributional_models.html" class="sidebar-item-text sidebar-link">Distributional models</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/hsgp_1d.html" class="sidebar-item-text sidebar-link">Gaussian Processes</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/hsgp_2d.html" class="sidebar-item-text sidebar-link">Gaussian Processes in 2D</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/survival_model.html" class="sidebar-item-text sidebar-link">Survival Models</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/orthogonal_polynomial_reg.html" class="sidebar-item-text sidebar-link">Orthogonal Polynomial regression</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">Tools to interpret model outputs</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/plot_predictions.html" class="sidebar-item-text sidebar-link">Plot Conditional Adjusted Predictions</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/plot_comparisons.html" class="sidebar-item-text sidebar-link">Plot Comparisons</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/plot_slopes.html" class="sidebar-item-text sidebar-link">Plot Slopes</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/interpret_advanced_usage.html" class="sidebar-item-text sidebar-link">Interpret Advanced Usage</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">Alternative sampling backends</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/alternative_samplers.html" class="sidebar-item-text sidebar-link">Alternative sampling backends</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#multilevel-regression-and-post-stratification" id="toc-multilevel-regression-and-post-stratification" class="nav-link active" data-scroll-target="#multilevel-regression-and-post-stratification">Multilevel Regression and Post-stratification</a>
  <ul class="collapse">
  <li><a href="#regression-and-effect-modification" id="toc-regression-and-effect-modification" class="nav-link" data-scroll-target="#regression-and-effect-modification">Regression and Effect Modification</a></li>
  <li><a href="#risk-stratification" id="toc-risk-stratification" class="nav-link" data-scroll-target="#risk-stratification">Risk Stratification</a></li>
  <li><a href="#regression-as-stratification" id="toc-regression-as-stratification" class="nav-link" data-scroll-target="#regression-as-stratification">Regression as Stratification</a></li>
  <li><a href="#the-need-for-post-stratification" id="toc-the-need-for-post-stratification" class="nav-link" data-scroll-target="#the-need-for-post-stratification">The Need for Post-Stratification</a>
  <ul class="collapse">
  <li><a href="#cleaning-census-data" id="toc-cleaning-census-data" class="nav-link" data-scroll-target="#cleaning-census-data">Cleaning Census Data</a></li>
  <li><a href="#biased-sample" id="toc-biased-sample" class="nav-link" data-scroll-target="#biased-sample">Biased Sample</a></li>
  <li><a href="#visualise-the-bias" id="toc-visualise-the-bias" class="nav-link" data-scroll-target="#visualise-the-bias">Visualise the Bias</a></li>
  </ul></li>
  <li><a href="#modelling-the-data" id="toc-modelling-the-data" class="nav-link" data-scroll-target="#modelling-the-data">Modelling the Data</a>
  <ul class="collapse">
  <li><a href="#fit-base-model-to-biased-sample" id="toc-fit-base-model-to-biased-sample" class="nav-link" data-scroll-target="#fit-base-model-to-biased-sample">Fit Base Model to Biased Sample</a></li>
  <li><a href="#fit-final-model-to-biased-sample" id="toc-fit-final-model-to-biased-sample" class="nav-link" data-scroll-target="#fit-final-model-to-biased-sample">Fit Final Model to Biased Sample</a></li>
  <li><a href="#apply-the-post-stratification-weighting" id="toc-apply-the-post-stratification-weighting" class="nav-link" data-scroll-target="#apply-the-post-stratification-weighting">Apply the Post-stratification Weighting</a></li>
  <li><a href="#make-adjustments-by-state" id="toc-make-adjustments-by-state" class="nav-link" data-scroll-target="#make-adjustments-by-state">Make Adjustments by State</a></li>
  <li><a href="#plot-the-effect-of-adjustment" id="toc-plot-the-effect-of-adjustment" class="nav-link" data-scroll-target="#plot-the-effect-of-adjustment">Plot the Effect of Adjustment</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="multilevel-regression-and-post-stratification" class="level1">
<h1>Multilevel Regression and Post-stratification</h1>
<section id="regression-and-effect-modification" class="level2">
<h2 class="anchored" data-anchor-id="regression-and-effect-modification">Regression and Effect Modification</h2>
<p>What are we even doing when we fit a regression model? Is a question that arises when first learning the tools of the trade and again when debugging strange results of your thousandth logistic regression model.</p>
<p>This notebook is intended to showcase how regression can be seen as a method for automating the calculation of stratum specific conditional effects. Additionally, we’ll see how we can enrich regression models by a post-stratification adjustment with knowledge of the appropriate stratum specific weights. This technique of multilevel regression and post stratification (MrP) is often used in the context of national surveys where we have knowledge of the population weights appropriate to different demographic groups. It can be used in a wide variety of areas ranging from political polling to online market research. We will demonstrate how to fit and and assess these models using Bambi.</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> arviz <span class="im">as</span> az</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> bambi <span class="im">as</span> bmb</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pymc <span class="im">as</span> pm</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>warnings.simplefilter(action<span class="op">=</span><span class="st">"ignore"</span>, category<span class="op">=</span><span class="pp">FutureWarning</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="risk-stratification" class="level2">
<h2 class="anchored" data-anchor-id="risk-stratification">Risk Stratification</h2>
<p>First consider this example of heart transplant patients adapted from Hernan and Robins’ excellent book <em>Causal Inference: What if</em>. Here we have a number of patients (anonymised with names for the Greek Gods). The data records the outcomes of a heart transplant program for those who were part of the program and those who were not. We also see the different risk levels of each patient assigned the treatment.</p>
<p>What we want to show here is that a regression model fit to this data automatically accounts for the weighting appropriate to the different risk strata. The data is coded with 0-1 indicators for status. <code>Risk_Strata</code> is either 1 for higher risk or 0 for lower risk. <code>Outcome</code> is whether or not the patient died from the procedure, and <code>Treatment</code> is whether or not the patient received treatment.</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">"name"</span>: [</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Rheia"</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Kronos"</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Demeter"</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Hades"</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Hestia"</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Poseidon"</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Hera"</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Zeus"</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Artemis"</span>,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Apollo"</span>,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Leto"</span>,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Ares"</span>,</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Athena"</span>,</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Hephaestus"</span>,</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Aphrodite"</span>,</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Cyclope"</span>,</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Persephone"</span>,</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Hermes"</span>,</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Hebe"</span>,</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Dionysus"</span>,</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Risk_Strata"</span>: [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>],</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Treatment"</span>: [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>],</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Outcome"</span>: [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>],</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Treatment_x_Risk_Strata"</span>] <span class="op">=</span> df.Treatment <span class="op">*</span> df.Risk_Strata</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>name</th>
      <th>Risk_Strata</th>
      <th>Treatment</th>
      <th>Outcome</th>
      <th>Treatment_x_Risk_Strata</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Rheia</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Kronos</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Demeter</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Hades</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Hestia</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Poseidon</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Hera</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Zeus</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Artemis</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Apollo</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Leto</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Ares</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Athena</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Hephaestus</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Aphrodite</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Cyclope</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Persephone</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Hermes</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Hebe</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Dionysus</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>If the treatment assignment procedure involved complete randomisation then we might expect a reasonable balance of strata effects across the treated and non-treated. In this sample we see (perhaps counter intuitively) that the treatment seems to induce a higher rate of death than the non-treated group.</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>simple_average <span class="op">=</span> df.groupby(<span class="st">"Treatment"</span>)[[<span class="st">"Outcome"</span>]].mean().rename({<span class="st">"Outcome"</span>: <span class="st">"Share"</span>}, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>simple_average</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Share</th>
    </tr>
    <tr>
      <th>Treatment</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.428571</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.538462</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Which suggests an alarming causal effect whereby the treatment seems to increase risk of death in the population.</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>causal_risk_ratio <span class="op">=</span> simple_average.iloc[<span class="dv">1</span>][<span class="st">"Share"</span>] <span class="op">/</span> simple_average.iloc[<span class="dv">0</span>][<span class="st">"Share"</span>]</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Causal Risk Ratio:"</span>, causal_risk_ratio)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Causal Risk Ratio: 1.2564102564102564</code></pre>
</div>
</div>
<p>This finding we know on inspection is driven by the imbalance in the risk strata across the treatment groups.</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">"Risk_Strata"</span>)[[<span class="st">"Treatment"</span>]].count().assign(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    proportion<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"Treatment"</span>] <span class="op">/</span> <span class="bu">len</span>(df)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Treatment</th>
      <th>proportion</th>
    </tr>
    <tr>
      <th>Risk_Strata</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>8</td>
      <td>0.4</td>
    </tr>
    <tr>
      <th>1</th>
      <td>12</td>
      <td>0.6</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>We can correct for this by weighting the results by the share each group represents across the <code>Risk_Strata</code>. In other words when we correct for the population size at the different levels of risk we get a better estimate of the effect. First we see what the expected outcome is for each strata.</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>outcomes_controlled <span class="op">=</span> (</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    df.groupby([<span class="st">"Risk_Strata"</span>, <span class="st">"Treatment"</span>])[[<span class="st">"Outcome"</span>]]</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    .pivot(index<span class="op">=</span><span class="st">"Treatment"</span>, columns<span class="op">=</span>[<span class="st">"Risk_Strata"</span>], values<span class="op">=</span><span class="st">"Outcome"</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>outcomes_controlled</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th>Risk_Strata</th>
      <th>0</th>
      <th>1</th>
    </tr>
    <tr>
      <th>Treatment</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.25</td>
      <td>0.666667</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.25</td>
      <td>0.666667</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Note how the expected outcomes are equal across the stratified groups. We can now combine these estimate with the population weights (derived earlier) in each segment to get our weighted average.</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>weighted_avg <span class="op">=</span> outcomes_controlled.assign(formula<span class="op">=</span><span class="st">"0.4*0.25 + 0.6*0.66"</span>).assign(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    weighted_average<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">0</span>] <span class="op">*</span> (df[df[<span class="st">"Risk_Strata"</span>] <span class="op">==</span> <span class="dv">0</span>].shape[<span class="dv">0</span>] <span class="op">/</span> <span class="bu">len</span>(df))</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> x[<span class="dv">1</span>] <span class="op">*</span> (df[df[<span class="st">"Risk_Strata"</span>] <span class="op">==</span> <span class="dv">1</span>].shape[<span class="dv">0</span>] <span class="op">/</span> <span class="bu">len</span>(df))</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>weighted_avg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th>Risk_Strata</th>
      <th>0</th>
      <th>1</th>
      <th>formula</th>
      <th>weighted_average</th>
    </tr>
    <tr>
      <th>Treatment</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.25</td>
      <td>0.666667</td>
      <td>0.4*0.25 + 0.6*0.66</td>
      <td>0.5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.25</td>
      <td>0.666667</td>
      <td>0.4*0.25 + 0.6*0.66</td>
      <td>0.5</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>From which we can derive a more sensible treatment effect.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>causal_risk_ratio <span class="op">=</span> (</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    weighted_avg.iloc[<span class="dv">1</span>][<span class="st">"weighted_average"</span>] <span class="op">/</span> weighted_avg.iloc[<span class="dv">0</span>][<span class="st">"weighted_average"</span>]</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Causal Risk Ratio:"</span>, causal_risk_ratio)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Causal Risk Ratio: 1.0</code></pre>
</div>
</div>
</section>
<section id="regression-as-stratification" class="level2">
<h2 class="anchored" data-anchor-id="regression-as-stratification">Regression as Stratification</h2>
<p>So far, so good. But so what?</p>
<p>The point here is that the above series of steps can be difficult to accomplish with more complex sets of groups and risk profiles. So it’s useful to understand that regression can be used to automatically account for the variation in outcome effects across the different strata of our population. More prosaically, the example shows that it really matters what variables you put in your model.</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>reg <span class="op">=</span> bmb.Model(<span class="st">"Outcome ~ 1 + Treatment"</span>, df)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> reg.fit()</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>reg_strata <span class="op">=</span> bmb.Model(<span class="st">"Outcome ~ 1 + Treatment + Risk_Strata + Treatment_x_Risk_Strata"</span>, df)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>results_strata <span class="op">=</span> reg_strata.fit()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Auto-assigning NUTS sampler...
Initializing NUTS using jitter+adapt_diag...
Multiprocess sampling (2 chains in 2 jobs)
NUTS: [sigma, Intercept, Treatment]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"10c29193bb6242128d967f709789070e","version_major":2,"version_minor":0}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling 2 chains for 1_000 tune and 1_000 draw iterations (2_000 + 2_000 draws total) took 2 seconds.
We recommend running at least 4 chains for robust computation of convergence diagnostics
Auto-assigning NUTS sampler...
Initializing NUTS using jitter+adapt_diag...
Multiprocess sampling (2 chains in 2 jobs)
NUTS: [sigma, Intercept, Treatment, Risk_Strata, Treatment_x_Risk_Strata]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"8bb549d0800140879b146e45a94bb979","version_major":2,"version_minor":0}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling 2 chains for 1_000 tune and 1_000 draw iterations (2_000 + 2_000 draws total) took 4 seconds.
We recommend running at least 4 chains for robust computation of convergence diagnostics</code></pre>
</div>
</div>
<p>We can now inspect the treatment effect and the implied causal risk ratio in each model. We can quickly recover that controlling for the <strong>right</strong> variables in our regression model automatically adjusts the treatment effect downwards towards 0.</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>az.summary(results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>mean</th>
      <th>sd</th>
      <th>hdi_3%</th>
      <th>hdi_97%</th>
      <th>mcse_mean</th>
      <th>mcse_sd</th>
      <th>ess_bulk</th>
      <th>ess_tail</th>
      <th>r_hat</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Intercept</th>
      <td>0.433</td>
      <td>0.214</td>
      <td>0.036</td>
      <td>0.830</td>
      <td>0.004</td>
      <td>0.003</td>
      <td>2394.0</td>
      <td>1504.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>Treatment</th>
      <td>0.109</td>
      <td>0.275</td>
      <td>-0.379</td>
      <td>0.641</td>
      <td>0.006</td>
      <td>0.007</td>
      <td>2084.0</td>
      <td>1071.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>sigma</th>
      <td>0.545</td>
      <td>0.093</td>
      <td>0.391</td>
      <td>0.722</td>
      <td>0.002</td>
      <td>0.002</td>
      <td>1831.0</td>
      <td>1501.0</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>az.summary(results_strata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>mean</th>
      <th>sd</th>
      <th>hdi_3%</th>
      <th>hdi_97%</th>
      <th>mcse_mean</th>
      <th>mcse_sd</th>
      <th>ess_bulk</th>
      <th>ess_tail</th>
      <th>r_hat</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Intercept</th>
      <td>0.252</td>
      <td>0.266</td>
      <td>-0.274</td>
      <td>0.713</td>
      <td>0.008</td>
      <td>0.005</td>
      <td>1212.0</td>
      <td>1628.0</td>
      <td>1.00</td>
    </tr>
    <tr>
      <th>Risk_Strata</th>
      <td>0.408</td>
      <td>0.404</td>
      <td>-0.302</td>
      <td>1.165</td>
      <td>0.014</td>
      <td>0.010</td>
      <td>788.0</td>
      <td>1160.0</td>
      <td>1.01</td>
    </tr>
    <tr>
      <th>Treatment</th>
      <td>-0.004</td>
      <td>0.366</td>
      <td>-0.706</td>
      <td>0.645</td>
      <td>0.012</td>
      <td>0.008</td>
      <td>1016.0</td>
      <td>1278.0</td>
      <td>1.00</td>
    </tr>
    <tr>
      <th>Treatment_x_Risk_Strata</th>
      <td>0.014</td>
      <td>0.493</td>
      <td>-0.967</td>
      <td>0.882</td>
      <td>0.018</td>
      <td>0.013</td>
      <td>748.0</td>
      <td>1009.0</td>
      <td>1.00</td>
    </tr>
    <tr>
      <th>sigma</th>
      <td>0.531</td>
      <td>0.094</td>
      <td>0.361</td>
      <td>0.693</td>
      <td>0.003</td>
      <td>0.002</td>
      <td>1413.0</td>
      <td>1201.0</td>
      <td>1.00</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> az.plot_forest(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    [results, results_strata],</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    model_names<span class="op">=</span>[<span class="st">"naive_model"</span>, <span class="st">"stratified_model"</span>],</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    var_names<span class="op">=</span>[<span class="st">"Treatment"</span>],</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    kind<span class="op">=</span><span class="st">"ridgeplot"</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    ridgeplot_alpha<span class="op">=</span><span class="fl">0.4</span>,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    combined<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>),</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>)</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_title(<span class="st">"Treatment Effects under Stratification/Non-stratification"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="mister_p_files/figure-html/cell-13-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>We can even see this in the predicted outcomes for the model. This is an important step. The regression model automatically adjusts for the risk profile within the appropriate strata in the data “seen” by the model.</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="op">=</span> df[[<span class="st">"Risk_Strata"</span>]].assign(Treatment<span class="op">=</span><span class="dv">1</span>).assign(Treatment_x_Risk_Strata<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>new_preds <span class="op">=</span> reg_strata.predict(results_strata, kind<span class="op">=</span><span class="st">"pps"</span>, data<span class="op">=</span>new_df, inplace<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Expected Outcome in the Treated"</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>new_preds[<span class="st">"posterior_predictive"</span>][<span class="st">"Outcome"</span>].mean().item()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Expected Outcome in the Treated</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>0.5073302224271066</code></pre>
</div>
</div>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="op">=</span> df[[<span class="st">"Risk_Strata"</span>]].assign(Treatment<span class="op">=</span><span class="dv">0</span>).assign(Treatment_x_Risk_Strata<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>new_preds <span class="op">=</span> reg_strata.predict(results_strata, kind<span class="op">=</span><span class="st">"pps"</span>, data<span class="op">=</span>new_df, inplace<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Expected Outcome in the Untreated"</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>new_preds[<span class="st">"posterior_predictive"</span>][<span class="st">"Outcome"</span>].mean().item()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Expected Outcome in the Untreated</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>0.4947595268000831</code></pre>
</div>
</div>
<p>We can see these results more clearly using <code>bambi</code> model interpretation functions to see the predictions within a specific strata.</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">6</span>))</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>axs <span class="op">=</span> axs.flatten()</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>bmb.interpret.plot_predictions(reg, results, conditional<span class="op">=</span>[<span class="st">"Treatment"</span>], ax<span class="op">=</span>axs[<span class="dv">0</span>])</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>bmb.interpret.plot_predictions(reg_strata, results_strata, conditional<span class="op">=</span>[<span class="st">"Treatment"</span>], ax<span class="op">=</span>axs[<span class="dv">1</span>])</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].set_title(<span class="st">"Non Stratified Regression </span><span class="ch">\n</span><span class="st"> Model Predictions"</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].set_title(<span class="st">"Stratified Regression </span><span class="ch">\n</span><span class="st"> Model Predictions"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Default computed for conditional variable: Treatment
Default computed for conditional variable: Treatment
Default computed for unspecified variable: Risk_Strata, Treatment_x_Risk_Strata</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="mister_p_files/figure-html/cell-16-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Hernan and Robins expand on these foundational observations and elaborate the implications for causal inference and the bias of confounding variables. We won’t go into these details, as we instead we want to draw out the connection with controlling for the risk of non-representative sampling. The usefulness of “representative-ness” as an idea is disputed in the statistical literature due to the vagueness of the term. To say a sample is representative is ussually akin to meaning that it was generated from a high-quality probability sampling design. This design is specified to avoid the creep of bias due to selection effects contaminating the results.</p>
<p>We’ve seen how regression can automate stratification across the levels of covariates in the model conditional on the sample data. But what if the prevalence of the risk-profile in your data does not reflect the prevalance of risk in the wider population? Then the regression model will automatically adjust to the prevalence in the sample, but it is not adjusting to the correct weights.</p>
</section>
<section id="the-need-for-post-stratification" class="level2">
<h2 class="anchored" data-anchor-id="the-need-for-post-stratification">The Need for Post-Stratification</h2>
<p>In the context of national survey design there is always a concern that the sample respondents may be more or less representative of the population across different key demographics e.g.&nbsp;it’s unlikely we would put much faith in the survey’s accuracy if it had 90% male respondents on a question about the lived experience of women. Given that we can know before hand that certain demographic splits are not relective of the census data, we can use this information to appropriately re-weight the regressions fit to non-representative survey data.</p>
<p>We’ll demonstrate the idea of multi-level regression and post-stratification adjustment by replicating some of the steps discussed in Martin, Philips and Gelmen’s <a href="https://bookdown.org/jl5522/MRP-case-studies/">“Multilevel Regression and Poststratification Case Studies”</a>.</p>
<p>They cite data from the Cooperative Congressional Election Study (Schaffner, Ansolabehere, and Luks (2018)), a US nationwide survey designed by a consortium of 60 research teams and administered by YouGov. The outcome of interest is a binary question: Should employers decline coverage of abortions in insurance plans?</p>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>cces_all_df <span class="op">=</span> pd.read_csv(<span class="st">"data/mr_p_cces18_common_vv.csv.gz"</span>, low_memory<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>cces_all_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>caseid</th>
      <th>commonweight</th>
      <th>commonpostweight</th>
      <th>vvweight</th>
      <th>vvweight_post</th>
      <th>tookpost</th>
      <th>CCEStake</th>
      <th>birthyr</th>
      <th>gender</th>
      <th>educ</th>
      <th>...</th>
      <th>CL_party</th>
      <th>CL_2018gvm</th>
      <th>CL_2018pep</th>
      <th>CL_2018pvm</th>
      <th>starttime</th>
      <th>endtime</th>
      <th>starttime_post</th>
      <th>endtime_post</th>
      <th>DMA</th>
      <th>dmaname</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>123464282</td>
      <td>0.940543</td>
      <td>0.7936</td>
      <td>0.740858</td>
      <td>0.641412</td>
      <td>2</td>
      <td>1</td>
      <td>1964</td>
      <td>2</td>
      <td>4</td>
      <td>...</td>
      <td>11.0</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>04oct2018 02:47:10</td>
      <td>09oct2018 04:16:31</td>
      <td>11nov2018 00:41:13</td>
      <td>11nov2018 01:21:53</td>
      <td>512.0</td>
      <td>BALTIMORE</td>
    </tr>
    <tr>
      <th>1</th>
      <td>170169205</td>
      <td>0.769724</td>
      <td>0.7388</td>
      <td>0.425236</td>
      <td>0.415134</td>
      <td>2</td>
      <td>1</td>
      <td>1971</td>
      <td>2</td>
      <td>2</td>
      <td>...</td>
      <td>13.0</td>
      <td>NaN</td>
      <td>6.0</td>
      <td>2.0</td>
      <td>02oct2018 06:55:22</td>
      <td>02oct2018 07:32:51</td>
      <td>12nov2018 00:49:50</td>
      <td>12nov2018 01:08:43</td>
      <td>531.0</td>
      <td>"TRI-CITIES</td>
    </tr>
    <tr>
      <th>2</th>
      <td>175996005</td>
      <td>1.491642</td>
      <td>1.3105</td>
      <td>1.700094</td>
      <td>1.603264</td>
      <td>2</td>
      <td>1</td>
      <td>1958</td>
      <td>2</td>
      <td>3</td>
      <td>...</td>
      <td>13.0</td>
      <td>5.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>07oct2018 00:48:23</td>
      <td>07oct2018 01:38:41</td>
      <td>12nov2018 21:49:41</td>
      <td>12nov2018 22:19:28</td>
      <td>564.0</td>
      <td>CHARLESTON-HUNTINGTON</td>
    </tr>
    <tr>
      <th>3</th>
      <td>176818556</td>
      <td>5.104709</td>
      <td>4.6304</td>
      <td>5.946729</td>
      <td>5.658840</td>
      <td>2</td>
      <td>1</td>
      <td>1946</td>
      <td>2</td>
      <td>6</td>
      <td>...</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>NaN</td>
      <td>3.0</td>
      <td>11oct2018 15:20:26</td>
      <td>11oct2018 16:18:42</td>
      <td>11nov2018 13:24:16</td>
      <td>11nov2018 14:00:14</td>
      <td>803.0</td>
      <td>LOS ANGELES</td>
    </tr>
    <tr>
      <th>4</th>
      <td>202120533</td>
      <td>0.466526</td>
      <td>0.3745</td>
      <td>0.412451</td>
      <td>0.422327</td>
      <td>2</td>
      <td>1</td>
      <td>1972</td>
      <td>2</td>
      <td>2</td>
      <td>...</td>
      <td>3.0</td>
      <td>5.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>08oct2018 02:31:28</td>
      <td>08oct2018 03:03:48</td>
      <td>15nov2018 01:04:16</td>
      <td>15nov2018 01:57:21</td>
      <td>529.0</td>
      <td>LOUISVILLE</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 526 columns</p>
</div>
</div>
</div>
<section id="cleaning-census-data" class="level3">
<h3 class="anchored" data-anchor-id="cleaning-census-data">Cleaning Census Data</h3>
<p>To prepare the census data for modelling we need to break the demographic data into appropriate stratum. We will break out these groupings as along broad categories familiar to audiences of election coverage news. Even these steps amount to a significant choice where we use our knowledge of pertinent demographics to decide upon the key strata we wish to represent in our model, as we seek to better predict and understand the voting outcome.</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>states <span class="op">=</span> [</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"AL"</span>,</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"AK"</span>,</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"AZ"</span>,</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"AR"</span>,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CA"</span>,</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CO"</span>,</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CT"</span>,</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DE"</span>,</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"FL"</span>,</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"GA"</span>,</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"HI"</span>,</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ID"</span>,</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"IL"</span>,</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"IN"</span>,</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"IA"</span>,</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"KS"</span>,</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"KY"</span>,</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"LA"</span>,</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ME"</span>,</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MD"</span>,</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MA"</span>,</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MI"</span>,</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MN"</span>,</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MS"</span>,</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MO"</span>,</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MT"</span>,</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">"NE"</span>,</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">"NV"</span>,</span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">"NH"</span>,</span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">"NJ"</span>,</span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"NM"</span>,</span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"NY"</span>,</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">"NC"</span>,</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ND"</span>,</span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">"OH"</span>,</span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>    <span class="st">"OK"</span>,</span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a>    <span class="st">"OR"</span>,</span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PA"</span>,</span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a>    <span class="st">"RI"</span>,</span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SC"</span>,</span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SD"</span>,</span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TN"</span>,</span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TX"</span>,</span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a>    <span class="st">"UT"</span>,</span>
<span id="cb27-46"><a href="#cb27-46" aria-hidden="true" tabindex="-1"></a>    <span class="st">"VT"</span>,</span>
<span id="cb27-47"><a href="#cb27-47" aria-hidden="true" tabindex="-1"></a>    <span class="st">"VA"</span>,</span>
<span id="cb27-48"><a href="#cb27-48" aria-hidden="true" tabindex="-1"></a>    <span class="st">"WA"</span>,</span>
<span id="cb27-49"><a href="#cb27-49" aria-hidden="true" tabindex="-1"></a>    <span class="st">"WV"</span>,</span>
<span id="cb27-50"><a href="#cb27-50" aria-hidden="true" tabindex="-1"></a>    <span class="st">"WI"</span>,</span>
<span id="cb27-51"><a href="#cb27-51" aria-hidden="true" tabindex="-1"></a>    <span class="st">"WY"</span>,</span>
<span id="cb27-52"><a href="#cb27-52" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb27-53"><a href="#cb27-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-54"><a href="#cb27-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-55"><a href="#cb27-55" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">56</span>, <span class="dv">1</span>))</span>
<span id="cb27-56"><a href="#cb27-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-57"><a href="#cb27-57" aria-hidden="true" tabindex="-1"></a>lkup_states <span class="op">=</span> <span class="bu">dict</span>(<span class="bu">zip</span>(numbers, states))</span>
<span id="cb27-58"><a href="#cb27-58" aria-hidden="true" tabindex="-1"></a>lkup_states</span>
<span id="cb27-59"><a href="#cb27-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-60"><a href="#cb27-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-61"><a href="#cb27-61" aria-hidden="true" tabindex="-1"></a>ethnicity <span class="op">=</span> [</span>
<span id="cb27-62"><a href="#cb27-62" aria-hidden="true" tabindex="-1"></a>    <span class="st">"White"</span>,</span>
<span id="cb27-63"><a href="#cb27-63" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Black"</span>,</span>
<span id="cb27-64"><a href="#cb27-64" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Hispanic"</span>,</span>
<span id="cb27-65"><a href="#cb27-65" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Asian"</span>,</span>
<span id="cb27-66"><a href="#cb27-66" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Native American"</span>,</span>
<span id="cb27-67"><a href="#cb27-67" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Mixed"</span>,</span>
<span id="cb27-68"><a href="#cb27-68" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Other"</span>,</span>
<span id="cb27-69"><a href="#cb27-69" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Middle Eastern"</span>,</span>
<span id="cb27-70"><a href="#cb27-70" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb27-71"><a href="#cb27-71" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">9</span>, <span class="dv">1</span>))</span>
<span id="cb27-72"><a href="#cb27-72" aria-hidden="true" tabindex="-1"></a>lkup_ethnicity <span class="op">=</span> <span class="bu">dict</span>(<span class="bu">zip</span>(numbers, ethnicity))</span>
<span id="cb27-73"><a href="#cb27-73" aria-hidden="true" tabindex="-1"></a>lkup_ethnicity</span>
<span id="cb27-74"><a href="#cb27-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-75"><a href="#cb27-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-76"><a href="#cb27-76" aria-hidden="true" tabindex="-1"></a>edu <span class="op">=</span> [<span class="st">"No HS"</span>, <span class="st">"HS"</span>, <span class="st">"Some college"</span>, <span class="st">"Associates"</span>, <span class="st">"4-Year College"</span>, <span class="st">"Post-grad"</span>]</span>
<span id="cb27-77"><a href="#cb27-77" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">7</span>, <span class="dv">1</span>))</span>
<span id="cb27-78"><a href="#cb27-78" aria-hidden="true" tabindex="-1"></a>lkup_edu <span class="op">=</span> <span class="bu">dict</span>(<span class="bu">zip</span>(numbers, edu))</span>
<span id="cb27-79"><a href="#cb27-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-80"><a href="#cb27-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-81"><a href="#cb27-81" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clean_df(df):</span>
<span id="cb27-82"><a href="#cb27-82" aria-hidden="true" tabindex="-1"></a>    <span class="co">## 0 Oppose and 1 Support</span></span>
<span id="cb27-83"><a href="#cb27-83" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"abortion"</span>] <span class="op">=</span> np.<span class="bu">abs</span>(df[<span class="st">"CC18_321d"</span>] <span class="op">-</span> <span class="dv">2</span>)</span>
<span id="cb27-84"><a href="#cb27-84" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"state"</span>] <span class="op">=</span> df[<span class="st">"inputstate"</span>].<span class="bu">map</span>(lkup_states)</span>
<span id="cb27-85"><a href="#cb27-85" aria-hidden="true" tabindex="-1"></a>    <span class="co">## dichotomous (coded as -0.5 Female, +0.5 Male)</span></span>
<span id="cb27-86"><a href="#cb27-86" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"male"</span>] <span class="op">=</span> np.<span class="bu">abs</span>(df[<span class="st">"gender"</span>] <span class="op">-</span> <span class="dv">2</span>) <span class="op">-</span> <span class="fl">0.5</span></span>
<span id="cb27-87"><a href="#cb27-87" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"eth"</span>] <span class="op">=</span> df[<span class="st">"race"</span>].<span class="bu">map</span>(lkup_ethnicity)</span>
<span id="cb27-88"><a href="#cb27-88" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"eth"</span>] <span class="op">=</span> np.where(</span>
<span id="cb27-89"><a href="#cb27-89" aria-hidden="true" tabindex="-1"></a>        df[<span class="st">"eth"</span>].isin([<span class="st">"Asian"</span>, <span class="st">"Other"</span>, <span class="st">"Middle Eastern"</span>, <span class="st">"Mixed"</span>, <span class="st">"Native American"</span>]),</span>
<span id="cb27-90"><a href="#cb27-90" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Other"</span>,</span>
<span id="cb27-91"><a href="#cb27-91" aria-hidden="true" tabindex="-1"></a>        df[<span class="st">"eth"</span>],</span>
<span id="cb27-92"><a href="#cb27-92" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb27-93"><a href="#cb27-93" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"age"</span>] <span class="op">=</span> <span class="dv">2018</span> <span class="op">-</span> df[<span class="st">"birthyr"</span>]</span>
<span id="cb27-94"><a href="#cb27-94" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"age"</span>] <span class="op">=</span> pd.cut(</span>
<span id="cb27-95"><a href="#cb27-95" aria-hidden="true" tabindex="-1"></a>        df[<span class="st">"age"</span>].astype(<span class="bu">int</span>),</span>
<span id="cb27-96"><a href="#cb27-96" aria-hidden="true" tabindex="-1"></a>        [<span class="dv">0</span>, <span class="dv">29</span>, <span class="dv">39</span>, <span class="dv">49</span>, <span class="dv">59</span>, <span class="dv">69</span>, <span class="dv">120</span>],</span>
<span id="cb27-97"><a href="#cb27-97" aria-hidden="true" tabindex="-1"></a>        labels<span class="op">=</span>[<span class="st">"18-29"</span>, <span class="st">"30-39"</span>, <span class="st">"40-49"</span>, <span class="st">"50-59"</span>, <span class="st">"60-69"</span>, <span class="st">"70+"</span>],</span>
<span id="cb27-98"><a href="#cb27-98" aria-hidden="true" tabindex="-1"></a>        ordered<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb27-99"><a href="#cb27-99" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb27-100"><a href="#cb27-100" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"edu"</span>] <span class="op">=</span> df[<span class="st">"educ"</span>].<span class="bu">map</span>(lkup_edu)</span>
<span id="cb27-101"><a href="#cb27-101" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"edu"</span>] <span class="op">=</span> np.where(df[<span class="st">"edu"</span>].isin([<span class="st">"Some college"</span>, <span class="st">"Associates"</span>]), <span class="st">"Some college"</span>, df[<span class="st">"edu"</span>])</span>
<span id="cb27-102"><a href="#cb27-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-103"><a href="#cb27-103" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df[[<span class="st">"abortion"</span>, <span class="st">"state"</span>, <span class="st">"eth"</span>, <span class="st">"male"</span>, <span class="st">"age"</span>, <span class="st">"edu"</span>, <span class="st">"caseid"</span>]]</span>
<span id="cb27-104"><a href="#cb27-104" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df.dropna()</span>
<span id="cb27-105"><a href="#cb27-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-106"><a href="#cb27-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-107"><a href="#cb27-107" aria-hidden="true" tabindex="-1"></a>statelevel_predictors_df <span class="op">=</span> pd.read_csv(<span class="st">"data/mr_p_statelevel_predictors.csv"</span>)</span>
<span id="cb27-108"><a href="#cb27-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-109"><a href="#cb27-109" aria-hidden="true" tabindex="-1"></a>cces_all_df <span class="op">=</span> clean_df(cces_all_df)</span>
<span id="cb27-110"><a href="#cb27-110" aria-hidden="true" tabindex="-1"></a>cces_all_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>abortion</th>
      <th>state</th>
      <th>eth</th>
      <th>male</th>
      <th>age</th>
      <th>edu</th>
      <th>caseid</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1.0</td>
      <td>MS</td>
      <td>Other</td>
      <td>-0.5</td>
      <td>50-59</td>
      <td>Some college</td>
      <td>123464282</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.0</td>
      <td>WA</td>
      <td>White</td>
      <td>-0.5</td>
      <td>40-49</td>
      <td>HS</td>
      <td>170169205</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.0</td>
      <td>RI</td>
      <td>White</td>
      <td>-0.5</td>
      <td>60-69</td>
      <td>Some college</td>
      <td>175996005</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.0</td>
      <td>CO</td>
      <td>Other</td>
      <td>-0.5</td>
      <td>70+</td>
      <td>Post-grad</td>
      <td>176818556</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1.0</td>
      <td>MA</td>
      <td>White</td>
      <td>-0.5</td>
      <td>40-49</td>
      <td>HS</td>
      <td>202120533</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>We will now show how estimates drawn from sample data (biased for whatever reasons of chance and circumstance) can be improved by using a post-stratification adjustment based on known facts about the size of the population in each strata considered in the model. This additional step is simply another modelling choice - another way to invest our model with information. In this manner the technique comes naturally in the Bayesian perspective.</p>
</section>
<section id="biased-sample" class="level3">
<h3 class="anchored" data-anchor-id="biased-sample">Biased Sample</h3>
<p>Consider a deliberately biased sample. Biased away from the census data and in this manner we show how to better recover population level estimates by incorporating details about the census population size across each of the stratum.</p>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>cces_df <span class="op">=</span> cces_all_df.merge(statelevel_predictors_df, left_on<span class="op">=</span><span class="st">"state"</span>, right_on<span class="op">=</span><span class="st">"state"</span>, how<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>cces_df[<span class="st">"weight"</span>] <span class="op">=</span> (</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">5</span> <span class="op">*</span> cces_df[<span class="st">"repvote"</span>]</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> (cces_df[<span class="st">"age"</span>] <span class="op">==</span> <span class="st">"18-29"</span>) <span class="op">*</span> <span class="fl">0.5</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> (cces_df[<span class="st">"age"</span>] <span class="op">==</span> <span class="st">"30-39"</span>) <span class="op">*</span> <span class="dv">1</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> (cces_df[<span class="st">"age"</span>] <span class="op">==</span> <span class="st">"40-49"</span>) <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> (cces_df[<span class="st">"age"</span>] <span class="op">==</span> <span class="st">"50-59"</span>) <span class="op">*</span> <span class="dv">4</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> (cces_df[<span class="st">"age"</span>] <span class="op">==</span> <span class="st">"60-69"</span>) <span class="op">*</span> <span class="dv">6</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> (cces_df[<span class="st">"age"</span>] <span class="op">==</span> <span class="st">"70+"</span>) <span class="op">*</span> <span class="dv">8</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> (cces_df[<span class="st">"male"</span>] <span class="op">==</span> <span class="dv">1</span>) <span class="op">*</span> <span class="dv">20</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> (cces_df[<span class="st">"eth"</span>] <span class="op">==</span> <span class="st">"White"</span>) <span class="op">*</span> <span class="fl">1.05</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>cces_df <span class="op">=</span> cces_df.sample(<span class="dv">5000</span>, weights<span class="op">=</span><span class="st">"weight"</span>, random_state<span class="op">=</span><span class="dv">1000</span>)</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>cces_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>abortion</th>
      <th>state</th>
      <th>eth</th>
      <th>male</th>
      <th>age</th>
      <th>edu</th>
      <th>caseid</th>
      <th>repvote</th>
      <th>region</th>
      <th>weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>35171</th>
      <td>0.0</td>
      <td>KY</td>
      <td>White</td>
      <td>-0.5</td>
      <td>60-69</td>
      <td>HS</td>
      <td>415208636</td>
      <td>0.656706</td>
      <td>South</td>
      <td>10.333531</td>
    </tr>
    <tr>
      <th>5167</th>
      <td>0.0</td>
      <td>NM</td>
      <td>White</td>
      <td>0.5</td>
      <td>60-69</td>
      <td>No HS</td>
      <td>412278020</td>
      <td>0.453492</td>
      <td>West</td>
      <td>9.317460</td>
    </tr>
    <tr>
      <th>52365</th>
      <td>0.0</td>
      <td>OK</td>
      <td>Hispanic</td>
      <td>-0.5</td>
      <td>30-39</td>
      <td>4-Year College</td>
      <td>419467449</td>
      <td>0.693047</td>
      <td>South</td>
      <td>4.465237</td>
    </tr>
    <tr>
      <th>23762</th>
      <td>1.0</td>
      <td>WV</td>
      <td>White</td>
      <td>-0.5</td>
      <td>50-59</td>
      <td>Post-grad</td>
      <td>413757903</td>
      <td>0.721611</td>
      <td>South</td>
      <td>8.658053</td>
    </tr>
    <tr>
      <th>48197</th>
      <td>0.0</td>
      <td>RI</td>
      <td>White</td>
      <td>0.5</td>
      <td>50-59</td>
      <td>4-Year College</td>
      <td>417619385</td>
      <td>0.416893</td>
      <td>Northeast</td>
      <td>7.134465</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
<section id="visualise-the-bias" class="level3">
<h3 class="anchored" data-anchor-id="visualise-the-bias">Visualise the Bias</h3>
<p>Now we plot the outcome of expected shares within each demographic bucket across both the biased sample and the census data.</p>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>mosaic <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="st">    ABCD</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="st">    EEEE</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(layout<span class="op">=</span><span class="st">"constrained"</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">10</span>))</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>ax_dict <span class="op">=</span> fig.subplot_mosaic(mosaic)</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_var(var, ax):</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> (</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>        cces_df.groupby(var, observed<span class="op">=</span><span class="va">False</span>)[[<span class="st">"abortion"</span>]]</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>        .mean()</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>        .rename({<span class="st">"abortion"</span>: <span class="st">"share"</span>}, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>        .reset_index()</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> (</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>        cces_all_df.groupby(var, observed<span class="op">=</span><span class="va">False</span>)[[<span class="st">"abortion"</span>]]</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>        .mean()</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>        .rename({<span class="st">"abortion"</span>: <span class="st">"share_census"</span>}, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>        .reset_index()</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> a.merge(b).sort_values(<span class="st">"share"</span>)</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>    ax_dict[ax].vlines(a[var], a.share, a.share_census)</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>    ax_dict[ax].scatter(a[var], a.share, color<span class="op">=</span><span class="st">"blue"</span>, label<span class="op">=</span><span class="st">"Sample"</span>)</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>    ax_dict[ax].scatter(a[var], a.share_census, color<span class="op">=</span><span class="st">"red"</span>, label<span class="op">=</span><span class="st">"Census"</span>)</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>    ax_dict[ax].set_ylabel(<span class="st">"Proportion"</span>)</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>plot_var(<span class="st">"age"</span>, <span class="st">"A"</span>)</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>plot_var(<span class="st">"edu"</span>, <span class="st">"B"</span>)</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>plot_var(<span class="st">"male"</span>, <span class="st">"C"</span>)</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>plot_var(<span class="st">"eth"</span>, <span class="st">"D"</span>)</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>plot_var(<span class="st">"state"</span>, <span class="st">"E"</span>)</span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>ax_dict[<span class="st">"E"</span>].legend()</span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>ax_dict[<span class="st">"C"</span>].set_xticklabels([])</span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>ax_dict[<span class="st">"C"</span>].set_xlabel(<span class="st">"Female / Male"</span>)</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">"Comparison of Proportions: Survey Sample V Census"</span>, fontsize<span class="op">=</span><span class="dv">20</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="mister_p_files/figure-html/cell-20-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>We can see here how the proportions differ markedly across the census report and our biased sample in how they represent the preferential votes with each strata. We now try and quantify the overall differences between the biased sample and the census report. We calculate the expected proportions in each dataset and their standard error.</p>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_se_bernoulli(p, n):</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.sqrt(p <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> p) <span class="op">/</span> n)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>sample_cces_estimate <span class="op">=</span> {</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"mean"</span>: np.mean(cces_df[<span class="st">"abortion"</span>].astype(<span class="bu">float</span>)),</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"se"</span>: get_se_bernoulli(np.mean(cces_df[<span class="st">"abortion"</span>].astype(<span class="bu">float</span>)), <span class="bu">len</span>(cces_df)),</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>sample_cces_estimate</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>sample_cces_all_estimate <span class="op">=</span> {</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"mean"</span>: np.mean(cces_all_df[<span class="st">"abortion"</span>].astype(<span class="bu">float</span>)),</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"se"</span>: get_se_bernoulli(np.mean(cces_all_df[<span class="st">"abortion"</span>].astype(<span class="bu">float</span>)), <span class="bu">len</span>(cces_all_df)),</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>sample_cces_all_estimate</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>summary <span class="op">=</span> pd.DataFrame([sample_cces_all_estimate, sample_cces_estimate])</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>summary[<span class="st">"data"</span>] <span class="op">=</span> [<span class="st">"Full Data"</span>, <span class="st">"Biased Data"</span>]</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>mean</th>
      <th>se</th>
      <th>data</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.434051</td>
      <td>0.002113</td>
      <td>Full Data</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.465000</td>
      <td>0.007054</td>
      <td>Biased Data</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>A 3 percent difference in a national survey is a substantial error in the case where the difference is due to preventable bias.</p>
</section>
</section>
<section id="modelling-the-data" class="level2">
<h2 class="anchored" data-anchor-id="modelling-the-data">Modelling the Data</h2>
<p>To facilitate regression based stratification we first need a regression model. In our case we will ultimately fit a multi-level regression model with intercept terms for each for each of the groups in our demographic stratum. In this way we try to account for the appropriate set of variables (as in the example above) to better specify the effect modification due to membership within a particular demographic stratum.</p>
<p>We will fit the model using <code>bambi</code> using the binomial link function on the biased sample data. But first we aggregate up by demographic strata and count the occurences within each strata.</p>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>model_df <span class="op">=</span> (</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    cces_df.groupby([<span class="st">"state"</span>, <span class="st">"eth"</span>, <span class="st">"male"</span>, <span class="st">"age"</span>, <span class="st">"edu"</span>], observed<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    .agg({<span class="st">"caseid"</span>: <span class="st">"nunique"</span>, <span class="st">"abortion"</span>: <span class="st">"sum"</span>})</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    .sort_values(<span class="st">"abortion"</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    .rename({<span class="st">"caseid"</span>: <span class="st">"n"</span>}, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    .merge(statelevel_predictors_df, left_on<span class="op">=</span><span class="st">"state"</span>, right_on<span class="op">=</span><span class="st">"state"</span>, how<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>model_df[<span class="st">"abortion"</span>] <span class="op">=</span> model_df[<span class="st">"abortion"</span>].astype(<span class="bu">int</span>)</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>model_df[<span class="st">"n"</span>] <span class="op">=</span> model_df[<span class="st">"n"</span>].astype(<span class="bu">int</span>)</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>model_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>state</th>
      <th>eth</th>
      <th>male</th>
      <th>age</th>
      <th>edu</th>
      <th>n</th>
      <th>abortion</th>
      <th>repvote</th>
      <th>region</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ID</td>
      <td>White</td>
      <td>-0.5</td>
      <td>70+</td>
      <td>HS</td>
      <td>32</td>
      <td>18</td>
      <td>0.683102</td>
      <td>West</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ID</td>
      <td>White</td>
      <td>0.5</td>
      <td>70+</td>
      <td>4-Year College</td>
      <td>20</td>
      <td>16</td>
      <td>0.683102</td>
      <td>West</td>
    </tr>
    <tr>
      <th>2</th>
      <td>WV</td>
      <td>White</td>
      <td>0.5</td>
      <td>70+</td>
      <td>Some college</td>
      <td>17</td>
      <td>13</td>
      <td>0.721611</td>
      <td>South</td>
    </tr>
    <tr>
      <th>3</th>
      <td>WV</td>
      <td>White</td>
      <td>0.5</td>
      <td>70+</td>
      <td>4-Year College</td>
      <td>15</td>
      <td>12</td>
      <td>0.721611</td>
      <td>South</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ID</td>
      <td>White</td>
      <td>0.5</td>
      <td>70+</td>
      <td>Post-grad</td>
      <td>17</td>
      <td>11</td>
      <td>0.683102</td>
      <td>West</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Our <code>model_df</code> now has one row per Strata across all the demographic cuts.</p>
<section id="fit-base-model-to-biased-sample" class="level3">
<h3 class="anchored" data-anchor-id="fit-base-model-to-biased-sample">Fit Base Model to Biased Sample</h3>
<p>Here we use some of bambi’s latest functionality to assess the interaction effects between the variables.</p>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>formula <span class="op">=</span> <span class="st">""" p(abortion, n) ~ C(state) + C(eth) + C(edu) + male + repvote"""</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>base_model <span class="op">=</span> bmb.Model(formula, model_df, family<span class="op">=</span><span class="st">"binomial"</span>)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> base_model.fit(</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    random_seed<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    target_accept<span class="op">=</span><span class="fl">0.95</span>,</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    idata_kwargs<span class="op">=</span>{<span class="st">"log_likelihood"</span>: <span class="va">True</span>},</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Auto-assigning NUTS sampler...
Initializing NUTS using jitter+adapt_diag...
Multiprocess sampling (2 chains in 2 jobs)
NUTS: [Intercept, C(state), C(eth), C(edu), male, repvote]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"33a93f3531d5400b9dab941ea9fb8841","version_major":2,"version_minor":0}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling 2 chains for 1_000 tune and 1_000 draw iterations (2_000 + 2_000 draws total) took 1325 seconds.
We recommend running at least 4 chains for robust computation of convergence diagnostics
The rhat statistic is larger than 1.01 for some parameters. This indicates problems during sampling. See https://arxiv.org/abs/1903.08008 for details
The effective sample size per chain is smaller than 100 for some parameters.  A higher number is needed for reliable rhat and ess computation. See https://arxiv.org/abs/1903.08008 for details</code></pre>
</div>
</div>
<p>We plot the predicted outcomes within each group using the <code>plot_predictions</code> function.</p>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>mosaic <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="st">    AABB</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="st">    CCCC</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(layout<span class="op">=</span><span class="st">"constrained"</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">7</span>))</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>axs <span class="op">=</span> fig.subplot_mosaic(mosaic)</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>bmb.interpret.plot_predictions(base_model, result, <span class="st">"eth"</span>, ax<span class="op">=</span>axs[<span class="st">"A"</span>])</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>bmb.interpret.plot_predictions(base_model, result, <span class="st">"edu"</span>, ax<span class="op">=</span>axs[<span class="st">"B"</span>])</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>bmb.interpret.plot_predictions(base_model, result, <span class="st">"state"</span>, ax<span class="op">=</span>axs[<span class="st">"C"</span>])</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">"Plot Prediction per Class"</span>, fontsize<span class="op">=</span><span class="dv">20</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Default computed for conditional variable: eth
Default computed for unspecified variable: edu, male, repvote, state
Default computed for conditional variable: edu
Default computed for unspecified variable: eth, male, repvote, state
Default computed for conditional variable: state
Default computed for unspecified variable: edu, eth, male, repvote</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="mister_p_files/figure-html/cell-24-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>More interesting we can use the comparison functionality to compare differences in <code>eth</code> conditional on <code>age</code> and <code>edu</code>. Where we can see that the differences between ethnicities are pretty stable across all age groups, slightly shifted by within the <code>Post-grad</code> level of education.</p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> bmb.interpret.plot_comparisons(</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    model<span class="op">=</span>base_model,</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    idata<span class="op">=</span>result,</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    contrast<span class="op">=</span>{<span class="st">"eth"</span>: [<span class="st">"Black"</span>, <span class="st">"White"</span>]},</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    conditional<span class="op">=</span>[<span class="st">"age"</span>, <span class="st">"edu"</span>],</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    comparison_type<span class="op">=</span><span class="st">"diff"</span>,</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    subplot_kwargs<span class="op">=</span>{<span class="st">"main"</span>: <span class="st">"age"</span>, <span class="st">"group"</span>: <span class="st">"edu"</span>},</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    fig_kwargs<span class="op">=</span>{<span class="st">"figsize"</span>: (<span class="dv">12</span>, <span class="dv">5</span>), <span class="st">"sharey"</span>: <span class="va">True</span>},</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_title(<span class="st">"Comparison of Difference in Ethnicity </span><span class="ch">\n</span><span class="st"> within Age and Educational Strata"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Default computed for conditional variable: age, edu
Default computed for unspecified variable: male, repvote, state</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="mister_p_files/figure-html/cell-25-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>We can pull these specific estimates out into a table for closer inspection to see that the differences in response expected between the extremes of educational attainment are moderated by state iand race.</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>bmb.interpret.comparisons(</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    model<span class="op">=</span>base_model,</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    idata<span class="op">=</span>result,</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    contrast<span class="op">=</span>{<span class="st">"edu"</span>: [<span class="st">"Post-grad"</span>, <span class="st">"No HS"</span>]},</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    conditional<span class="op">=</span>{<span class="st">"eth"</span>: [<span class="st">"Black"</span>, <span class="st">"White"</span>], <span class="st">"state"</span>: [<span class="st">"NY"</span>, <span class="st">"CA"</span>, <span class="st">"ID"</span>, <span class="st">"VA"</span>]},</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    comparison_type<span class="op">=</span><span class="st">"diff"</span>,</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Default computed for unspecified variable: male, repvote</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="25">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>term</th>
      <th>estimate_type</th>
      <th>value</th>
      <th>eth</th>
      <th>state</th>
      <th>male</th>
      <th>repvote</th>
      <th>estimate</th>
      <th>lower_3.0%</th>
      <th>upper_97.0%</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>edu</td>
      <td>diff</td>
      <td>(Post-grad, No HS)</td>
      <td>Black</td>
      <td>CA</td>
      <td>0.0</td>
      <td>0.530191</td>
      <td>0.080885</td>
      <td>0.000010</td>
      <td>0.192397</td>
    </tr>
    <tr>
      <th>1</th>
      <td>edu</td>
      <td>diff</td>
      <td>(Post-grad, No HS)</td>
      <td>Black</td>
      <td>ID</td>
      <td>0.0</td>
      <td>0.530191</td>
      <td>0.084249</td>
      <td>0.000027</td>
      <td>0.189721</td>
    </tr>
    <tr>
      <th>2</th>
      <td>edu</td>
      <td>diff</td>
      <td>(Post-grad, No HS)</td>
      <td>Black</td>
      <td>NY</td>
      <td>0.0</td>
      <td>0.530191</td>
      <td>0.096051</td>
      <td>0.000142</td>
      <td>0.197739</td>
    </tr>
    <tr>
      <th>3</th>
      <td>edu</td>
      <td>diff</td>
      <td>(Post-grad, No HS)</td>
      <td>Black</td>
      <td>VA</td>
      <td>0.0</td>
      <td>0.530191</td>
      <td>0.126502</td>
      <td>0.017389</td>
      <td>0.215645</td>
    </tr>
    <tr>
      <th>4</th>
      <td>edu</td>
      <td>diff</td>
      <td>(Post-grad, No HS)</td>
      <td>White</td>
      <td>CA</td>
      <td>0.0</td>
      <td>0.530191</td>
      <td>0.079627</td>
      <td>0.000004</td>
      <td>0.190620</td>
    </tr>
    <tr>
      <th>5</th>
      <td>edu</td>
      <td>diff</td>
      <td>(Post-grad, No HS)</td>
      <td>White</td>
      <td>ID</td>
      <td>0.0</td>
      <td>0.530191</td>
      <td>0.094141</td>
      <td>0.000065</td>
      <td>0.199827</td>
    </tr>
    <tr>
      <th>6</th>
      <td>edu</td>
      <td>diff</td>
      <td>(Post-grad, No HS)</td>
      <td>White</td>
      <td>NY</td>
      <td>0.0</td>
      <td>0.530191</td>
      <td>0.094476</td>
      <td>0.000149</td>
      <td>0.199248</td>
    </tr>
    <tr>
      <th>7</th>
      <td>edu</td>
      <td>diff</td>
      <td>(Post-grad, No HS)</td>
      <td>White</td>
      <td>VA</td>
      <td>0.0</td>
      <td>0.530191</td>
      <td>0.100414</td>
      <td>0.005637</td>
      <td>0.197609</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>With this in mind we want to fit our final model to incorporate the variation we see here across the different levels of our stratified data.</p>
</section>
<section id="fit-final-model-to-biased-sample" class="level3">
<h3 class="anchored" data-anchor-id="fit-final-model-to-biased-sample">Fit Final Model to Biased Sample</h3>
<p>We can specify these features of our model using a hierarchical structure as follows:</p>
<p><span class="math display">\[
Pr(y_i = 1) = \text{logit}^{-1}(
\alpha_{\rm s[i]}^{\rm state}
+ \alpha_{\rm a[i]}^{\rm age}
+ \alpha_{\rm r[i]}^{\rm eth}
+ \alpha_{\rm e[i]}^{\rm edu}
+ \beta^{\rm male} \cdot {\rm Male}_{\rm i}
+ \alpha_{\rm g[i], r[i]}^{\rm male.eth}
+ \alpha_{\rm e[i], a[i]}^{\rm edu.age}
+ \alpha_{\rm e[i], r[i]}^{\rm edu.eth}
)
\]</span></p>
<p>Here we have used the fact that we can add components to the <span class="math inline">\(\alpha\)</span> intercept terms and interaction effects to express the stratum specific variation in the outcomes that we’ve seen in our exploratory work. Using the <code>bambi</code> formula syntax. We have:</p>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>formula <span class="op">=</span> <span class="st">"p(abortion, n) ~ male + repvote + (1 | state) + (1 | eth) + (1 | edu) + (1 | male:eth) + (1 | edu:age) + (1 | edu:eth)"</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>model_hierarchical <span class="op">=</span> bmb.Model(formula, model_df, family<span class="op">=</span><span class="st">"binomial"</span>)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> model_hierarchical.fit(</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    random_seed<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    target_accept<span class="op">=</span><span class="fl">0.99</span>,</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">#inference_method="nuts_numpyro",</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#num_chains=4,</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>    idata_kwargs<span class="op">=</span>{<span class="st">"log_likelihood"</span>: <span class="va">True</span>},</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Auto-assigning NUTS sampler...
Initializing NUTS using jitter+adapt_diag...
Multiprocess sampling (2 chains in 2 jobs)
NUTS: [Intercept, male, repvote, 1|state_sigma, 1|state_offset, 1|eth_sigma, 1|eth_offset, 1|edu_sigma, 1|edu_offset, 1|male:eth_sigma, 1|male:eth_offset, 1|edu:age_sigma, 1|edu:age_offset, 1|edu:eth_sigma, 1|edu:eth_offset]
/home/tomas/anaconda3/envs/bambi-dev/lib/python3.11/multiprocessing/popen_fork.py:66: RuntimeWarning: os.fork() was called. os.fork() is incompatible with multithreaded code, and JAX is multithreaded, so this will likely lead to a deadlock.
  self.pid = os.fork()</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"b67b00a8ad2b47f4abe041a02b8e57a7","version_major":2,"version_minor":0}
</script>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/home/tomas/anaconda3/envs/bambi-dev/lib/python3.11/multiprocessing/popen_fork.py:66: RuntimeWarning: os.fork() was called. os.fork() is incompatible with multithreaded code, and JAX is multithreaded, so this will likely lead to a deadlock.
  self.pid = os.fork()</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling 2 chains for 1_000 tune and 1_000 draw iterations (2_000 + 2_000 draws total) took 4434 seconds.
Chain 1 reached the maximum tree depth. Increase `max_treedepth`, increase `target_accept` or reparameterize.
We recommend running at least 4 chains for robust computation of convergence diagnostics
The rhat statistic is larger than 1.01 for some parameters. This indicates problems during sampling. See https://arxiv.org/abs/1903.08008 for details
The effective sample size per chain is smaller than 100 for some parameters.  A higher number is needed for reliable rhat and ess computation. See https://arxiv.org/abs/1903.08008 for details</code></pre>
</div>
</div>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>result</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">


            <div>
              <div class="xr-header">
                <div class="xr-obj-type">arviz.InferenceData</div>
              </div>
              <ul class="xr-sections group-sections">
              
            <li class="xr-section-item">
                  <input id="idata_posterior1a39c2ee-2ef8-4da7-8d7f-5e832a6b2e98" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_posterior1a39c2ee-2ef8-4da7-8d7f-5e832a6b2e98" class="xr-section-summary">posterior</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 2MB
Dimensions:               (chain: 2, draw: 1000, edu__factor_dim: 5,
                           edu:age__factor_dim: 30, edu:eth__factor_dim: 20,
                           eth__factor_dim: 4, male:eth__factor_dim: 8,
                           state__factor_dim: 46)
Coordinates:
  * chain                 (chain) int64 16B 0 1
  * draw                  (draw) int64 8kB 0 1 2 3 4 5 ... 995 996 997 998 999
  * edu__factor_dim       (edu__factor_dim) &lt;U14 280B '4-Year College' ... 'S...
  * edu:age__factor_dim   (edu:age__factor_dim) &lt;U20 2kB '4-Year College:18-2...
  * edu:eth__factor_dim   (edu:eth__factor_dim) &lt;U23 2kB '4-Year College:Blac...
  * eth__factor_dim       (eth__factor_dim) &lt;U8 128B 'Black' ... 'White'
  * male:eth__factor_dim  (male:eth__factor_dim) &lt;U13 416B '-0.5:Black' ... '...
  * state__factor_dim     (state__factor_dim) &lt;U2 368B 'AK' 'AL' ... 'WV' 'WY'
Data variables: (12/15)
    1|edu                 (chain, draw, edu__factor_dim) float64 80kB 0.00455...
    1|edu:age             (chain, draw, edu:age__factor_dim) float64 480kB 0....
    1|edu:age_sigma       (chain, draw) float64 16kB 0.07414 0.08386 ... 26.51
    1|edu:eth             (chain, draw, edu:eth__factor_dim) float64 320kB 0....
    1|edu:eth_sigma       (chain, draw) float64 16kB 0.1437 0.1398 ... 6.855
    1|edu_sigma           (chain, draw) float64 16kB 0.2016 0.1045 ... 5.652
    ...                    ...
    1|male:eth_sigma      (chain, draw) float64 16kB 0.3164 0.2029 ... 11.51
    1|state               (chain, draw, state__factor_dim) float64 736kB -0.1...
    1|state_sigma         (chain, draw) float64 16kB 0.2815 0.2636 ... 7.481
    Intercept             (chain, draw) float64 16kB 0.003819 0.412 ... -0.09506
    male                  (chain, draw) float64 16kB 0.1091 0.04497 ... 0.799
    repvote               (chain, draw) float64 16kB -0.4383 -1.21 ... -0.618
Attributes:
    created_at:                  2024-05-27T01:38:07.578066+00:00
    arviz_version:               0.18.0
    inference_library:           pymc
    inference_library_version:   5.15.0+23.g19be124e
    sampling_time:               4434.483409166336
    tuning_steps:                1000
    modeling_interface:          bambi
    modeling_interface_version:  0.13.1.dev39+gb7d6a6cb</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-728b9140-0bc5-489b-9f03-dd87160b435e" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-728b9140-0bc5-489b-9f03-dd87160b435e" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 2</li><li><span class="xr-has-index">draw</span>: 1000</li><li><span class="xr-has-index">edu__factor_dim</span>: 5</li><li><span class="xr-has-index">edu:age__factor_dim</span>: 30</li><li><span class="xr-has-index">edu:eth__factor_dim</span>: 20</li><li><span class="xr-has-index">eth__factor_dim</span>: 4</li><li><span class="xr-has-index">male:eth__factor_dim</span>: 8</li><li><span class="xr-has-index">state__factor_dim</span>: 46</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-03451959-a992-47fd-97ef-f18b0227cf5f" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-03451959-a992-47fd-97ef-f18b0227cf5f" class="xr-section-summary">Coordinates: <span>(8)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1</div><input id="attrs-56d54513-fb08-4dde-a757-b857862685a5" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-56d54513-fb08-4dde-a757-b857862685a5" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-79e15df1-2ed6-47bc-913a-539b6a0eca38" class="xr-var-data-in" type="checkbox"><label for="data-79e15df1-2ed6-47bc-913a-539b6a0eca38" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-d504faf2-6296-47d0-9948-51c67891f283" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-d504faf2-6296-47d0-9948-51c67891f283" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-4051a0d4-9ac5-4bd6-882c-1f2340c5ed4c" class="xr-var-data-in" type="checkbox"><label for="data-4051a0d4-9ac5-4bd6-882c-1f2340c5ed4c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 997, 998, 999])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">edu__factor_dim</span></div><div class="xr-var-dims">(edu__factor_dim)</div><div class="xr-var-dtype">&lt;U14</div><div class="xr-var-preview xr-preview">'4-Year College' ... 'Some college'</div><input id="attrs-7b44cdb2-f630-4797-8c63-e4d49e76ebdc" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-7b44cdb2-f630-4797-8c63-e4d49e76ebdc" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ed9a5cc5-7653-4d93-8d2d-1ef94c209bc4" class="xr-var-data-in" type="checkbox"><label for="data-ed9a5cc5-7653-4d93-8d2d-1ef94c209bc4" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['4-Year College', 'HS', 'No HS', 'Post-grad', 'Some college'],
      dtype='&lt;U14')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">edu:age__factor_dim</span></div><div class="xr-var-dims">(edu:age__factor_dim)</div><div class="xr-var-dtype">&lt;U20</div><div class="xr-var-preview xr-preview">'4-Year College:18-29' ... 'Some...</div><input id="attrs-234a6737-02c0-4ed6-a817-1d962cc52a16" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-234a6737-02c0-4ed6-a817-1d962cc52a16" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-09383b6b-4b2b-456d-b3a0-ff5886b2e40a" class="xr-var-data-in" type="checkbox"><label for="data-09383b6b-4b2b-456d-b3a0-ff5886b2e40a" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['4-Year College:18-29', '4-Year College:30-39', '4-Year College:40-49',
       '4-Year College:50-59', '4-Year College:60-69', '4-Year College:70+',
       'HS:18-29', 'HS:30-39', 'HS:40-49', 'HS:50-59', 'HS:60-69', 'HS:70+',
       'No HS:18-29', 'No HS:30-39', 'No HS:40-49', 'No HS:50-59',
       'No HS:60-69', 'No HS:70+', 'Post-grad:18-29', 'Post-grad:30-39',
       'Post-grad:40-49', 'Post-grad:50-59', 'Post-grad:60-69',
       'Post-grad:70+', 'Some college:18-29', 'Some college:30-39',
       'Some college:40-49', 'Some college:50-59', 'Some college:60-69',
       'Some college:70+'], dtype='&lt;U20')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">edu:eth__factor_dim</span></div><div class="xr-var-dims">(edu:eth__factor_dim)</div><div class="xr-var-dtype">&lt;U23</div><div class="xr-var-preview xr-preview">'4-Year College:Black' ... 'Some...</div><input id="attrs-65881a74-3724-4334-ab15-0366b8be112a" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-65881a74-3724-4334-ab15-0366b8be112a" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-41e33b94-1224-4fe7-90c6-5f1e5f382006" class="xr-var-data-in" type="checkbox"><label for="data-41e33b94-1224-4fe7-90c6-5f1e5f382006" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['4-Year College:Black', '4-Year College:Hispanic',
       '4-Year College:Other', '4-Year College:White', 'HS:Black',
       'HS:Hispanic', 'HS:Other', 'HS:White', 'No HS:Black', 'No HS:Hispanic',
       'No HS:Other', 'No HS:White', 'Post-grad:Black', 'Post-grad:Hispanic',
       'Post-grad:Other', 'Post-grad:White', 'Some college:Black',
       'Some college:Hispanic', 'Some college:Other', 'Some college:White'],
      dtype='&lt;U23')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">eth__factor_dim</span></div><div class="xr-var-dims">(eth__factor_dim)</div><div class="xr-var-dtype">&lt;U8</div><div class="xr-var-preview xr-preview">'Black' 'Hispanic' 'Other' 'White'</div><input id="attrs-77920614-c743-400c-9c57-d86a2d915f66" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-77920614-c743-400c-9c57-d86a2d915f66" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-73cf5ffd-4924-4f59-8f7d-fdb0632d1607" class="xr-var-data-in" type="checkbox"><label for="data-73cf5ffd-4924-4f59-8f7d-fdb0632d1607" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['Black', 'Hispanic', 'Other', 'White'], dtype='&lt;U8')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">male:eth__factor_dim</span></div><div class="xr-var-dims">(male:eth__factor_dim)</div><div class="xr-var-dtype">&lt;U13</div><div class="xr-var-preview xr-preview">'-0.5:Black' ... '0.5:White'</div><input id="attrs-cef8eb4c-0037-4460-b8e7-3bd48e8bb5e4" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-cef8eb4c-0037-4460-b8e7-3bd48e8bb5e4" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-804493b5-4218-431b-9fc0-19c49d963eda" class="xr-var-data-in" type="checkbox"><label for="data-804493b5-4218-431b-9fc0-19c49d963eda" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['-0.5:Black', '-0.5:Hispanic', '-0.5:Other', '-0.5:White', '0.5:Black',
       '0.5:Hispanic', '0.5:Other', '0.5:White'], dtype='&lt;U13')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">state__factor_dim</span></div><div class="xr-var-dims">(state__factor_dim)</div><div class="xr-var-dtype">&lt;U2</div><div class="xr-var-preview xr-preview">'AK' 'AL' 'AR' ... 'WI' 'WV' 'WY'</div><input id="attrs-e31a9348-1d4b-4053-b675-48733225d95a" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-e31a9348-1d4b-4053-b675-48733225d95a" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-00353dae-3893-4759-8b15-a33a98c5b10f" class="xr-var-data-in" type="checkbox"><label for="data-00353dae-3893-4759-8b15-a33a98c5b10f" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['AK', 'AL', 'AR', 'CA', 'CO', 'DE', 'FL', 'GA', 'HI', 'IA', 'ID', 'IL',
       'KS', 'KY', 'LA', 'MA', 'MD', 'ME', 'MI', 'MN', 'MO', 'MS', 'MT', 'NC',
       'ND', 'NE', 'NH', 'NJ', 'NM', 'NV', 'NY', 'OH', 'OK', 'OR', 'PA', 'RI',
       'SC', 'SD', 'TN', 'UT', 'VA', 'VT', 'WA', 'WI', 'WV', 'WY'], dtype='&lt;U2')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-bbcdc4ad-1232-4f15-b16c-fc092236a1a1" class="xr-section-summary-in" type="checkbox"><label for="section-bbcdc4ad-1232-4f15-b16c-fc092236a1a1" class="xr-section-summary">Data variables: <span>(15)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>1|edu</span></div><div class="xr-var-dims">(chain, draw, edu__factor_dim)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.004558 0.06039 ... -4.725 -1.079</div><input id="attrs-537785a2-d9f0-4a97-b4b5-9e4be99c4d57" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-537785a2-d9f0-4a97-b4b5-9e4be99c4d57" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-4a19bf89-91b5-489b-b3dc-712dd4cbd4a2" class="xr-var-data-in" type="checkbox"><label for="data-4a19bf89-91b5-489b-b3dc-712dd4cbd4a2" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[ 4.55771645e-03,  6.03900709e-02,  2.87685017e-01,
         -2.34188442e-01,  4.97464614e-02],
        [ 1.04804968e-01,  1.96060233e-02,  2.08737851e-01,
         -1.55112791e-01,  1.14135057e-01],
        [-1.07314150e-01, -4.41931752e-03,  2.26890287e-01,
         -1.97284638e-01, -1.66954211e-01],
        ...,
        [-3.76532248e-02,  2.38384411e-01,  2.31910554e-01,
         -2.07790635e-01,  2.44199156e-01],
        [ 4.66767104e-01,  6.07613139e-01,  4.77522093e-01,
          2.90783997e-01,  1.95491603e-01],
        [ 6.75221665e-02,  1.75325625e-01,  1.37644670e-01,
         -1.30580607e-01,  1.30030306e-01]],

       [[ 1.88979599e+00,  4.18488897e+00, -3.19056891e+00,
         -4.72481171e+00, -1.07886019e+00],
        [ 1.88978824e+00,  4.18488380e+00, -3.19056268e+00,
         -4.72482418e+00, -1.07885963e+00],
        [ 1.88978878e+00,  4.18488503e+00, -3.19056588e+00,
         -4.72482615e+00, -1.07885911e+00],
        ...,
        [ 1.88956461e+00,  4.18500881e+00, -3.19071936e+00,
         -4.72499647e+00, -1.07885962e+00],
        [ 1.88956161e+00,  4.18500896e+00, -3.19071803e+00,
         -4.72499693e+00, -1.07885890e+00],
        [ 1.88956244e+00,  4.18500937e+00, -3.19071815e+00,
         -4.72499725e+00, -1.07885886e+00]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|edu:age</span></div><div class="xr-var-dims">(chain, draw, edu:age__factor_dim)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.007877 -0.165 ... 13.07 -15.92</div><input id="attrs-c8d47037-3c6a-4bb7-b83e-9610ef4db991" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c8d47037-3c6a-4bb7-b83e-9610ef4db991" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-9bfcbeee-7366-4506-be25-d58874e26675" class="xr-var-data-in" type="checkbox"><label for="data-9bfcbeee-7366-4506-be25-d58874e26675" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[ 7.87663229e-03, -1.64973345e-01, -6.81376750e-02, ...,
         -1.65247423e-02,  1.02514301e-02, -7.69956428e-02],
        [ 7.02570973e-02, -8.94850472e-02, -5.10984850e-02, ...,
          6.91352637e-02,  3.55000882e-02, -2.90727169e-03],
        [-1.24378880e-01, -5.23951715e-02, -1.98396685e-01, ...,
         -9.06594363e-02,  1.06771362e-01,  2.23442975e-01],
        ...,
        [ 1.15663248e-02, -1.01280071e-01, -2.06450750e-01, ...,
          2.48831241e-02, -2.44452830e-02,  4.08256459e-05],
        [-9.91515751e-02, -1.95930449e-01, -4.56757510e-01, ...,
         -9.26369459e-02, -3.36684471e-03,  2.07388718e-01],
        [-1.34182204e-01, -1.80916250e-01, -1.86519935e-01, ...,
         -1.30166477e-01,  2.56530840e-02,  1.78125517e-01]],

       [[-8.83712739e-02,  1.96640862e+01, -2.08173098e+01, ...,
          2.37578832e+00,  1.30746221e+01, -1.59151738e+01],
        [-8.83697317e-02,  1.96640983e+01, -2.08173020e+01, ...,
          2.37578662e+00,  1.30746188e+01, -1.59151699e+01],
        [-8.83757280e-02,  1.96640964e+01, -2.08172983e+01, ...,
          2.37579249e+00,  1.30746232e+01, -1.59151744e+01],
        ...,
        [-8.84261517e-02,  1.96641842e+01, -2.08172704e+01, ...,
          2.37573601e+00,  1.30748084e+01, -1.59149988e+01],
        [-8.84249108e-02,  1.96641917e+01, -2.08172731e+01, ...,
          2.37573413e+00,  1.30748140e+01, -1.59150018e+01],
        [-8.84244155e-02,  1.96641908e+01, -2.08172739e+01, ...,
          2.37573407e+00,  1.30748149e+01, -1.59150012e+01]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|edu:age_sigma</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.07414 0.08386 ... 26.51 26.51</div><input id="attrs-ea2d6d0e-36e0-44a4-a52b-2fbffd1648c5" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-ea2d6d0e-36e0-44a4-a52b-2fbffd1648c5" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-5e7514ce-a202-46dc-b0e9-cd4aa7085a48" class="xr-var-data-in" type="checkbox"><label for="data-5e7514ce-a202-46dc-b0e9-cd4aa7085a48" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 0.07413541,  0.08386388,  0.11789063, ...,  0.08803112,
         0.1731265 ,  0.16920916],
       [26.51385041, 26.5138494 , 26.51384624, ..., 26.51395698,
        26.5139563 , 26.51395635]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|edu:eth</span></div><div class="xr-var-dims">(chain, draw, edu:eth__factor_dim)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.2597 0.119 0.1307 ... 3.277 5.363</div><input id="attrs-1444cf83-91ac-42d5-9ea5-1162b0f3d2f7" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1444cf83-91ac-42d5-9ea5-1162b0f3d2f7" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-3b8fcda9-5073-49d6-b926-71c263b67dec" class="xr-var-data-in" type="checkbox"><label for="data-3b8fcda9-5073-49d6-b926-71c263b67dec" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[ 2.59674801e-01,  1.18983204e-01,  1.30714790e-01, ...,
          1.83060027e-01, -2.04327819e-01,  1.56533344e-01],
        [ 6.80227918e-03, -4.21894273e-02,  5.05026673e-02, ...,
          7.16347191e-02, -1.76339330e-01,  8.42654332e-02],
        [-5.56129491e-03, -3.88892665e-01,  7.19867996e-02, ...,
          6.54053713e-02,  3.38208943e-01,  8.94428975e-02],
        ...,
        [ 2.38177641e-03, -4.97775786e-02,  7.27065881e-02, ...,
         -2.86494374e-02, -6.00148295e-02,  2.19895599e-02],
        [-1.12494052e-01, -1.87999051e-01,  3.73626876e-01, ...,
          4.38663622e-02, -2.39811682e-02,  1.74731050e-01],
        [-4.92761042e-02, -2.55046316e-02,  8.13810390e-02, ...,
         -6.03081835e-02, -1.18954792e-01,  3.02662589e-02]],

       [[-1.75761663e-01,  6.12031296e+00,  2.41721896e+00, ...,
         -5.36400956e+00,  3.27700237e+00,  5.36337634e+00],
        [-1.75761037e-01,  6.12031153e+00,  2.41722131e+00, ...,
         -5.36400822e+00,  3.27700422e+00,  5.36337940e+00],
        [-1.75763028e-01,  6.12031076e+00,  2.41721775e+00, ...,
         -5.36400926e+00,  3.27700535e+00,  5.36337816e+00],
        ...,
        [-1.75756758e-01,  6.12025557e+00,  2.41725227e+00, ...,
         -5.36398947e+00,  3.27685305e+00,  5.36334383e+00],
        [-1.75755272e-01,  6.12025860e+00,  2.41724948e+00, ...,
         -5.36398583e+00,  3.27685358e+00,  5.36334442e+00],
        [-1.75755435e-01,  6.12025857e+00,  2.41724955e+00, ...,
         -5.36398567e+00,  3.27685367e+00,  5.36334403e+00]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|edu:eth_sigma</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.1437 0.1398 ... 6.855 6.855</div><input id="attrs-9f37016f-a0b0-4aaf-8b63-96c0ebd42a96" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-9f37016f-a0b0-4aaf-8b63-96c0ebd42a96" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-4186cfb2-5be2-4373-82c5-f8aa30adb15e" class="xr-var-data-in" type="checkbox"><label for="data-4186cfb2-5be2-4373-82c5-f8aa30adb15e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.14369993, 0.13976879, 0.19214692, ..., 0.08650176, 0.18470226,
        0.14808539],
       [6.85534621, 6.85534411, 6.85534222, ..., 6.85531077, 6.85531211,
        6.85531212]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|edu_sigma</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.2016 0.1045 ... 5.652 5.652</div><input id="attrs-c5aa3e8d-c1f3-4d48-b47b-d371091138d0" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c5aa3e8d-c1f3-4d48-b47b-d371091138d0" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-63eb5e6f-2da2-48f0-8c32-7ceca42d1296" class="xr-var-data-in" type="checkbox"><label for="data-63eb5e6f-2da2-48f0-8c32-7ceca42d1296" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.20160508, 0.10452106, 0.1895577 , ..., 0.27494983, 0.39335963,
        0.22191997],
       [5.65228785, 5.65228314, 5.65228264, ..., 5.65236735, 5.65236766,
        5.65236797]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|eth</span></div><div class="xr-var-dims">(chain, draw, eth__factor_dim)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.3789 0.2341 ... -15.11 -2.496</div><input id="attrs-51f58311-53f4-4ba6-ad75-e490d8bc8008" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-51f58311-53f4-4ba6-ad75-e490d8bc8008" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-73de5263-87ae-467b-8d52-0db0ed328b48" class="xr-var-data-in" type="checkbox"><label for="data-73de5263-87ae-467b-8d52-0db0ed328b48" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[ -0.37894546,   0.23410346,   0.09535653,  -0.05337437],
        [ -0.46248635,   0.22774639,   0.16486609,   0.10409744],
        [  0.11624724,   0.31665649,  -0.07592784,   0.92452775],
        ...,
        [ -0.01740544,  -0.04641675,  -0.24474515,   0.06189799],
        [ -0.29907255,   0.16232896,  -0.35351189,   0.3212606 ],
        [ -0.21384966,   0.25909276,  -0.03745693,   0.15532218]],

       [[-11.73428715,  12.8007729 , -16.71714052,  -2.76131998],
        [-11.7364587 ,  12.80315311, -16.72023357,  -2.76189346],
        [-11.72857858,  12.79453975, -16.70901185,  -2.75994152],
        ...,
        [-10.61052194,  11.57453017, -15.11597528,  -2.49668927],
        [-10.6084539 ,  11.57226904, -15.11303652,  -2.49616627],
        [-10.6087684 ,  11.57261065, -15.11348392,  -2.49624573]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|eth_sigma</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.3035 0.3154 ... 24.44 24.44</div><input id="attrs-ff202678-153b-45e1-9351-81a5279b0eae" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-ff202678-153b-45e1-9351-81a5279b0eae" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-5d595dd7-7dad-4e1a-8b9a-0df7f5a4c8e5" class="xr-var-data-in" type="checkbox"><label for="data-5d595dd7-7dad-4e1a-8b9a-0df7f5a4c8e5" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 0.30349098,  0.31536381,  0.66191662, ...,  0.25872122,
         0.24362141,  0.18566953],
       [27.03458215, 27.03959229, 27.02143813, ..., 24.44525059,
        24.44049349, 24.44121708]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|male:eth</span></div><div class="xr-var-dims">(chain, draw, male:eth__factor_dim)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.1041 -0.3217 ... 10.31 -10.21</div><input id="attrs-1766e024-018f-48ff-845c-092510c89c1c" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1766e024-018f-48ff-845c-092510c89c1c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ffb0cec4-a1bf-41f8-9d28-4deb550c8297" class="xr-var-data-in" type="checkbox"><label for="data-ffb0cec4-a1bf-41f8-9d28-4deb550c8297" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[-1.04136533e-01, -3.21749562e-01, -5.20920723e-02, ...,
         -4.74430070e-01, -2.06914812e-01,  4.17142838e-01],
        [ 4.87213851e-02, -3.99146244e-01, -5.57754427e-02, ...,
          8.86351184e-02,  8.34389765e-02,  2.23413757e-01],
        [-1.77581640e-01,  1.53663044e-01,  3.52998492e-01, ...,
          3.69806107e-01,  2.60632874e-01, -1.67378276e-01],
        ...,
        [-1.97448450e-01, -5.82834652e-02,  4.01519386e-01, ...,
          8.73454274e-02,  3.79269550e-03,  1.43828568e-01],
        [-7.29910166e-02, -1.51034830e-01,  4.35285007e-01, ...,
          1.87246883e-01,  7.26013182e-01,  1.65336116e-01],
        [-7.26615260e-02,  2.19332890e-01,  5.32043311e-01, ...,
          2.13407077e-01,  7.20327568e-02,  4.10497947e-01]],

       [[-5.03382374e+00,  2.52827274e+00, -1.03597098e+01, ...,
          1.12245678e+01,  1.03080968e+01, -1.02146242e+01],
        [-5.03383048e+00,  2.52827673e+00, -1.03597157e+01, ...,
          1.12245623e+01,  1.03080948e+01, -1.02146221e+01],
        [-5.03381349e+00,  2.52827682e+00, -1.03597191e+01, ...,
          1.12245599e+01,  1.03080886e+01, -1.02146170e+01],
        ...,
        [-5.03348811e+00,  2.52826704e+00, -1.03596379e+01, ...,
          1.12247640e+01,  1.03079895e+01, -1.02144990e+01],
        [-5.03349461e+00,  2.52826846e+00, -1.03596471e+01, ...,
          1.12247618e+01,  1.03079879e+01, -1.02145029e+01],
        [-5.03349370e+00,  2.52826800e+00, -1.03596476e+01, ...,
          1.12247627e+01,  1.03079878e+01, -1.02145035e+01]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|male:eth_sigma</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.3164 0.2029 ... 11.51 11.51</div><input id="attrs-981e0b0a-392c-4a89-b75a-77bfd6fc8519" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-981e0b0a-392c-4a89-b75a-77bfd6fc8519" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-1c87d057-451a-4dff-8f43-b74b7f00e6e8" class="xr-var-data-in" type="checkbox"><label for="data-1c87d057-451a-4dff-8f43-b74b7f00e6e8" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 0.31643072,  0.20292678,  0.3775039 , ...,  0.32731413,
         0.43128155,  0.29520691],
       [11.51443683, 11.51443345, 11.5144312 , ..., 11.51438899,
        11.51438948, 11.51438973]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|state</span></div><div class="xr-var-dims">(chain, draw, state__factor_dim)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.1254 0.3935 ... -5.31 -7.242</div><input id="attrs-63fd6062-dde1-46a0-96ee-e046c764a3f6" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-63fd6062-dde1-46a0-96ee-e046c764a3f6" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-5dc7249b-3cf9-4bfa-91c9-6b6abefa32f1" class="xr-var-data-in" type="checkbox"><label for="data-5dc7249b-3cf9-4bfa-91c9-6b6abefa32f1" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[-0.12535992,  0.39351958,  0.00787442, ...,  0.04850749,
          0.32502321,  0.06303935],
        [-0.54750771,  0.64303697,  0.09734298, ...,  0.44011029,
          0.43199432, -0.31178526],
        [ 1.04997412, -0.04172151, -0.02027204, ..., -0.61632272,
          0.41908185,  0.38611796],
        ...,
        [ 0.2834036 ,  0.41933913,  0.21758857, ..., -0.08360549,
          0.3201398 , -0.10946301],
        [-0.15820033,  0.42355309, -0.05173437, ..., -0.31095451,
          0.53286456, -0.48484415],
        [ 0.53229096,  0.47991376,  0.0211019 , ..., -0.28837354,
          0.60434136,  0.04404235]],

       [[-3.29810525, -0.25089959, -0.84104102, ..., -3.29731801,
         -5.31027189, -7.24214324],
        [-3.29810213, -0.25089742, -0.84104286, ..., -3.29731265,
         -5.3102721 , -7.2421545 ],
        [-3.29810101, -0.25090265, -0.84104296, ..., -3.29730861,
         -5.31026884, -7.24214558],
        ...,
        [-3.29804138, -0.25100165, -0.84100728, ..., -3.29730007,
         -5.31017103, -7.24173098],
        [-3.29804237, -0.25100526, -0.84100476, ..., -3.29729448,
         -5.31016895, -7.24173966],
        [-3.29804233, -0.25100546, -0.8410048 , ..., -3.29729425,
         -5.31016843, -7.24173813]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|state_sigma</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.2815 0.2636 ... 7.481 7.481</div><input id="attrs-11a1b96a-04bb-4467-9553-5451cf63d525" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-11a1b96a-04bb-4467-9553-5451cf63d525" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-f9facaa1-1454-46d6-b637-cceb4be7ae62" class="xr-var-data-in" type="checkbox"><label for="data-f9facaa1-1454-46d6-b637-cceb4be7ae62" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.28151926, 0.263571  , 0.35556307, ..., 0.2207163 , 0.29528296,
        0.36836247],
       [7.48094778, 7.48094531, 7.48093811, ..., 7.48083017, 7.48082885,
        7.48082876]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>Intercept</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.003819 0.412 ... -0.09506</div><input id="attrs-fb88fd0c-5abf-49d4-bffe-b33f658b49c5" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-fb88fd0c-5abf-49d4-bffe-b33f658b49c5" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-aa4456a1-dac2-476b-8cf3-53b69d6c2053" class="xr-var-data-in" type="checkbox"><label for="data-aa4456a1-dac2-476b-8cf3-53b69d6c2053" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 0.00381852,  0.41199455,  0.82890062, ...,  0.49665295,
         0.27895097,  0.65369821],
       [-0.095052  , -0.0950522 , -0.09505161, ..., -0.09505587,
        -0.09505635, -0.0950563 ]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>male</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.1091 0.04497 ... 0.799 0.799</div><input id="attrs-dfa94bc8-2111-4b49-9eb2-6209a7e07b21" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-dfa94bc8-2111-4b49-9eb2-6209a7e07b21" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-4e6609c6-9acb-4c0b-b2c5-49c9c5db2a5d" class="xr-var-data-in" type="checkbox"><label for="data-4e6609c6-9acb-4c0b-b2c5-49c9c5db2a5d" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.10913237, 0.04497224, 0.22655901, ..., 0.34215586, 0.25667801,
        0.26522093],
       [0.79896986, 0.79896929, 0.79896942, ..., 0.79900084, 0.79900123,
        0.79900122]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>repvote</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.4383 -1.21 ... -0.618 -0.618</div><input id="attrs-c8edaa34-8ecc-4184-8538-0b8f29a32e99" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c8edaa34-8ecc-4184-8538-0b8f29a32e99" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-393963b5-951d-4054-a1b4-3a037007a2a7" class="xr-var-data-in" type="checkbox"><label for="data-393963b5-951d-4054-a1b4-3a037007a2a7" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[-0.43833826, -1.20961311, -2.34044572, ..., -1.49467184,
        -1.78785452, -2.27008634],
       [-0.61803434, -0.61803396, -0.61803427, ..., -0.61801553,
        -0.6180151 , -0.61801511]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-b8a63a31-6131-4b66-98d4-9f1de5208beb" class="xr-section-summary-in" type="checkbox"><label for="section-b8a63a31-6131-4b66-98d4-9f1de5208beb" class="xr-section-summary">Indexes: <span>(8)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>chain</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-aa03dfdf-88d2-433f-8465-2bb3d8179b25" class="xr-index-data-in" type="checkbox"><label for="index-aa03dfdf-88d2-433f-8465-2bb3d8179b25" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([0, 1], dtype='int64', name='chain'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>draw</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-42c2567d-b691-4333-8673-f7ea16fb6ee9" class="xr-index-data-in" type="checkbox"><label for="index-42c2567d-b691-4333-8673-f7ea16fb6ee9" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       990, 991, 992, 993, 994, 995, 996, 997, 998, 999],
      dtype='int64', name='draw', length=1000))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>edu__factor_dim</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-ccb8b11f-e48d-407a-b9c6-f48ac90a2f8d" class="xr-index-data-in" type="checkbox"><label for="index-ccb8b11f-e48d-407a-b9c6-f48ac90a2f8d" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['4-Year College', 'HS', 'No HS', 'Post-grad', 'Some college'], dtype='object', name='edu__factor_dim'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>edu:age__factor_dim</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-c6b7bc4a-1d75-403c-b874-8cdb0b937dfa" class="xr-index-data-in" type="checkbox"><label for="index-c6b7bc4a-1d75-403c-b874-8cdb0b937dfa" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['4-Year College:18-29', '4-Year College:30-39', '4-Year College:40-49',
       '4-Year College:50-59', '4-Year College:60-69', '4-Year College:70+',
       'HS:18-29', 'HS:30-39', 'HS:40-49', 'HS:50-59', 'HS:60-69', 'HS:70+',
       'No HS:18-29', 'No HS:30-39', 'No HS:40-49', 'No HS:50-59',
       'No HS:60-69', 'No HS:70+', 'Post-grad:18-29', 'Post-grad:30-39',
       'Post-grad:40-49', 'Post-grad:50-59', 'Post-grad:60-69',
       'Post-grad:70+', 'Some college:18-29', 'Some college:30-39',
       'Some college:40-49', 'Some college:50-59', 'Some college:60-69',
       'Some college:70+'],
      dtype='object', name='edu:age__factor_dim'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>edu:eth__factor_dim</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-85a82f9f-df07-45c5-bef7-7da20803a565" class="xr-index-data-in" type="checkbox"><label for="index-85a82f9f-df07-45c5-bef7-7da20803a565" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['4-Year College:Black', '4-Year College:Hispanic',
       '4-Year College:Other', '4-Year College:White', 'HS:Black',
       'HS:Hispanic', 'HS:Other', 'HS:White', 'No HS:Black', 'No HS:Hispanic',
       'No HS:Other', 'No HS:White', 'Post-grad:Black', 'Post-grad:Hispanic',
       'Post-grad:Other', 'Post-grad:White', 'Some college:Black',
       'Some college:Hispanic', 'Some college:Other', 'Some college:White'],
      dtype='object', name='edu:eth__factor_dim'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>eth__factor_dim</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-e081a15e-2a36-4752-b2cd-5eced297450c" class="xr-index-data-in" type="checkbox"><label for="index-e081a15e-2a36-4752-b2cd-5eced297450c" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['Black', 'Hispanic', 'Other', 'White'], dtype='object', name='eth__factor_dim'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>male:eth__factor_dim</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-88e4f93d-4ffb-47ef-97a0-0167ded751d7" class="xr-index-data-in" type="checkbox"><label for="index-88e4f93d-4ffb-47ef-97a0-0167ded751d7" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['-0.5:Black', '-0.5:Hispanic', '-0.5:Other', '-0.5:White', '0.5:Black',
       '0.5:Hispanic', '0.5:Other', '0.5:White'],
      dtype='object', name='male:eth__factor_dim'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>state__factor_dim</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-7c0018ea-f82f-4bcb-a5b9-4b98760db611" class="xr-index-data-in" type="checkbox"><label for="index-7c0018ea-f82f-4bcb-a5b9-4b98760db611" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['AK', 'AL', 'AR', 'CA', 'CO', 'DE', 'FL', 'GA', 'HI', 'IA', 'ID', 'IL',
       'KS', 'KY', 'LA', 'MA', 'MD', 'ME', 'MI', 'MN', 'MO', 'MS', 'MT', 'NC',
       'ND', 'NE', 'NH', 'NJ', 'NM', 'NV', 'NY', 'OH', 'OK', 'OR', 'PA', 'RI',
       'SC', 'SD', 'TN', 'UT', 'VA', 'VT', 'WA', 'WI', 'WV', 'WY'],
      dtype='object', name='state__factor_dim'))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-f5f9e831-e23d-4579-8cf7-54427d0b87af" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-f5f9e831-e23d-4579-8cf7-54427d0b87af" class="xr-section-summary">Attributes: <span>(8)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-05-27T01:38:07.578066+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.15.0+23.g19be124e</dd><dt><span>sampling_time :</span></dt><dd>4434.483409166336</dd><dt><span>tuning_steps :</span></dt><dd>1000</dd><dt><span>modeling_interface :</span></dt><dd>bambi</dd><dt><span>modeling_interface_version :</span></dt><dd>0.13.1.dev39+gb7d6a6cb</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_log_likelihood23e929a9-5e26-4cd1-b294-e01bd2f0eac5" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_log_likelihood23e929a9-5e26-4cd1-b294-e01bd2f0eac5" class="xr-section-summary">log_likelihood</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 177MB
Dimensions:         (chain: 2, draw: 1000, __obs__: 11040)
Coordinates:
  * chain           (chain) int64 16B 0 1
  * draw            (draw) int64 8kB 0 1 2 3 4 5 6 ... 994 995 996 997 998 999
  * __obs__         (__obs__) int64 88kB 0 1 2 3 4 ... 11036 11037 11038 11039
Data variables:
    p(abortion, n)  (chain, draw, __obs__) float64 177MB -3.202 -7.289 ... 0.0
Attributes:
    created_at:                  2024-05-27T01:38:10.089314+00:00
    arviz_version:               0.18.0
    inference_library:           pymc
    inference_library_version:   5.15.0+23.g19be124e
    modeling_interface:          bambi
    modeling_interface_version:  0.13.1.dev39+gb7d6a6cb</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-10b212b8-20a2-4aec-93df-7ad944f1e9c0" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-10b212b8-20a2-4aec-93df-7ad944f1e9c0" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 2</li><li><span class="xr-has-index">draw</span>: 1000</li><li><span class="xr-has-index">__obs__</span>: 11040</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-73fec8e6-70d7-4358-a191-7e9f2cb5feb7" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-73fec8e6-70d7-4358-a191-7e9f2cb5feb7" class="xr-section-summary">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1</div><input id="attrs-05c9015f-e35e-4ffa-8327-be0b08664a1e" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-05c9015f-e35e-4ffa-8327-be0b08664a1e" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-3fc2cd4b-a5ad-4f72-a3c0-83c46b21842e" class="xr-var-data-in" type="checkbox"><label for="data-3fc2cd4b-a5ad-4f72-a3c0-83c46b21842e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-c0f7bef9-2ac2-4a79-8f9b-52ae1f5ec490" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c0f7bef9-2ac2-4a79-8f9b-52ae1f5ec490" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-bd9d0fa6-7421-4eef-8555-34998e8a7d57" class="xr-var-data-in" type="checkbox"><label for="data-bd9d0fa6-7421-4eef-8555-34998e8a7d57" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 997, 998, 999])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">__obs__</span></div><div class="xr-var-dims">(__obs__)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 ... 11036 11037 11038 11039</div><input id="attrs-66045bad-e59d-4100-8a72-ef40b18ff9b4" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-66045bad-e59d-4100-8a72-ef40b18ff9b4" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-c99abc13-800d-4fea-a32a-deb87b2c54bd" class="xr-var-data-in" type="checkbox"><label for="data-c99abc13-800d-4fea-a32a-deb87b2c54bd" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([    0,     1,     2, ..., 11037, 11038, 11039])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-007d5908-4052-4df9-8b5b-d150dc7839ab" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-007d5908-4052-4df9-8b5b-d150dc7839ab" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>p(abortion, n)</span></div><div class="xr-var-dims">(chain, draw, __obs__)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-3.202 -7.289 -2.146 ... 0.0 0.0</div><input id="attrs-87488bfd-b454-46ed-9b1d-75458900f585" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-87488bfd-b454-46ed-9b1d-75458900f585" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-cac707bf-cd94-4e01-a9a4-02499df65e14" class="xr-var-data-in" type="checkbox"><label for="data-cac707bf-cd94-4e01-a9a4-02499df65e14" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[  -3.2016898 ,   -7.2892949 ,   -2.14618721, ...,
            0.        ,    0.        ,    0.        ],
        [  -2.93947105,   -5.48736441,   -2.24483748, ...,
            0.        ,    0.        ,    0.        ],
        [  -2.53197167,   -5.8367269 ,   -2.11329352, ...,
            0.        ,    0.        ,    0.        ],
        ...,
        [  -2.22760907,   -5.42928563,   -2.60002372, ...,
            0.        ,    0.        ,    0.        ],
        [  -2.39908136,   -4.70354093,   -1.85634256, ...,
            0.        ,    0.        ,    0.        ],
        [  -2.66936137,   -5.79328887,   -1.9537707 , ...,
            0.        ,    0.        ,    0.        ]],

       [[-359.03761066,  -33.08183054, -382.98461562, ...,
            0.        ,    0.        ,    0.        ],
        [-359.0479348 ,  -33.07950864, -382.99195131, ...,
            0.        ,    0.        ,    0.        ],
        [-359.01277409,  -33.08734316, -382.96652962, ...,
            0.        ,    0.        ,    0.        ],
        ...,
        [-354.26976935,  -34.14120783, -379.53928965, ...,
            0.        ,    0.        ,    0.        ],
        [-354.2604252 ,  -34.14323641, -379.53253625, ...,
            0.        ,    0.        ,    0.        ],
        [-354.26185514,  -34.14292119, -379.53356641, ...,
            0.        ,    0.        ,    0.        ]]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-e5ac5c49-8ec3-44c1-97ac-5d207a9c3c57" class="xr-section-summary-in" type="checkbox"><label for="section-e5ac5c49-8ec3-44c1-97ac-5d207a9c3c57" class="xr-section-summary">Indexes: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>chain</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-2b22fdc6-63f0-477d-ab71-c8d36c180b38" class="xr-index-data-in" type="checkbox"><label for="index-2b22fdc6-63f0-477d-ab71-c8d36c180b38" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([0, 1], dtype='int64', name='chain'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>draw</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-6fc5ca7f-77c9-4d79-b182-6ef5dac60c0a" class="xr-index-data-in" type="checkbox"><label for="index-6fc5ca7f-77c9-4d79-b182-6ef5dac60c0a" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       990, 991, 992, 993, 994, 995, 996, 997, 998, 999],
      dtype='int64', name='draw', length=1000))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>__obs__</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-b091806e-812e-404a-ada9-f207edd91cb5" class="xr-index-data-in" type="checkbox"><label for="index-b091806e-812e-404a-ada9-f207edd91cb5" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([    0,     1,     2,     3,     4,     5,     6,     7,     8,     9,
       ...
       11030, 11031, 11032, 11033, 11034, 11035, 11036, 11037, 11038, 11039],
      dtype='int64', name='__obs__', length=11040))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-23b8559c-886d-4043-8402-673b5d7ef079" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-23b8559c-886d-4043-8402-673b5d7ef079" class="xr-section-summary">Attributes: <span>(6)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-05-27T01:38:10.089314+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.15.0+23.g19be124e</dd><dt><span>modeling_interface :</span></dt><dd>bambi</dd><dt><span>modeling_interface_version :</span></dt><dd>0.13.1.dev39+gb7d6a6cb</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_sample_statsece9c0ae-874b-44a9-aab8-59ffcb0ba278" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_sample_statsece9c0ae-874b-44a9-aab8-59ffcb0ba278" class="xr-section-summary">sample_stats</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 252kB
Dimensions:                (chain: 2, draw: 1000)
Coordinates:
  * chain                  (chain) int64 16B 0 1
  * draw                   (draw) int64 8kB 0 1 2 3 4 5 ... 995 996 997 998 999
Data variables: (12/17)
    acceptance_rate        (chain, draw) float64 16kB 0.9993 0.9949 ... 0.9887
    diverging              (chain, draw) bool 2kB False False ... False False
    energy                 (chain, draw) float64 16kB 2.266e+03 ... 3.882e+04
    energy_error           (chain, draw) float64 16kB -0.001494 ... -0.001604
    index_in_trajectory    (chain, draw) int64 16kB -64 -93 -222 ... 718 640 69
    largest_eigval         (chain, draw) float64 16kB nan nan nan ... nan nan
    ...                     ...
    process_time_diff      (chain, draw) float64 16kB 0.5792 0.5719 ... 2.126
    reached_max_treedepth  (chain, draw) bool 2kB False False ... True True
    smallest_eigval        (chain, draw) float64 16kB nan nan nan ... nan nan
    step_size              (chain, draw) float64 16kB 0.01291 ... 8.867e-05
    step_size_bar          (chain, draw) float64 16kB 0.01377 ... 0.0002591
    tree_depth             (chain, draw) int64 16kB 8 8 8 8 8 ... 10 10 10 10 10
Attributes:
    created_at:                  2024-05-27T01:38:07.600018+00:00
    arviz_version:               0.18.0
    inference_library:           pymc
    inference_library_version:   5.15.0+23.g19be124e
    sampling_time:               4434.483409166336
    tuning_steps:                1000
    modeling_interface:          bambi
    modeling_interface_version:  0.13.1.dev39+gb7d6a6cb</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-ba3da615-76fd-4f2a-ab97-91f57f30e2b4" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-ba3da615-76fd-4f2a-ab97-91f57f30e2b4" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 2</li><li><span class="xr-has-index">draw</span>: 1000</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-b5da923a-3084-41be-8f4c-55a80cacf3c4" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-b5da923a-3084-41be-8f4c-55a80cacf3c4" class="xr-section-summary">Coordinates: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1</div><input id="attrs-2f5e0c1a-1cf2-4d6f-a7ef-9dbf4ba0538d" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-2f5e0c1a-1cf2-4d6f-a7ef-9dbf4ba0538d" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-7290a03c-790d-4ce4-a291-a0e88e92bee6" class="xr-var-data-in" type="checkbox"><label for="data-7290a03c-790d-4ce4-a291-a0e88e92bee6" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-b0006661-eb75-458b-a633-71a3e89d0b46" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-b0006661-eb75-458b-a633-71a3e89d0b46" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-439b86d2-6dc9-4902-8a16-4c23baa2d932" class="xr-var-data-in" type="checkbox"><label for="data-439b86d2-6dc9-4902-8a16-4c23baa2d932" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 997, 998, 999])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-3f169303-151d-4dcb-a3e8-f0e89b20b3f1" class="xr-section-summary-in" type="checkbox"><label for="section-3f169303-151d-4dcb-a3e8-f0e89b20b3f1" class="xr-section-summary">Data variables: <span>(17)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>acceptance_rate</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.9993 0.9949 ... 0.9885 0.9887</div><input id="attrs-43e02174-3db4-4e65-bdc8-d7a78a20a31d" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-43e02174-3db4-4e65-bdc8-d7a78a20a31d" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-acc1b0b0-b567-413a-992a-51be690cb2b2" class="xr-var-data-in" type="checkbox"><label for="data-acc1b0b0-b567-413a-992a-51be690cb2b2" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.9993192 , 0.99494229, 0.99111325, ..., 0.99872214, 0.99930758,
        0.99948047],
       [0.98894484, 0.99999719, 0.91972497, ..., 0.99936042, 0.98853737,
        0.98874329]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>diverging</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">bool</div><div class="xr-var-preview xr-preview">False False False ... False False</div><input id="attrs-ab6b558e-59f0-4c25-bb54-e6dfa78d3341" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-ab6b558e-59f0-4c25-bb54-e6dfa78d3341" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-e987bd22-7aa4-4ac1-91dc-d014c2faa8b5" class="xr-var-data-in" type="checkbox"><label for="data-e987bd22-7aa4-4ac1-91dc-d014c2faa8b5" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>energy</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">2.266e+03 2.272e+03 ... 3.882e+04</div><input id="attrs-455231f5-3324-44d4-868b-ec842391cfd2" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-455231f5-3324-44d4-868b-ec842391cfd2" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-99306b6b-d8f6-4a4d-89a9-fe7145b28fc4" class="xr-var-data-in" type="checkbox"><label for="data-99306b6b-d8f6-4a4d-89a9-fe7145b28fc4" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 2265.87140873,  2272.20895208,  2276.73954196, ...,
         2256.64981355,  2264.11501237,  2256.87935555],
       [38991.35617938, 38992.72863683, 38984.57536866, ...,
        38825.14471169, 38825.96207959, 38821.69258632]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>energy_error</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.001494 0.0065 ... -0.001604</div><input id="attrs-1e1220aa-2677-496e-a090-47048ed455d9" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1e1220aa-2677-496e-a090-47048ed455d9" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-5f1a0759-0ac1-47b1-915d-29ebc909341e" class="xr-var-data-in" type="checkbox"><label for="data-5f1a0759-0ac1-47b1-915d-29ebc909341e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[-0.00149364,  0.00649998, -0.00775886, ..., -0.01249199,
         0.00185149, -0.01441649],
       [-0.06339188, -0.02417857,  0.14839542, ..., -0.05656068,
         0.03487745, -0.00160358]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>index_in_trajectory</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">-64 -93 -222 -61 ... 342 718 640 69</div><input id="attrs-8c42ce98-382b-4722-91b3-b5f74f374339" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-8c42ce98-382b-4722-91b3-b5f74f374339" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-51936610-7620-4de3-a21b-d8ef911defab" class="xr-var-data-in" type="checkbox"><label for="data-51936610-7620-4de3-a21b-d8ef911defab" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ -64,  -93, -222, ..., -220,  122,  -78],
       [-650,  792,  713, ...,  718,  640,   69]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>largest_eigval</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">nan nan nan nan ... nan nan nan nan</div><input id="attrs-b5c49003-e70a-486e-8000-173ef2be6c1c" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-b5c49003-e70a-486e-8000-173ef2be6c1c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-47a90889-579c-4803-b214-afae0ae54df2" class="xr-var-data-in" type="checkbox"><label for="data-47a90889-579c-4803-b214-afae0ae54df2" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>lp</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-2.203e+03 ... -3.876e+04</div><input id="attrs-fc022f0e-d81c-480a-bd63-1571cd9b909a" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-fc022f0e-d81c-480a-bd63-1571cd9b909a" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-1f228df3-7a6c-4238-a14b-58715c43623d" class="xr-var-data-in" type="checkbox"><label for="data-1f228df3-7a6c-4238-a14b-58715c43623d" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ -2202.71774419,  -2211.92280472,  -2208.17993389, ...,
         -2199.47064093,  -2206.86567974,  -2178.0519969 ],
       [-38932.38829147, -38932.72994788, -38931.56938412, ...,
        -38764.07816292, -38763.82920971, -38763.87205917]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>max_energy_error</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.02517 -0.2357 ... 0.05655</div><input id="attrs-a16e2136-218c-4ad9-a3af-2f3859d6589e" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-a16e2136-218c-4ad9-a3af-2f3859d6589e" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-176dfbe8-cfa0-4830-b92a-c1e3da8669fa" class="xr-var-data-in" type="checkbox"><label for="data-176dfbe8-cfa0-4830-b92a-c1e3da8669fa" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[-0.02516746, -0.23567033, -0.13116677, ..., -0.03576808,
        -0.01607386, -0.05295207],
       [-0.09056458, -0.02747089,  0.24352479, ..., -0.06245752,
         0.04071116,  0.05655323]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>n_steps</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">255.0 255.0 ... 1.023e+03 1.023e+03</div><input id="attrs-691c064b-248c-4908-a254-dd654733e00b" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-691c064b-248c-4908-a254-dd654733e00b" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-542dc16d-9047-4a0b-8ecc-e122a119d52d" class="xr-var-data-in" type="checkbox"><label for="data-542dc16d-9047-4a0b-8ecc-e122a119d52d" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 255.,  255.,  255., ...,  255.,  255.,  255.],
       [1023., 1023., 1023., ..., 1023., 1023., 1023.]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>perf_counter_diff</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.5792 0.5719 ... 2.127 2.126</div><input id="attrs-1746717b-0247-4635-a31d-79a46012b2a8" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1746717b-0247-4635-a31d-79a46012b2a8" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-7bf8a6b1-7ac2-4a5b-a0e7-71cfe3d797ff" class="xr-var-data-in" type="checkbox"><label for="data-7bf8a6b1-7ac2-4a5b-a0e7-71cfe3d797ff" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.57922823, 0.57192559, 0.58707866, ..., 0.56893247, 0.55719675,
        0.56067238],
       [2.16990024, 2.14157411, 2.17329251, ..., 2.15158507, 2.12707249,
        2.12628313]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>perf_counter_start</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">1.898e+04 1.898e+04 ... 2.261e+04</div><input id="attrs-e8f88db5-267d-466b-9333-47e26a7a56d3" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-e8f88db5-267d-466b-9333-47e26a7a56d3" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ac4dbf5e-49db-489a-bf3d-869355bc286f" class="xr-var-data-in" type="checkbox"><label for="data-ac4dbf5e-49db-489a-bf3d-869355bc286f" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[18980.65525135, 18981.23486371, 18981.80714556, ...,
        19738.33340998, 19738.90274689, 19739.46030336],
       [20368.89350468, 20371.06373941, 20373.20564672, ...,
        22600.8600533 , 22603.01196506, 22605.13936151]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>process_time_diff</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.5792 0.5719 ... 2.127 2.126</div><input id="attrs-8c40751a-89e1-41f4-924c-e2aa7e5ba78f" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-8c40751a-89e1-41f4-924c-e2aa7e5ba78f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-cdfa07a7-3606-42b5-9266-ba7d91988215" class="xr-var-data-in" type="checkbox"><label for="data-cdfa07a7-3606-42b5-9266-ba7d91988215" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.57916769, 0.57193154, 0.5870583 , ..., 0.56883855, 0.55646637,
        0.5603387 ],
       [2.16949509, 2.14134836, 2.17300213, ..., 2.15118532, 2.12678611,
        2.12602471]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>reached_max_treedepth</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">bool</div><div class="xr-var-preview xr-preview">False False False ... True True</div><input id="attrs-e5934900-8148-41c4-b5d4-a31f49efd75f" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-e5934900-8148-41c4-b5d4-a31f49efd75f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-d191b7c3-c8df-4f6c-96f7-6372cee97ab8" class="xr-var-data-in" type="checkbox"><label for="data-d191b7c3-c8df-4f6c-96f7-6372cee97ab8" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[False, False, False, ..., False, False, False],
       [ True,  True,  True, ...,  True,  True,  True]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>smallest_eigval</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">nan nan nan nan ... nan nan nan nan</div><input id="attrs-2faca11f-9541-4862-814e-91e9a4423c05" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-2faca11f-9541-4862-814e-91e9a4423c05" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-58d6f958-e762-4d10-8135-056d3134cc95" class="xr-var-data-in" type="checkbox"><label for="data-58d6f958-e762-4d10-8135-056d3134cc95" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>step_size</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.01291 0.01291 ... 8.867e-05</div><input id="attrs-a4304222-7a5e-498c-b15c-09b95c242b43" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-a4304222-7a5e-498c-b15c-09b95c242b43" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-61d37472-cc0e-4397-ad77-b0c46b15f865" class="xr-var-data-in" type="checkbox"><label for="data-61d37472-cc0e-4397-ad77-b0c46b15f865" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[1.29148560e-02, 1.29148560e-02, 1.29148560e-02, ...,
        1.29148560e-02, 1.29148560e-02, 1.29148560e-02],
       [8.86689024e-05, 8.86689024e-05, 8.86689024e-05, ...,
        8.86689024e-05, 8.86689024e-05, 8.86689024e-05]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>step_size_bar</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.01377 0.01377 ... 0.0002591</div><input id="attrs-1eb297ab-0fc9-49d5-b5e4-e2b3d50cc4d7" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1eb297ab-0fc9-49d5-b5e4-e2b3d50cc4d7" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-4436590e-37a4-445b-9d9a-5a52f176d286" class="xr-var-data-in" type="checkbox"><label for="data-4436590e-37a4-445b-9d9a-5a52f176d286" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.01376505, 0.01376505, 0.01376505, ..., 0.01376505, 0.01376505,
        0.01376505],
       [0.00025905, 0.00025905, 0.00025905, ..., 0.00025905, 0.00025905,
        0.00025905]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>tree_depth</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">8 8 8 8 8 8 8 ... 10 10 10 10 10 10</div><input id="attrs-a933e3f7-e75b-4c94-9b4f-c7f0d3e54383" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-a933e3f7-e75b-4c94-9b4f-c7f0d3e54383" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-9f6fa08a-507b-4230-a88e-56405fdee937" class="xr-var-data-in" type="checkbox"><label for="data-9f6fa08a-507b-4230-a88e-56405fdee937" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 8,  8,  8, ...,  8,  8,  8],
       [10, 10, 10, ..., 10, 10, 10]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-9e26bf70-56d1-408f-8ac0-ad2108a23ba4" class="xr-section-summary-in" type="checkbox"><label for="section-9e26bf70-56d1-408f-8ac0-ad2108a23ba4" class="xr-section-summary">Indexes: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>chain</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-80455eec-15d5-4218-b6e4-b16a4cf160f9" class="xr-index-data-in" type="checkbox"><label for="index-80455eec-15d5-4218-b6e4-b16a4cf160f9" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([0, 1], dtype='int64', name='chain'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>draw</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-cf921cfe-5d11-47cd-89cb-a90bc94a2849" class="xr-index-data-in" type="checkbox"><label for="index-cf921cfe-5d11-47cd-89cb-a90bc94a2849" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       990, 991, 992, 993, 994, 995, 996, 997, 998, 999],
      dtype='int64', name='draw', length=1000))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-cbf72447-0826-460c-96d9-5d89674f9557" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-cbf72447-0826-460c-96d9-5d89674f9557" class="xr-section-summary">Attributes: <span>(8)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-05-27T01:38:07.600018+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.15.0+23.g19be124e</dd><dt><span>sampling_time :</span></dt><dd>4434.483409166336</dd><dt><span>tuning_steps :</span></dt><dd>1000</dd><dt><span>modeling_interface :</span></dt><dd>bambi</dd><dt><span>modeling_interface_version :</span></dt><dd>0.13.1.dev39+gb7d6a6cb</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_observed_data7d8f62ca-db20-43a9-ba7c-31eed830dc6a" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_observed_data7d8f62ca-db20-43a9-ba7c-31eed830dc6a" class="xr-section-summary">observed_data</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 177kB
Dimensions:         (__obs__: 11040)
Coordinates:
  * __obs__         (__obs__) int64 88kB 0 1 2 3 4 ... 11036 11037 11038 11039
Data variables:
    p(abortion, n)  (__obs__) int64 88kB 18 16 13 12 11 11 11 ... 0 0 0 0 0 0 0
Attributes:
    created_at:                  2024-05-27T01:38:07.605672+00:00
    arviz_version:               0.18.0
    inference_library:           pymc
    inference_library_version:   5.15.0+23.g19be124e
    modeling_interface:          bambi
    modeling_interface_version:  0.13.1.dev39+gb7d6a6cb</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-a7709a17-2fa8-430b-bd29-73f80571eb91" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-a7709a17-2fa8-430b-bd29-73f80571eb91" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">__obs__</span>: 11040</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-d4161e78-87bd-4b46-9cc3-ec3a3aa59128" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-d4161e78-87bd-4b46-9cc3-ec3a3aa59128" class="xr-section-summary">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">__obs__</span></div><div class="xr-var-dims">(__obs__)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 ... 11036 11037 11038 11039</div><input id="attrs-ba3aa242-a338-4845-8199-60f2319efed6" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-ba3aa242-a338-4845-8199-60f2319efed6" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ffc0acad-975a-4770-89b8-5a6df19d8d67" class="xr-var-data-in" type="checkbox"><label for="data-ffc0acad-975a-4770-89b8-5a6df19d8d67" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([    0,     1,     2, ..., 11037, 11038, 11039])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-bfcdd8c7-cce0-4c89-81f5-d0433f95f6f8" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-bfcdd8c7-cce0-4c89-81f5-d0433f95f6f8" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>p(abortion, n)</span></div><div class="xr-var-dims">(__obs__)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">18 16 13 12 11 11 ... 0 0 0 0 0 0</div><input id="attrs-00b7566b-b57f-4c7e-a66c-b155fd0d5ca0" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-00b7566b-b57f-4c7e-a66c-b155fd0d5ca0" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-80b46636-1d5f-469d-8998-6c6987c0e7e4" class="xr-var-data-in" type="checkbox"><label for="data-80b46636-1d5f-469d-8998-6c6987c0e7e4" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([18, 16, 13, ...,  0,  0,  0])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-0603f37d-885f-4e75-92a2-dd330d1b7e32" class="xr-section-summary-in" type="checkbox"><label for="section-0603f37d-885f-4e75-92a2-dd330d1b7e32" class="xr-section-summary">Indexes: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>__obs__</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-f2b0cff3-bcbb-446a-a84b-5151941a4981" class="xr-index-data-in" type="checkbox"><label for="index-f2b0cff3-bcbb-446a-a84b-5151941a4981" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([    0,     1,     2,     3,     4,     5,     6,     7,     8,     9,
       ...
       11030, 11031, 11032, 11033, 11034, 11035, 11036, 11037, 11038, 11039],
      dtype='int64', name='__obs__', length=11040))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-5957dcb4-a12e-436e-a0f2-7a7988ad5473" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-5957dcb4-a12e-436e-a0f2-7a7988ad5473" class="xr-section-summary">Attributes: <span>(6)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-05-27T01:38:07.605672+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.15.0+23.g19be124e</dd><dt><span>modeling_interface :</span></dt><dd>bambi</dd><dt><span>modeling_interface_version :</span></dt><dd>0.13.1.dev39+gb7d6a6cb</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
              </ul>
            </div>
            <style> /* CSS stylesheet for displaying InferenceData objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-sections.group-sections {
  grid-template-columns: auto;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
.xr-wrap{width:700px!important;} </style>
</div>
</div>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>az.summary(result, var_names<span class="op">=</span>[<span class="st">"Intercept"</span>, <span class="st">"male"</span>, <span class="st">"1|edu"</span>, <span class="st">"1|eth"</span>, <span class="st">"repvote"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>mean</th>
      <th>sd</th>
      <th>hdi_3%</th>
      <th>hdi_97%</th>
      <th>mcse_mean</th>
      <th>mcse_sd</th>
      <th>ess_bulk</th>
      <th>ess_tail</th>
      <th>r_hat</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Intercept</th>
      <td>0.167</td>
      <td>0.433</td>
      <td>-0.218</td>
      <td>1.107</td>
      <td>0.187</td>
      <td>0.140</td>
      <td>5.0</td>
      <td>94.0</td>
      <td>2.02</td>
    </tr>
    <tr>
      <th>male</th>
      <td>0.499</td>
      <td>0.330</td>
      <td>0.010</td>
      <td>0.799</td>
      <td>0.215</td>
      <td>0.188</td>
      <td>3.0</td>
      <td>20.0</td>
      <td>2.19</td>
    </tr>
    <tr>
      <th>1|edu[4-Year College]</th>
      <td>0.921</td>
      <td>0.978</td>
      <td>-0.256</td>
      <td>1.890</td>
      <td>0.684</td>
      <td>0.582</td>
      <td>3.0</td>
      <td>11.0</td>
      <td>2.09</td>
    </tr>
    <tr>
      <th>1|edu[HS]</th>
      <td>2.123</td>
      <td>2.067</td>
      <td>-0.105</td>
      <td>4.185</td>
      <td>1.453</td>
      <td>1.231</td>
      <td>3.0</td>
      <td>14.0</td>
      <td>2.17</td>
    </tr>
    <tr>
      <th>1|edu[No HS]</th>
      <td>-1.513</td>
      <td>1.686</td>
      <td>-3.191</td>
      <td>0.423</td>
      <td>1.183</td>
      <td>1.004</td>
      <td>3.0</td>
      <td>11.0</td>
      <td>2.11</td>
    </tr>
    <tr>
      <th>1|edu[Post-grad]</th>
      <td>-2.459</td>
      <td>2.273</td>
      <td>-4.725</td>
      <td>0.020</td>
      <td>1.597</td>
      <td>1.354</td>
      <td>3.0</td>
      <td>13.0</td>
      <td>2.05</td>
    </tr>
    <tr>
      <th>1|edu[Some college]</th>
      <td>-0.528</td>
      <td>0.566</td>
      <td>-1.079</td>
      <td>0.207</td>
      <td>0.390</td>
      <td>0.335</td>
      <td>3.0</td>
      <td>50.0</td>
      <td>1.97</td>
    </tr>
    <tr>
      <th>1|eth[Black]</th>
      <td>-5.782</td>
      <td>5.378</td>
      <td>-11.687</td>
      <td>0.006</td>
      <td>3.783</td>
      <td>3.201</td>
      <td>3.0</td>
      <td>11.0</td>
      <td>2.23</td>
    </tr>
    <tr>
      <th>1|eth[Hispanic]</th>
      <td>6.118</td>
      <td>6.054</td>
      <td>-0.285</td>
      <td>12.765</td>
      <td>4.260</td>
      <td>3.603</td>
      <td>3.0</td>
      <td>11.0</td>
      <td>2.23</td>
    </tr>
    <tr>
      <th>1|eth[Other]</th>
      <td>-7.896</td>
      <td>7.996</td>
      <td>-16.677</td>
      <td>0.473</td>
      <td>5.628</td>
      <td>4.760</td>
      <td>3.0</td>
      <td>11.0</td>
      <td>2.23</td>
    </tr>
    <tr>
      <th>1|eth[White]</th>
      <td>-1.228</td>
      <td>1.422</td>
      <td>-2.758</td>
      <td>0.510</td>
      <td>0.986</td>
      <td>0.843</td>
      <td>3.0</td>
      <td>11.0</td>
      <td>2.23</td>
    </tr>
    <tr>
      <th>repvote</th>
      <td>-0.928</td>
      <td>0.474</td>
      <td>-1.949</td>
      <td>-0.429</td>
      <td>0.228</td>
      <td>0.174</td>
      <td>5.0</td>
      <td>113.0</td>
      <td>2.23</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>The terms in the model formula allow for specific intercept terms across the demographic splits of <code>eth</code>, <code>edu</code>, and <code>state</code>. These represent stratum specific adjustments of the intercept term in the model. Similarly we invoke intercepts for the interaction terms of <code>age:edu</code>, <code>male:eth</code> and <code>edu:eth</code>. Each of these cohorts represents a share of the data in our sample.</p>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>model_hierarchical.graph()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<p><img src="mister_p_files/figure-html/cell-30-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p>We then predict the outcomes implied by the biased sample. These predictions are to be adjusted by what we take to be the share of that demographic cohort in population. We can plot the posterior predictive distribution against the observed data from our biased sample to see that we have generally good fit to the distribution.</p>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>model_hierarchical.predict(result, kind<span class="op">=</span><span class="st">"response"</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> az.plot_ppc(result, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>), kind<span class="op">=</span><span class="st">"cumulative"</span>, observed_rug<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Posterior Predictive Checks </span><span class="ch">\n</span><span class="st"> On Biased Sample"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="mister_p_files/figure-html/cell-31-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="apply-the-post-stratification-weighting" class="level3">
<h3 class="anchored" data-anchor-id="apply-the-post-stratification-weighting">Apply the Post-stratification Weighting</h3>
<p>We now use the fitted model to predict the voting shares on the data where we use the genuine state numbers per strata. To do so we load data from the national census and augment our data set so as to be able to apply the appropriate weights.</p>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>poststrat_df <span class="op">=</span> pd.read_csv(<span class="st">"data/mr_p_poststrat_df.csv"</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>new_data <span class="op">=</span> poststrat_df.merge(</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    statelevel_predictors_df, left_on<span class="op">=</span><span class="st">"state"</span>, right_on<span class="op">=</span><span class="st">"state"</span>, how<span class="op">=</span><span class="st">"left"</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>new_data.rename({<span class="st">"educ"</span>: <span class="st">"edu"</span>}, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>new_data <span class="op">=</span> model_df.merge(</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>    new_data,</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>    how<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>    left_on<span class="op">=</span>[<span class="st">"state"</span>, <span class="st">"eth"</span>, <span class="st">"male"</span>, <span class="st">"age"</span>, <span class="st">"edu"</span>],</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>    right_on<span class="op">=</span>[<span class="st">"state"</span>, <span class="st">"eth"</span>, <span class="st">"male"</span>, <span class="st">"age"</span>, <span class="st">"edu"</span>],</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>).rename({<span class="st">"n_y"</span>: <span class="st">"n"</span>, <span class="st">"repvote_y"</span>: <span class="st">"repvote"</span>}, axis<span class="op">=</span><span class="dv">1</span>)[</span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"state"</span>, <span class="st">"eth"</span>, <span class="st">"male"</span>, <span class="st">"age"</span>, <span class="st">"edu"</span>, <span class="st">"n"</span>, <span class="st">"repvote"</span>]</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>new_data <span class="op">=</span> new_data.merge(</span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>    new_data.groupby(<span class="st">"state"</span>).agg({<span class="st">"n"</span>: <span class="st">"sum"</span>}).reset_index().rename({<span class="st">"n"</span>: <span class="st">"state_total"</span>}, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a>new_data[<span class="st">"state_percent"</span>] <span class="op">=</span> new_data[<span class="st">"n"</span>] <span class="op">/</span> new_data[<span class="st">"state_total"</span>]</span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>new_data.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>state</th>
      <th>eth</th>
      <th>male</th>
      <th>age</th>
      <th>edu</th>
      <th>n</th>
      <th>repvote</th>
      <th>state_total</th>
      <th>state_percent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ID</td>
      <td>White</td>
      <td>-0.5</td>
      <td>70+</td>
      <td>HS</td>
      <td>31503</td>
      <td>0.683102</td>
      <td>1193885</td>
      <td>0.026387</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ID</td>
      <td>White</td>
      <td>0.5</td>
      <td>70+</td>
      <td>4-Year College</td>
      <td>11809</td>
      <td>0.683102</td>
      <td>1193885</td>
      <td>0.009891</td>
    </tr>
    <tr>
      <th>2</th>
      <td>WV</td>
      <td>White</td>
      <td>0.5</td>
      <td>70+</td>
      <td>Some college</td>
      <td>17089</td>
      <td>0.721611</td>
      <td>1441882</td>
      <td>0.011852</td>
    </tr>
    <tr>
      <th>3</th>
      <td>WV</td>
      <td>White</td>
      <td>0.5</td>
      <td>70+</td>
      <td>4-Year College</td>
      <td>7396</td>
      <td>0.721611</td>
      <td>1441882</td>
      <td>0.005129</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ID</td>
      <td>White</td>
      <td>0.5</td>
      <td>70+</td>
      <td>Post-grad</td>
      <td>9873</td>
      <td>0.683102</td>
      <td>1193885</td>
      <td>0.008270</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>This dataset is exactly the same structure and length as our input data to the fitted model. We have simply switched the observed counts across the demographic strata with the counts that reflect their proportion in the national survey. Additionally we have calculated the state totals and the share of each strata within the state. This will be important for later when we use this <code>state_percent</code> variable to calculate an adjusted MrP estimate of the predictions at a state level. We now use this data set with our fitted model to generate posterior predictive distribution.</p>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>result_adjust <span class="op">=</span> model_hierarchical.predict(result, data<span class="op">=</span>new_data, inplace<span class="op">=</span><span class="va">False</span>, kind<span class="op">=</span><span class="st">"response"</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>result_adjust</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">


            <div>
              <div class="xr-header">
                <div class="xr-obj-type">arviz.InferenceData</div>
              </div>
              <ul class="xr-sections group-sections">
              
            <li class="xr-section-item">
                  <input id="idata_posterior5f53a15f-4788-4dc1-93aa-9a3a98411347" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_posterior5f53a15f-4788-4dc1-93aa-9a3a98411347" class="xr-section-summary">posterior</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 179MB
Dimensions:               (chain: 2, draw: 1000, edu__factor_dim: 5,
                           edu:age__factor_dim: 30, edu:eth__factor_dim: 20,
                           eth__factor_dim: 4, male:eth__factor_dim: 8,
                           state__factor_dim: 46, __obs__: 11040)
Coordinates:
  * chain                 (chain) int64 16B 0 1
  * draw                  (draw) int64 8kB 0 1 2 3 4 5 ... 995 996 997 998 999
  * edu__factor_dim       (edu__factor_dim) &lt;U14 280B '4-Year College' ... 'S...
  * edu:age__factor_dim   (edu:age__factor_dim) &lt;U20 2kB '4-Year College:18-2...
  * edu:eth__factor_dim   (edu:eth__factor_dim) &lt;U23 2kB '4-Year College:Blac...
  * eth__factor_dim       (eth__factor_dim) &lt;U8 128B 'Black' ... 'White'
  * male:eth__factor_dim  (male:eth__factor_dim) &lt;U13 416B '-0.5:Black' ... '...
  * state__factor_dim     (state__factor_dim) &lt;U2 368B 'AK' 'AL' ... 'WV' 'WY'
  * __obs__               (__obs__) int64 88kB 0 1 2 3 ... 11037 11038 11039
Data variables: (12/16)
    1|edu                 (chain, draw, edu__factor_dim) float64 80kB 0.00455...
    1|edu:age             (chain, draw, edu:age__factor_dim) float64 480kB 0....
    1|edu:age_sigma       (chain, draw) float64 16kB 0.07414 0.08386 ... 26.51
    1|edu:eth             (chain, draw, edu:eth__factor_dim) float64 320kB 0....
    1|edu:eth_sigma       (chain, draw) float64 16kB 0.1437 0.1398 ... 6.855
    1|edu_sigma           (chain, draw) float64 16kB 0.2016 0.1045 ... 5.652
    ...                    ...
    1|state               (chain, draw, state__factor_dim) float64 736kB -0.1...
    1|state_sigma         (chain, draw) float64 16kB 0.2815 0.2636 ... 7.481
    Intercept             (chain, draw) float64 16kB 0.003819 0.412 ... -0.09506
    male                  (chain, draw) float64 16kB 0.1091 0.04497 ... 0.799
    repvote               (chain, draw) float64 16kB -0.4383 -1.21 ... -0.618
    p                     (chain, draw, __obs__) float64 177MB 0.4237 ... 0.0...
Attributes:
    created_at:                  2024-05-27T01:38:07.578066+00:00
    arviz_version:               0.18.0
    inference_library:           pymc
    inference_library_version:   5.15.0+23.g19be124e
    sampling_time:               4434.483409166336
    tuning_steps:                1000
    modeling_interface:          bambi
    modeling_interface_version:  0.13.1.dev39+gb7d6a6cb</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-6fe807a9-ef41-4065-af88-3ae8493d44d6" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-6fe807a9-ef41-4065-af88-3ae8493d44d6" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 2</li><li><span class="xr-has-index">draw</span>: 1000</li><li><span class="xr-has-index">edu__factor_dim</span>: 5</li><li><span class="xr-has-index">edu:age__factor_dim</span>: 30</li><li><span class="xr-has-index">edu:eth__factor_dim</span>: 20</li><li><span class="xr-has-index">eth__factor_dim</span>: 4</li><li><span class="xr-has-index">male:eth__factor_dim</span>: 8</li><li><span class="xr-has-index">state__factor_dim</span>: 46</li><li><span class="xr-has-index">__obs__</span>: 11040</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-0acfe740-a178-432a-9733-f5c30ae68f60" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-0acfe740-a178-432a-9733-f5c30ae68f60" class="xr-section-summary">Coordinates: <span>(9)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1</div><input id="attrs-56b392c3-7ff3-46d5-b806-dc29f64ee0f5" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-56b392c3-7ff3-46d5-b806-dc29f64ee0f5" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-63644e4c-8269-473b-b593-67f42418ee87" class="xr-var-data-in" type="checkbox"><label for="data-63644e4c-8269-473b-b593-67f42418ee87" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-0cd58e3e-25f1-44c4-adf3-3531d8176f10" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-0cd58e3e-25f1-44c4-adf3-3531d8176f10" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-aa22685c-4cfa-46d7-9306-a3bf35b62555" class="xr-var-data-in" type="checkbox"><label for="data-aa22685c-4cfa-46d7-9306-a3bf35b62555" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 997, 998, 999])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">edu__factor_dim</span></div><div class="xr-var-dims">(edu__factor_dim)</div><div class="xr-var-dtype">&lt;U14</div><div class="xr-var-preview xr-preview">'4-Year College' ... 'Some college'</div><input id="attrs-f628c6e9-9112-4ebb-bac6-9ec0bc732a55" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-f628c6e9-9112-4ebb-bac6-9ec0bc732a55" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-5b0bc10c-d700-4aec-a833-d5acd8617528" class="xr-var-data-in" type="checkbox"><label for="data-5b0bc10c-d700-4aec-a833-d5acd8617528" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['4-Year College', 'HS', 'No HS', 'Post-grad', 'Some college'],
      dtype='&lt;U14')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">edu:age__factor_dim</span></div><div class="xr-var-dims">(edu:age__factor_dim)</div><div class="xr-var-dtype">&lt;U20</div><div class="xr-var-preview xr-preview">'4-Year College:18-29' ... 'Some...</div><input id="attrs-c3e0a2f9-16a4-4153-b985-479ddb8430ea" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c3e0a2f9-16a4-4153-b985-479ddb8430ea" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-b581e735-0bc8-4c4b-ba2e-1e0f2cdd19a5" class="xr-var-data-in" type="checkbox"><label for="data-b581e735-0bc8-4c4b-ba2e-1e0f2cdd19a5" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['4-Year College:18-29', '4-Year College:30-39', '4-Year College:40-49',
       '4-Year College:50-59', '4-Year College:60-69', '4-Year College:70+',
       'HS:18-29', 'HS:30-39', 'HS:40-49', 'HS:50-59', 'HS:60-69', 'HS:70+',
       'No HS:18-29', 'No HS:30-39', 'No HS:40-49', 'No HS:50-59',
       'No HS:60-69', 'No HS:70+', 'Post-grad:18-29', 'Post-grad:30-39',
       'Post-grad:40-49', 'Post-grad:50-59', 'Post-grad:60-69',
       'Post-grad:70+', 'Some college:18-29', 'Some college:30-39',
       'Some college:40-49', 'Some college:50-59', 'Some college:60-69',
       'Some college:70+'], dtype='&lt;U20')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">edu:eth__factor_dim</span></div><div class="xr-var-dims">(edu:eth__factor_dim)</div><div class="xr-var-dtype">&lt;U23</div><div class="xr-var-preview xr-preview">'4-Year College:Black' ... 'Some...</div><input id="attrs-13691263-b0b1-4f97-8415-6a3b43669a57" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-13691263-b0b1-4f97-8415-6a3b43669a57" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-2e348284-53b2-42c1-8e03-c186af7b812f" class="xr-var-data-in" type="checkbox"><label for="data-2e348284-53b2-42c1-8e03-c186af7b812f" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['4-Year College:Black', '4-Year College:Hispanic',
       '4-Year College:Other', '4-Year College:White', 'HS:Black',
       'HS:Hispanic', 'HS:Other', 'HS:White', 'No HS:Black', 'No HS:Hispanic',
       'No HS:Other', 'No HS:White', 'Post-grad:Black', 'Post-grad:Hispanic',
       'Post-grad:Other', 'Post-grad:White', 'Some college:Black',
       'Some college:Hispanic', 'Some college:Other', 'Some college:White'],
      dtype='&lt;U23')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">eth__factor_dim</span></div><div class="xr-var-dims">(eth__factor_dim)</div><div class="xr-var-dtype">&lt;U8</div><div class="xr-var-preview xr-preview">'Black' 'Hispanic' 'Other' 'White'</div><input id="attrs-b466cae1-e70f-49da-99e9-b3c2d0ace508" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-b466cae1-e70f-49da-99e9-b3c2d0ace508" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-90058976-e06b-43be-baf5-347185154513" class="xr-var-data-in" type="checkbox"><label for="data-90058976-e06b-43be-baf5-347185154513" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['Black', 'Hispanic', 'Other', 'White'], dtype='&lt;U8')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">male:eth__factor_dim</span></div><div class="xr-var-dims">(male:eth__factor_dim)</div><div class="xr-var-dtype">&lt;U13</div><div class="xr-var-preview xr-preview">'-0.5:Black' ... '0.5:White'</div><input id="attrs-65796087-3c13-41d7-b651-851cc7fc9590" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-65796087-3c13-41d7-b651-851cc7fc9590" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-8b2c8b44-e50d-40a5-9590-b60e24fb5cf2" class="xr-var-data-in" type="checkbox"><label for="data-8b2c8b44-e50d-40a5-9590-b60e24fb5cf2" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['-0.5:Black', '-0.5:Hispanic', '-0.5:Other', '-0.5:White', '0.5:Black',
       '0.5:Hispanic', '0.5:Other', '0.5:White'], dtype='&lt;U13')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">state__factor_dim</span></div><div class="xr-var-dims">(state__factor_dim)</div><div class="xr-var-dtype">&lt;U2</div><div class="xr-var-preview xr-preview">'AK' 'AL' 'AR' ... 'WI' 'WV' 'WY'</div><input id="attrs-6b2a770a-7542-4797-848f-1a6d8b81b1ee" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-6b2a770a-7542-4797-848f-1a6d8b81b1ee" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-6bb7c2af-48bb-44a6-90b1-2fddc0fc8fd9" class="xr-var-data-in" type="checkbox"><label for="data-6bb7c2af-48bb-44a6-90b1-2fddc0fc8fd9" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['AK', 'AL', 'AR', 'CA', 'CO', 'DE', 'FL', 'GA', 'HI', 'IA', 'ID', 'IL',
       'KS', 'KY', 'LA', 'MA', 'MD', 'ME', 'MI', 'MN', 'MO', 'MS', 'MT', 'NC',
       'ND', 'NE', 'NH', 'NJ', 'NM', 'NV', 'NY', 'OH', 'OK', 'OR', 'PA', 'RI',
       'SC', 'SD', 'TN', 'UT', 'VA', 'VT', 'WA', 'WI', 'WV', 'WY'], dtype='&lt;U2')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">__obs__</span></div><div class="xr-var-dims">(__obs__)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 ... 11036 11037 11038 11039</div><input id="attrs-64e4c140-febf-4ff4-8307-517205460199" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-64e4c140-febf-4ff4-8307-517205460199" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-18cb1c17-07ab-4a09-b6f0-23ea65299756" class="xr-var-data-in" type="checkbox"><label for="data-18cb1c17-07ab-4a09-b6f0-23ea65299756" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([    0,     1,     2, ..., 11037, 11038, 11039])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-09a41066-db94-433d-be1c-f31091c84c97" class="xr-section-summary-in" type="checkbox"><label for="section-09a41066-db94-433d-be1c-f31091c84c97" class="xr-section-summary">Data variables: <span>(16)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>1|edu</span></div><div class="xr-var-dims">(chain, draw, edu__factor_dim)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.004558 0.06039 ... -4.725 -1.079</div><input id="attrs-854da244-58b5-4862-b8b2-0381f870627f" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-854da244-58b5-4862-b8b2-0381f870627f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-9cf84701-2fca-47ce-b219-4fed25725de3" class="xr-var-data-in" type="checkbox"><label for="data-9cf84701-2fca-47ce-b219-4fed25725de3" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[ 4.55771645e-03,  6.03900709e-02,  2.87685017e-01,
         -2.34188442e-01,  4.97464614e-02],
        [ 1.04804968e-01,  1.96060233e-02,  2.08737851e-01,
         -1.55112791e-01,  1.14135057e-01],
        [-1.07314150e-01, -4.41931752e-03,  2.26890287e-01,
         -1.97284638e-01, -1.66954211e-01],
        ...,
        [-3.76532248e-02,  2.38384411e-01,  2.31910554e-01,
         -2.07790635e-01,  2.44199156e-01],
        [ 4.66767104e-01,  6.07613139e-01,  4.77522093e-01,
          2.90783997e-01,  1.95491603e-01],
        [ 6.75221665e-02,  1.75325625e-01,  1.37644670e-01,
         -1.30580607e-01,  1.30030306e-01]],

       [[ 1.88979599e+00,  4.18488897e+00, -3.19056891e+00,
         -4.72481171e+00, -1.07886019e+00],
        [ 1.88978824e+00,  4.18488380e+00, -3.19056268e+00,
         -4.72482418e+00, -1.07885963e+00],
        [ 1.88978878e+00,  4.18488503e+00, -3.19056588e+00,
         -4.72482615e+00, -1.07885911e+00],
        ...,
        [ 1.88956461e+00,  4.18500881e+00, -3.19071936e+00,
         -4.72499647e+00, -1.07885962e+00],
        [ 1.88956161e+00,  4.18500896e+00, -3.19071803e+00,
         -4.72499693e+00, -1.07885890e+00],
        [ 1.88956244e+00,  4.18500937e+00, -3.19071815e+00,
         -4.72499725e+00, -1.07885886e+00]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|edu:age</span></div><div class="xr-var-dims">(chain, draw, edu:age__factor_dim)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.007877 -0.165 ... 13.07 -15.92</div><input id="attrs-4683a196-ef7e-4d95-b084-01d06d495adc" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-4683a196-ef7e-4d95-b084-01d06d495adc" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-dfb2db61-d803-45a9-bd2b-9dbba4628f88" class="xr-var-data-in" type="checkbox"><label for="data-dfb2db61-d803-45a9-bd2b-9dbba4628f88" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[ 7.87663229e-03, -1.64973345e-01, -6.81376750e-02, ...,
         -1.65247423e-02,  1.02514301e-02, -7.69956428e-02],
        [ 7.02570973e-02, -8.94850472e-02, -5.10984850e-02, ...,
          6.91352637e-02,  3.55000882e-02, -2.90727169e-03],
        [-1.24378880e-01, -5.23951715e-02, -1.98396685e-01, ...,
         -9.06594363e-02,  1.06771362e-01,  2.23442975e-01],
        ...,
        [ 1.15663248e-02, -1.01280071e-01, -2.06450750e-01, ...,
          2.48831241e-02, -2.44452830e-02,  4.08256459e-05],
        [-9.91515751e-02, -1.95930449e-01, -4.56757510e-01, ...,
         -9.26369459e-02, -3.36684471e-03,  2.07388718e-01],
        [-1.34182204e-01, -1.80916250e-01, -1.86519935e-01, ...,
         -1.30166477e-01,  2.56530840e-02,  1.78125517e-01]],

       [[-8.83712739e-02,  1.96640862e+01, -2.08173098e+01, ...,
          2.37578832e+00,  1.30746221e+01, -1.59151738e+01],
        [-8.83697317e-02,  1.96640983e+01, -2.08173020e+01, ...,
          2.37578662e+00,  1.30746188e+01, -1.59151699e+01],
        [-8.83757280e-02,  1.96640964e+01, -2.08172983e+01, ...,
          2.37579249e+00,  1.30746232e+01, -1.59151744e+01],
        ...,
        [-8.84261517e-02,  1.96641842e+01, -2.08172704e+01, ...,
          2.37573601e+00,  1.30748084e+01, -1.59149988e+01],
        [-8.84249108e-02,  1.96641917e+01, -2.08172731e+01, ...,
          2.37573413e+00,  1.30748140e+01, -1.59150018e+01],
        [-8.84244155e-02,  1.96641908e+01, -2.08172739e+01, ...,
          2.37573407e+00,  1.30748149e+01, -1.59150012e+01]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|edu:age_sigma</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.07414 0.08386 ... 26.51 26.51</div><input id="attrs-9e397f10-577b-4e19-aa78-8f9b25d06eb3" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-9e397f10-577b-4e19-aa78-8f9b25d06eb3" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-7aeaf48a-7d35-46f8-8832-742b30984297" class="xr-var-data-in" type="checkbox"><label for="data-7aeaf48a-7d35-46f8-8832-742b30984297" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 0.07413541,  0.08386388,  0.11789063, ...,  0.08803112,
         0.1731265 ,  0.16920916],
       [26.51385041, 26.5138494 , 26.51384624, ..., 26.51395698,
        26.5139563 , 26.51395635]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|edu:eth</span></div><div class="xr-var-dims">(chain, draw, edu:eth__factor_dim)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.2597 0.119 0.1307 ... 3.277 5.363</div><input id="attrs-bdfbcf7b-dcf4-4b63-b604-e6b45d8226db" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-bdfbcf7b-dcf4-4b63-b604-e6b45d8226db" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ca68259b-54df-4209-b2fb-f6d003cf469a" class="xr-var-data-in" type="checkbox"><label for="data-ca68259b-54df-4209-b2fb-f6d003cf469a" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[ 2.59674801e-01,  1.18983204e-01,  1.30714790e-01, ...,
          1.83060027e-01, -2.04327819e-01,  1.56533344e-01],
        [ 6.80227918e-03, -4.21894273e-02,  5.05026673e-02, ...,
          7.16347191e-02, -1.76339330e-01,  8.42654332e-02],
        [-5.56129491e-03, -3.88892665e-01,  7.19867996e-02, ...,
          6.54053713e-02,  3.38208943e-01,  8.94428975e-02],
        ...,
        [ 2.38177641e-03, -4.97775786e-02,  7.27065881e-02, ...,
         -2.86494374e-02, -6.00148295e-02,  2.19895599e-02],
        [-1.12494052e-01, -1.87999051e-01,  3.73626876e-01, ...,
          4.38663622e-02, -2.39811682e-02,  1.74731050e-01],
        [-4.92761042e-02, -2.55046316e-02,  8.13810390e-02, ...,
         -6.03081835e-02, -1.18954792e-01,  3.02662589e-02]],

       [[-1.75761663e-01,  6.12031296e+00,  2.41721896e+00, ...,
         -5.36400956e+00,  3.27700237e+00,  5.36337634e+00],
        [-1.75761037e-01,  6.12031153e+00,  2.41722131e+00, ...,
         -5.36400822e+00,  3.27700422e+00,  5.36337940e+00],
        [-1.75763028e-01,  6.12031076e+00,  2.41721775e+00, ...,
         -5.36400926e+00,  3.27700535e+00,  5.36337816e+00],
        ...,
        [-1.75756758e-01,  6.12025557e+00,  2.41725227e+00, ...,
         -5.36398947e+00,  3.27685305e+00,  5.36334383e+00],
        [-1.75755272e-01,  6.12025860e+00,  2.41724948e+00, ...,
         -5.36398583e+00,  3.27685358e+00,  5.36334442e+00],
        [-1.75755435e-01,  6.12025857e+00,  2.41724955e+00, ...,
         -5.36398567e+00,  3.27685367e+00,  5.36334403e+00]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|edu:eth_sigma</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.1437 0.1398 ... 6.855 6.855</div><input id="attrs-138012fe-3a41-4b3a-bc35-c21a986acc02" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-138012fe-3a41-4b3a-bc35-c21a986acc02" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-9f60984f-1083-4b5e-9a30-4cca237a71df" class="xr-var-data-in" type="checkbox"><label for="data-9f60984f-1083-4b5e-9a30-4cca237a71df" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.14369993, 0.13976879, 0.19214692, ..., 0.08650176, 0.18470226,
        0.14808539],
       [6.85534621, 6.85534411, 6.85534222, ..., 6.85531077, 6.85531211,
        6.85531212]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|edu_sigma</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.2016 0.1045 ... 5.652 5.652</div><input id="attrs-3b7dd614-15ac-4529-889e-e937ab22bcb8" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-3b7dd614-15ac-4529-889e-e937ab22bcb8" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-21f27b8c-5d93-41fa-a616-8506bb77c9d4" class="xr-var-data-in" type="checkbox"><label for="data-21f27b8c-5d93-41fa-a616-8506bb77c9d4" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.20160508, 0.10452106, 0.1895577 , ..., 0.27494983, 0.39335963,
        0.22191997],
       [5.65228785, 5.65228314, 5.65228264, ..., 5.65236735, 5.65236766,
        5.65236797]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|eth</span></div><div class="xr-var-dims">(chain, draw, eth__factor_dim)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.3789 0.2341 ... -15.11 -2.496</div><input id="attrs-6f98b272-1a4f-4a21-bcf9-8035994e4b73" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-6f98b272-1a4f-4a21-bcf9-8035994e4b73" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-fb958e84-c604-410b-9006-3c958b33bf44" class="xr-var-data-in" type="checkbox"><label for="data-fb958e84-c604-410b-9006-3c958b33bf44" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[ -0.37894546,   0.23410346,   0.09535653,  -0.05337437],
        [ -0.46248635,   0.22774639,   0.16486609,   0.10409744],
        [  0.11624724,   0.31665649,  -0.07592784,   0.92452775],
        ...,
        [ -0.01740544,  -0.04641675,  -0.24474515,   0.06189799],
        [ -0.29907255,   0.16232896,  -0.35351189,   0.3212606 ],
        [ -0.21384966,   0.25909276,  -0.03745693,   0.15532218]],

       [[-11.73428715,  12.8007729 , -16.71714052,  -2.76131998],
        [-11.7364587 ,  12.80315311, -16.72023357,  -2.76189346],
        [-11.72857858,  12.79453975, -16.70901185,  -2.75994152],
        ...,
        [-10.61052194,  11.57453017, -15.11597528,  -2.49668927],
        [-10.6084539 ,  11.57226904, -15.11303652,  -2.49616627],
        [-10.6087684 ,  11.57261065, -15.11348392,  -2.49624573]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|eth_sigma</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.3035 0.3154 ... 24.44 24.44</div><input id="attrs-dfad87f6-6c90-47ca-8848-1f0227fd9401" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-dfad87f6-6c90-47ca-8848-1f0227fd9401" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-5b1c7a53-cf5e-43c9-9ffe-ebd958307e27" class="xr-var-data-in" type="checkbox"><label for="data-5b1c7a53-cf5e-43c9-9ffe-ebd958307e27" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 0.30349098,  0.31536381,  0.66191662, ...,  0.25872122,
         0.24362141,  0.18566953],
       [27.03458215, 27.03959229, 27.02143813, ..., 24.44525059,
        24.44049349, 24.44121708]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|male:eth</span></div><div class="xr-var-dims">(chain, draw, male:eth__factor_dim)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.1041 -0.3217 ... 10.31 -10.21</div><input id="attrs-05f545ac-2361-4946-bfb0-75c9bbcfde14" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-05f545ac-2361-4946-bfb0-75c9bbcfde14" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-3fd029f1-6284-41de-bc62-dba2bdbb9d64" class="xr-var-data-in" type="checkbox"><label for="data-3fd029f1-6284-41de-bc62-dba2bdbb9d64" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[-1.04136533e-01, -3.21749562e-01, -5.20920723e-02, ...,
         -4.74430070e-01, -2.06914812e-01,  4.17142838e-01],
        [ 4.87213851e-02, -3.99146244e-01, -5.57754427e-02, ...,
          8.86351184e-02,  8.34389765e-02,  2.23413757e-01],
        [-1.77581640e-01,  1.53663044e-01,  3.52998492e-01, ...,
          3.69806107e-01,  2.60632874e-01, -1.67378276e-01],
        ...,
        [-1.97448450e-01, -5.82834652e-02,  4.01519386e-01, ...,
          8.73454274e-02,  3.79269550e-03,  1.43828568e-01],
        [-7.29910166e-02, -1.51034830e-01,  4.35285007e-01, ...,
          1.87246883e-01,  7.26013182e-01,  1.65336116e-01],
        [-7.26615260e-02,  2.19332890e-01,  5.32043311e-01, ...,
          2.13407077e-01,  7.20327568e-02,  4.10497947e-01]],

       [[-5.03382374e+00,  2.52827274e+00, -1.03597098e+01, ...,
          1.12245678e+01,  1.03080968e+01, -1.02146242e+01],
        [-5.03383048e+00,  2.52827673e+00, -1.03597157e+01, ...,
          1.12245623e+01,  1.03080948e+01, -1.02146221e+01],
        [-5.03381349e+00,  2.52827682e+00, -1.03597191e+01, ...,
          1.12245599e+01,  1.03080886e+01, -1.02146170e+01],
        ...,
        [-5.03348811e+00,  2.52826704e+00, -1.03596379e+01, ...,
          1.12247640e+01,  1.03079895e+01, -1.02144990e+01],
        [-5.03349461e+00,  2.52826846e+00, -1.03596471e+01, ...,
          1.12247618e+01,  1.03079879e+01, -1.02145029e+01],
        [-5.03349370e+00,  2.52826800e+00, -1.03596476e+01, ...,
          1.12247627e+01,  1.03079878e+01, -1.02145035e+01]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|male:eth_sigma</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.3164 0.2029 ... 11.51 11.51</div><input id="attrs-994959b6-5790-40f2-989f-b6a3eb9e87b9" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-994959b6-5790-40f2-989f-b6a3eb9e87b9" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-0320f57c-1532-4263-bce4-84a8090e00fb" class="xr-var-data-in" type="checkbox"><label for="data-0320f57c-1532-4263-bce4-84a8090e00fb" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 0.31643072,  0.20292678,  0.3775039 , ...,  0.32731413,
         0.43128155,  0.29520691],
       [11.51443683, 11.51443345, 11.5144312 , ..., 11.51438899,
        11.51438948, 11.51438973]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|state</span></div><div class="xr-var-dims">(chain, draw, state__factor_dim)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.1254 0.3935 ... -5.31 -7.242</div><input id="attrs-4bf4411e-2a72-45d7-b093-cffadc63e46c" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-4bf4411e-2a72-45d7-b093-cffadc63e46c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-4147cdee-5cdb-40f4-85ee-7715f9e164b0" class="xr-var-data-in" type="checkbox"><label for="data-4147cdee-5cdb-40f4-85ee-7715f9e164b0" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[-0.12535992,  0.39351958,  0.00787442, ...,  0.04850749,
          0.32502321,  0.06303935],
        [-0.54750771,  0.64303697,  0.09734298, ...,  0.44011029,
          0.43199432, -0.31178526],
        [ 1.04997412, -0.04172151, -0.02027204, ..., -0.61632272,
          0.41908185,  0.38611796],
        ...,
        [ 0.2834036 ,  0.41933913,  0.21758857, ..., -0.08360549,
          0.3201398 , -0.10946301],
        [-0.15820033,  0.42355309, -0.05173437, ..., -0.31095451,
          0.53286456, -0.48484415],
        [ 0.53229096,  0.47991376,  0.0211019 , ..., -0.28837354,
          0.60434136,  0.04404235]],

       [[-3.29810525, -0.25089959, -0.84104102, ..., -3.29731801,
         -5.31027189, -7.24214324],
        [-3.29810213, -0.25089742, -0.84104286, ..., -3.29731265,
         -5.3102721 , -7.2421545 ],
        [-3.29810101, -0.25090265, -0.84104296, ..., -3.29730861,
         -5.31026884, -7.24214558],
        ...,
        [-3.29804138, -0.25100165, -0.84100728, ..., -3.29730007,
         -5.31017103, -7.24173098],
        [-3.29804237, -0.25100526, -0.84100476, ..., -3.29729448,
         -5.31016895, -7.24173966],
        [-3.29804233, -0.25100546, -0.8410048 , ..., -3.29729425,
         -5.31016843, -7.24173813]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>1|state_sigma</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.2815 0.2636 ... 7.481 7.481</div><input id="attrs-cd583bd2-6d8f-413a-b64b-df88b1a399fb" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-cd583bd2-6d8f-413a-b64b-df88b1a399fb" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-dd6e6816-8c96-4939-ab36-a8e74a783331" class="xr-var-data-in" type="checkbox"><label for="data-dd6e6816-8c96-4939-ab36-a8e74a783331" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.28151926, 0.263571  , 0.35556307, ..., 0.2207163 , 0.29528296,
        0.36836247],
       [7.48094778, 7.48094531, 7.48093811, ..., 7.48083017, 7.48082885,
        7.48082876]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>Intercept</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.003819 0.412 ... -0.09506</div><input id="attrs-4e529672-2029-448f-8f41-c09fc0da5068" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-4e529672-2029-448f-8f41-c09fc0da5068" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-1e181c41-c401-4f06-b743-1de46c30f3b5" class="xr-var-data-in" type="checkbox"><label for="data-1e181c41-c401-4f06-b743-1de46c30f3b5" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 0.00381852,  0.41199455,  0.82890062, ...,  0.49665295,
         0.27895097,  0.65369821],
       [-0.095052  , -0.0950522 , -0.09505161, ..., -0.09505587,
        -0.09505635, -0.0950563 ]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>male</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.1091 0.04497 ... 0.799 0.799</div><input id="attrs-41a1bd06-b989-4304-9d76-7629ef01fd3d" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-41a1bd06-b989-4304-9d76-7629ef01fd3d" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-759d282a-3820-4bdb-9fdc-19f6bbc62160" class="xr-var-data-in" type="checkbox"><label for="data-759d282a-3820-4bdb-9fdc-19f6bbc62160" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.10913237, 0.04497224, 0.22655901, ..., 0.34215586, 0.25667801,
        0.26522093],
       [0.79896986, 0.79896929, 0.79896942, ..., 0.79900084, 0.79900123,
        0.79900122]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>repvote</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.4383 -1.21 ... -0.618 -0.618</div><input id="attrs-8ad377b9-3ef3-4d02-910a-9d5ea225eaf9" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-8ad377b9-3ef3-4d02-910a-9d5ea225eaf9" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-340f3a9e-da67-418d-a3af-81a67bde0d25" class="xr-var-data-in" type="checkbox"><label for="data-340f3a9e-da67-418d-a3af-81a67bde0d25" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[-0.43833826, -1.20961311, -2.34044572, ..., -1.49467184,
        -1.78785452, -2.27008634],
       [-0.61803434, -0.61803396, -0.61803427, ..., -0.61801553,
        -0.6180151 , -0.61801511]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>p</span></div><div class="xr-var-dims">(chain, draw, __obs__)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.4237 0.4292 ... 0.0001628</div><input id="attrs-80ed2f86-868b-4e78-b6f2-4aea2cbaceee" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-80ed2f86-868b-4e78-b6f2-4aea2cbaceee" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-447b911e-ad74-4e67-8719-27350294223e" class="xr-var-data-in" type="checkbox"><label for="data-447b911e-ad74-4e67-8719-27350294223e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[4.23695998e-01, 4.29239130e-01, 6.36487489e-01, ...,
         2.89178438e-01, 3.03216700e-01, 4.75816186e-01],
        [4.39020112e-01, 4.95446217e-01, 6.26354698e-01, ...,
         3.50522554e-01, 4.33146635e-01, 4.63078210e-01],
        [4.67956046e-01, 4.81437939e-01, 6.40020437e-01, ...,
         4.10322264e-01, 5.14112551e-01, 3.28063201e-01],
        ...,
        [4.97765900e-01, 4.97839272e-01, 5.94175962e-01, ...,
         3.14920112e-01, 4.79131406e-01, 3.07979655e-01],
        [4.79626576e-01, 5.29488379e-01, 6.71334717e-01, ...,
         3.48257304e-01, 4.77101240e-01, 5.00354970e-01],
        [4.57271076e-01, 4.83144829e-01, 6.58535351e-01, ...,
         3.87469220e-01, 5.43725226e-01, 4.15587444e-01]],

       [[7.16924768e-10, 9.99969316e-01, 8.82660473e-14, ...,
         2.18226437e-21, 9.10374943e-19, 5.28475374e-05],
        [7.16513684e-10, 9.99969298e-01, 8.82162543e-14, ...,
         2.17546525e-21, 9.07557521e-19, 5.27320533e-05],
        [7.17914671e-10, 9.99969358e-01, 8.83889312e-14, ...,
         2.19999944e-21, 9.17793453e-19, 5.31492876e-05],
        ...,
        [9.34349890e-10, 9.99976456e-01, 1.15051585e-13, ...,
         1.08166304e-20, 4.51163666e-18, 1.62554004e-04],
        [9.34835055e-10, 9.99976468e-01, 1.15111369e-13, ...,
         1.08482378e-20, 4.52490385e-18, 1.62889142e-04],
        [9.34760794e-10, 9.99976466e-01, 1.15102248e-13, ...,
         1.08433968e-20, 4.52288201e-18, 1.62838273e-04]]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-df76f382-27cd-49f7-807b-c60eae4bcfcb" class="xr-section-summary-in" type="checkbox"><label for="section-df76f382-27cd-49f7-807b-c60eae4bcfcb" class="xr-section-summary">Indexes: <span>(9)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>chain</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-afe4d58d-68f0-47e6-bd61-7a568b965f13" class="xr-index-data-in" type="checkbox"><label for="index-afe4d58d-68f0-47e6-bd61-7a568b965f13" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([0, 1], dtype='int64', name='chain'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>draw</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-6706b804-52ce-4781-8369-d57b67828995" class="xr-index-data-in" type="checkbox"><label for="index-6706b804-52ce-4781-8369-d57b67828995" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       990, 991, 992, 993, 994, 995, 996, 997, 998, 999],
      dtype='int64', name='draw', length=1000))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>edu__factor_dim</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-c079429a-398e-4752-ac11-099f4ee83d4a" class="xr-index-data-in" type="checkbox"><label for="index-c079429a-398e-4752-ac11-099f4ee83d4a" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['4-Year College', 'HS', 'No HS', 'Post-grad', 'Some college'], dtype='object', name='edu__factor_dim'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>edu:age__factor_dim</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-87daabbb-b1b2-4e46-9955-ce5d92bb3484" class="xr-index-data-in" type="checkbox"><label for="index-87daabbb-b1b2-4e46-9955-ce5d92bb3484" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['4-Year College:18-29', '4-Year College:30-39', '4-Year College:40-49',
       '4-Year College:50-59', '4-Year College:60-69', '4-Year College:70+',
       'HS:18-29', 'HS:30-39', 'HS:40-49', 'HS:50-59', 'HS:60-69', 'HS:70+',
       'No HS:18-29', 'No HS:30-39', 'No HS:40-49', 'No HS:50-59',
       'No HS:60-69', 'No HS:70+', 'Post-grad:18-29', 'Post-grad:30-39',
       'Post-grad:40-49', 'Post-grad:50-59', 'Post-grad:60-69',
       'Post-grad:70+', 'Some college:18-29', 'Some college:30-39',
       'Some college:40-49', 'Some college:50-59', 'Some college:60-69',
       'Some college:70+'],
      dtype='object', name='edu:age__factor_dim'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>edu:eth__factor_dim</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-fdac0858-35e4-49c9-9eb5-a3658da02564" class="xr-index-data-in" type="checkbox"><label for="index-fdac0858-35e4-49c9-9eb5-a3658da02564" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['4-Year College:Black', '4-Year College:Hispanic',
       '4-Year College:Other', '4-Year College:White', 'HS:Black',
       'HS:Hispanic', 'HS:Other', 'HS:White', 'No HS:Black', 'No HS:Hispanic',
       'No HS:Other', 'No HS:White', 'Post-grad:Black', 'Post-grad:Hispanic',
       'Post-grad:Other', 'Post-grad:White', 'Some college:Black',
       'Some college:Hispanic', 'Some college:Other', 'Some college:White'],
      dtype='object', name='edu:eth__factor_dim'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>eth__factor_dim</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-18f90445-ff3e-4893-a7d5-5b147d3a4ccc" class="xr-index-data-in" type="checkbox"><label for="index-18f90445-ff3e-4893-a7d5-5b147d3a4ccc" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['Black', 'Hispanic', 'Other', 'White'], dtype='object', name='eth__factor_dim'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>male:eth__factor_dim</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-35c7cb17-9358-4f59-9a22-823b9ad18f39" class="xr-index-data-in" type="checkbox"><label for="index-35c7cb17-9358-4f59-9a22-823b9ad18f39" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['-0.5:Black', '-0.5:Hispanic', '-0.5:Other', '-0.5:White', '0.5:Black',
       '0.5:Hispanic', '0.5:Other', '0.5:White'],
      dtype='object', name='male:eth__factor_dim'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>state__factor_dim</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-a45ac812-fb56-431a-b60f-2f9228a02bc9" class="xr-index-data-in" type="checkbox"><label for="index-a45ac812-fb56-431a-b60f-2f9228a02bc9" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index(['AK', 'AL', 'AR', 'CA', 'CO', 'DE', 'FL', 'GA', 'HI', 'IA', 'ID', 'IL',
       'KS', 'KY', 'LA', 'MA', 'MD', 'ME', 'MI', 'MN', 'MO', 'MS', 'MT', 'NC',
       'ND', 'NE', 'NH', 'NJ', 'NM', 'NV', 'NY', 'OH', 'OK', 'OR', 'PA', 'RI',
       'SC', 'SD', 'TN', 'UT', 'VA', 'VT', 'WA', 'WI', 'WV', 'WY'],
      dtype='object', name='state__factor_dim'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>__obs__</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-a86768d5-9653-4e41-8009-1834ff40e59d" class="xr-index-data-in" type="checkbox"><label for="index-a86768d5-9653-4e41-8009-1834ff40e59d" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([    0,     1,     2,     3,     4,     5,     6,     7,     8,     9,
       ...
       11030, 11031, 11032, 11033, 11034, 11035, 11036, 11037, 11038, 11039],
      dtype='int64', name='__obs__', length=11040))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-17896036-5892-42e1-8fcd-478e029b3941" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-17896036-5892-42e1-8fcd-478e029b3941" class="xr-section-summary">Attributes: <span>(8)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-05-27T01:38:07.578066+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.15.0+23.g19be124e</dd><dt><span>sampling_time :</span></dt><dd>4434.483409166336</dd><dt><span>tuning_steps :</span></dt><dd>1000</dd><dt><span>modeling_interface :</span></dt><dd>bambi</dd><dt><span>modeling_interface_version :</span></dt><dd>0.13.1.dev39+gb7d6a6cb</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_posterior_predictiveca264c9a-de33-41f4-9937-b25887b1cc80" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_posterior_predictiveca264c9a-de33-41f4-9937-b25887b1cc80" class="xr-section-summary">posterior_predictive</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 177MB
Dimensions:         (chain: 2, draw: 1000, __obs__: 11040)
Coordinates:
  * chain           (chain) int64 16B 0 1
  * draw            (draw) int64 8kB 0 1 2 3 4 5 6 ... 994 995 996 997 998 999
  * __obs__         (__obs__) int64 88kB 0 1 2 3 4 ... 11036 11037 11038 11039
Data variables:
    p(abortion, n)  (chain, draw, __obs__) int64 177MB 13482 5064 10850 ... 0 5
Attributes:
    modeling_interface:          bambi
    modeling_interface_version:  0.13.1.dev39+gb7d6a6cb</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-61791bd4-66b4-4281-8ae0-2b2ff768963e" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-61791bd4-66b4-4281-8ae0-2b2ff768963e" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 2</li><li><span class="xr-has-index">draw</span>: 1000</li><li><span class="xr-has-index">__obs__</span>: 11040</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-ac5d68e3-aef4-4076-a424-bc45c61c227c" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-ac5d68e3-aef4-4076-a424-bc45c61c227c" class="xr-section-summary">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1</div><input id="attrs-81553203-bb48-4f9a-90b4-f338b75b2241" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-81553203-bb48-4f9a-90b4-f338b75b2241" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-4a26f431-5422-4fb7-b320-2e6e225ec42d" class="xr-var-data-in" type="checkbox"><label for="data-4a26f431-5422-4fb7-b320-2e6e225ec42d" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-43a41b38-f2b1-4ef0-a30c-923c346935f9" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-43a41b38-f2b1-4ef0-a30c-923c346935f9" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-029a0702-79ec-41f4-8cc0-55406beb8b21" class="xr-var-data-in" type="checkbox"><label for="data-029a0702-79ec-41f4-8cc0-55406beb8b21" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 997, 998, 999])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">__obs__</span></div><div class="xr-var-dims">(__obs__)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 ... 11036 11037 11038 11039</div><input id="attrs-48793960-3d15-475d-9f31-df7c40b4ec25" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-48793960-3d15-475d-9f31-df7c40b4ec25" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-dffe6259-fd3b-4fa8-900c-f78f8fafc3f2" class="xr-var-data-in" type="checkbox"><label for="data-dffe6259-fd3b-4fa8-900c-f78f8fafc3f2" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([    0,     1,     2, ..., 11037, 11038, 11039])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-bfba2e70-b9d5-4b0b-9354-39212a8136b6" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-bfba2e70-b9d5-4b0b-9354-39212a8136b6" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>p(abortion, n)</span></div><div class="xr-var-dims">(chain, draw, __obs__)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">13482 5064 10850 4045 ... 0 0 0 5</div><input id="attrs-0ed4015f-349d-48c9-8db1-2ad0188ba394" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-0ed4015f-349d-48c9-8db1-2ad0188ba394" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-a31d0fcf-265f-414b-9c0c-10092b54951a" class="xr-var-data-in" type="checkbox"><label for="data-a31d0fcf-265f-414b-9c0c-10092b54951a" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[13482,  5064, 10850, ...,  2913,  2860, 13446],
        [13809,  5754, 10634, ...,  3598,  3987, 12973],
        [14776,  5721, 10913, ...,  4040,  4715,  9253],
        ...,
        [15679,  5883, 10196, ...,  3195,  4444,  8645],
        [15055,  6198, 11472, ...,  3444,  4402, 14135],
        [14389,  5693, 11335, ...,  3908,  5050, 11739]],

       [[    0, 11808,     0, ...,     0,     0,     2],
        [    0, 11809,     0, ...,     0,     0,     2],
        [    0, 11809,     0, ...,     0,     0,     1],
        ...,
        [    0, 11809,     0, ...,     0,     0,     6],
        [    0, 11809,     0, ...,     0,     0,     3],
        [    0, 11809,     0, ...,     0,     0,     5]]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-ce6a2928-9c98-457b-9030-ae587b3d76a9" class="xr-section-summary-in" type="checkbox"><label for="section-ce6a2928-9c98-457b-9030-ae587b3d76a9" class="xr-section-summary">Indexes: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>chain</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-f3c1cd01-ca64-4a34-b341-7bdf4f6e1d27" class="xr-index-data-in" type="checkbox"><label for="index-f3c1cd01-ca64-4a34-b341-7bdf4f6e1d27" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([0, 1], dtype='int64', name='chain'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>draw</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-d56f586e-a57c-4a59-ae08-d2190312556d" class="xr-index-data-in" type="checkbox"><label for="index-d56f586e-a57c-4a59-ae08-d2190312556d" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       990, 991, 992, 993, 994, 995, 996, 997, 998, 999],
      dtype='int64', name='draw', length=1000))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>__obs__</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-58e96e81-70d5-4e1c-a8f5-be71fbe1f186" class="xr-index-data-in" type="checkbox"><label for="index-58e96e81-70d5-4e1c-a8f5-be71fbe1f186" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([    0,     1,     2,     3,     4,     5,     6,     7,     8,     9,
       ...
       11030, 11031, 11032, 11033, 11034, 11035, 11036, 11037, 11038, 11039],
      dtype='int64', name='__obs__', length=11040))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-91ae2a86-a5f2-41e5-8f8d-dc365c4f3d18" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-91ae2a86-a5f2-41e5-8f8d-dc365c4f3d18" class="xr-section-summary">Attributes: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>modeling_interface :</span></dt><dd>bambi</dd><dt><span>modeling_interface_version :</span></dt><dd>0.13.1.dev39+gb7d6a6cb</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_log_likelihoodddc29e49-8d05-4731-9db4-ba343a6dd478" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_log_likelihoodddc29e49-8d05-4731-9db4-ba343a6dd478" class="xr-section-summary">log_likelihood</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 177MB
Dimensions:         (chain: 2, draw: 1000, __obs__: 11040)
Coordinates:
  * chain           (chain) int64 16B 0 1
  * draw            (draw) int64 8kB 0 1 2 3 4 5 6 ... 994 995 996 997 998 999
  * __obs__         (__obs__) int64 88kB 0 1 2 3 4 ... 11036 11037 11038 11039
Data variables:
    p(abortion, n)  (chain, draw, __obs__) float64 177MB -3.202 -7.289 ... 0.0
Attributes:
    created_at:                  2024-05-27T01:38:10.089314+00:00
    arviz_version:               0.18.0
    inference_library:           pymc
    inference_library_version:   5.15.0+23.g19be124e
    modeling_interface:          bambi
    modeling_interface_version:  0.13.1.dev39+gb7d6a6cb</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-3045522c-d863-48b2-aaef-c41818b6e7f9" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-3045522c-d863-48b2-aaef-c41818b6e7f9" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 2</li><li><span class="xr-has-index">draw</span>: 1000</li><li><span class="xr-has-index">__obs__</span>: 11040</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-d52fe5b3-fff6-40d6-abd3-c75a311f4d1b" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-d52fe5b3-fff6-40d6-abd3-c75a311f4d1b" class="xr-section-summary">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1</div><input id="attrs-88234c8d-c744-41ce-a617-b4e930ed10d6" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-88234c8d-c744-41ce-a617-b4e930ed10d6" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-e4db07e6-75f9-4d46-b9b6-53fe678e4b2c" class="xr-var-data-in" type="checkbox"><label for="data-e4db07e6-75f9-4d46-b9b6-53fe678e4b2c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-1b7d5caf-8dad-4d0d-9657-bdab1cb21a0f" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1b7d5caf-8dad-4d0d-9657-bdab1cb21a0f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-a4938e9d-23ce-4801-9843-2cf80307126f" class="xr-var-data-in" type="checkbox"><label for="data-a4938e9d-23ce-4801-9843-2cf80307126f" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 997, 998, 999])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">__obs__</span></div><div class="xr-var-dims">(__obs__)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 ... 11036 11037 11038 11039</div><input id="attrs-66f0a492-dd72-47d1-8b55-7f2e3a6fa1d5" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-66f0a492-dd72-47d1-8b55-7f2e3a6fa1d5" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-5436ce39-dec2-41dc-bcbe-67eaa8e2627b" class="xr-var-data-in" type="checkbox"><label for="data-5436ce39-dec2-41dc-bcbe-67eaa8e2627b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([    0,     1,     2, ..., 11037, 11038, 11039])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-283c1835-93f4-4a2e-8314-7658dbc22fc2" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-283c1835-93f4-4a2e-8314-7658dbc22fc2" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>p(abortion, n)</span></div><div class="xr-var-dims">(chain, draw, __obs__)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-3.202 -7.289 -2.146 ... 0.0 0.0</div><input id="attrs-cf09c9fb-895d-45f6-8821-8f0faf620291" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-cf09c9fb-895d-45f6-8821-8f0faf620291" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-16eb5496-a26c-413e-a90d-daf1827e740e" class="xr-var-data-in" type="checkbox"><label for="data-16eb5496-a26c-413e-a90d-daf1827e740e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[  -3.2016898 ,   -7.2892949 ,   -2.14618721, ...,
            0.        ,    0.        ,    0.        ],
        [  -2.93947105,   -5.48736441,   -2.24483748, ...,
            0.        ,    0.        ,    0.        ],
        [  -2.53197167,   -5.8367269 ,   -2.11329352, ...,
            0.        ,    0.        ,    0.        ],
        ...,
        [  -2.22760907,   -5.42928563,   -2.60002372, ...,
            0.        ,    0.        ,    0.        ],
        [  -2.39908136,   -4.70354093,   -1.85634256, ...,
            0.        ,    0.        ,    0.        ],
        [  -2.66936137,   -5.79328887,   -1.9537707 , ...,
            0.        ,    0.        ,    0.        ]],

       [[-359.03761066,  -33.08183054, -382.98461562, ...,
            0.        ,    0.        ,    0.        ],
        [-359.0479348 ,  -33.07950864, -382.99195131, ...,
            0.        ,    0.        ,    0.        ],
        [-359.01277409,  -33.08734316, -382.96652962, ...,
            0.        ,    0.        ,    0.        ],
        ...,
        [-354.26976935,  -34.14120783, -379.53928965, ...,
            0.        ,    0.        ,    0.        ],
        [-354.2604252 ,  -34.14323641, -379.53253625, ...,
            0.        ,    0.        ,    0.        ],
        [-354.26185514,  -34.14292119, -379.53356641, ...,
            0.        ,    0.        ,    0.        ]]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-9c1c4b76-50b6-4cec-b128-658e5313c0fd" class="xr-section-summary-in" type="checkbox"><label for="section-9c1c4b76-50b6-4cec-b128-658e5313c0fd" class="xr-section-summary">Indexes: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>chain</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-ef698ad1-0013-4aab-95a5-17f21cf8822f" class="xr-index-data-in" type="checkbox"><label for="index-ef698ad1-0013-4aab-95a5-17f21cf8822f" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([0, 1], dtype='int64', name='chain'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>draw</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-21a2920b-2bc2-4449-a73d-887f68469e84" class="xr-index-data-in" type="checkbox"><label for="index-21a2920b-2bc2-4449-a73d-887f68469e84" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       990, 991, 992, 993, 994, 995, 996, 997, 998, 999],
      dtype='int64', name='draw', length=1000))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>__obs__</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-050fa7cc-f6f8-468e-b92c-5b519d2d08fa" class="xr-index-data-in" type="checkbox"><label for="index-050fa7cc-f6f8-468e-b92c-5b519d2d08fa" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([    0,     1,     2,     3,     4,     5,     6,     7,     8,     9,
       ...
       11030, 11031, 11032, 11033, 11034, 11035, 11036, 11037, 11038, 11039],
      dtype='int64', name='__obs__', length=11040))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-66b6419a-fcf3-477a-9d50-74b73bad8b8a" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-66b6419a-fcf3-477a-9d50-74b73bad8b8a" class="xr-section-summary">Attributes: <span>(6)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-05-27T01:38:10.089314+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.15.0+23.g19be124e</dd><dt><span>modeling_interface :</span></dt><dd>bambi</dd><dt><span>modeling_interface_version :</span></dt><dd>0.13.1.dev39+gb7d6a6cb</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_sample_stats241446be-6db1-49ec-afce-a21b93e8480e" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_sample_stats241446be-6db1-49ec-afce-a21b93e8480e" class="xr-section-summary">sample_stats</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 252kB
Dimensions:                (chain: 2, draw: 1000)
Coordinates:
  * chain                  (chain) int64 16B 0 1
  * draw                   (draw) int64 8kB 0 1 2 3 4 5 ... 995 996 997 998 999
Data variables: (12/17)
    acceptance_rate        (chain, draw) float64 16kB 0.9993 0.9949 ... 0.9887
    diverging              (chain, draw) bool 2kB False False ... False False
    energy                 (chain, draw) float64 16kB 2.266e+03 ... 3.882e+04
    energy_error           (chain, draw) float64 16kB -0.001494 ... -0.001604
    index_in_trajectory    (chain, draw) int64 16kB -64 -93 -222 ... 718 640 69
    largest_eigval         (chain, draw) float64 16kB nan nan nan ... nan nan
    ...                     ...
    process_time_diff      (chain, draw) float64 16kB 0.5792 0.5719 ... 2.126
    reached_max_treedepth  (chain, draw) bool 2kB False False ... True True
    smallest_eigval        (chain, draw) float64 16kB nan nan nan ... nan nan
    step_size              (chain, draw) float64 16kB 0.01291 ... 8.867e-05
    step_size_bar          (chain, draw) float64 16kB 0.01377 ... 0.0002591
    tree_depth             (chain, draw) int64 16kB 8 8 8 8 8 ... 10 10 10 10 10
Attributes:
    created_at:                  2024-05-27T01:38:07.600018+00:00
    arviz_version:               0.18.0
    inference_library:           pymc
    inference_library_version:   5.15.0+23.g19be124e
    sampling_time:               4434.483409166336
    tuning_steps:                1000
    modeling_interface:          bambi
    modeling_interface_version:  0.13.1.dev39+gb7d6a6cb</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-558081ea-a2db-4088-88d4-8be40c21de46" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-558081ea-a2db-4088-88d4-8be40c21de46" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 2</li><li><span class="xr-has-index">draw</span>: 1000</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-ff725d02-35a1-48ce-b7af-a4666479cc0a" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-ff725d02-35a1-48ce-b7af-a4666479cc0a" class="xr-section-summary">Coordinates: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1</div><input id="attrs-c531a898-691d-46d6-89c6-b3e84f2fc1ad" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c531a898-691d-46d6-89c6-b3e84f2fc1ad" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-62c13dd6-11eb-42ad-be76-55aff1e12f11" class="xr-var-data-in" type="checkbox"><label for="data-62c13dd6-11eb-42ad-be76-55aff1e12f11" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-0cb07fc7-5924-403b-88cd-64e1f2753d14" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-0cb07fc7-5924-403b-88cd-64e1f2753d14" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-27ff4fc6-467a-48f0-bf7a-27eeb517faa2" class="xr-var-data-in" type="checkbox"><label for="data-27ff4fc6-467a-48f0-bf7a-27eeb517faa2" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 997, 998, 999])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-aab8408d-fd6d-4779-827f-3865a9c408d4" class="xr-section-summary-in" type="checkbox"><label for="section-aab8408d-fd6d-4779-827f-3865a9c408d4" class="xr-section-summary">Data variables: <span>(17)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>acceptance_rate</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.9993 0.9949 ... 0.9885 0.9887</div><input id="attrs-bcfb9553-40ab-4f0c-a997-f92b0b6e4012" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-bcfb9553-40ab-4f0c-a997-f92b0b6e4012" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ec9bbb4b-8c44-41ce-8612-03d7ddd36543" class="xr-var-data-in" type="checkbox"><label for="data-ec9bbb4b-8c44-41ce-8612-03d7ddd36543" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.9993192 , 0.99494229, 0.99111325, ..., 0.99872214, 0.99930758,
        0.99948047],
       [0.98894484, 0.99999719, 0.91972497, ..., 0.99936042, 0.98853737,
        0.98874329]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>diverging</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">bool</div><div class="xr-var-preview xr-preview">False False False ... False False</div><input id="attrs-61a64bc0-1219-4f50-8e30-6077082ca840" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-61a64bc0-1219-4f50-8e30-6077082ca840" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-80b343a0-7196-451a-bb11-11301b3f8ea3" class="xr-var-data-in" type="checkbox"><label for="data-80b343a0-7196-451a-bb11-11301b3f8ea3" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>energy</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">2.266e+03 2.272e+03 ... 3.882e+04</div><input id="attrs-eead43e6-83d3-4792-8886-c9b6c48dd131" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-eead43e6-83d3-4792-8886-c9b6c48dd131" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-1d87a296-b0dd-458c-99bc-6c62e562295a" class="xr-var-data-in" type="checkbox"><label for="data-1d87a296-b0dd-458c-99bc-6c62e562295a" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 2265.87140873,  2272.20895208,  2276.73954196, ...,
         2256.64981355,  2264.11501237,  2256.87935555],
       [38991.35617938, 38992.72863683, 38984.57536866, ...,
        38825.14471169, 38825.96207959, 38821.69258632]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>energy_error</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.001494 0.0065 ... -0.001604</div><input id="attrs-01566b0b-8c2c-4fac-91c7-05869c1d2a54" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-01566b0b-8c2c-4fac-91c7-05869c1d2a54" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-6a03a8b2-e19b-4397-a39c-6aff00ad3fad" class="xr-var-data-in" type="checkbox"><label for="data-6a03a8b2-e19b-4397-a39c-6aff00ad3fad" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[-0.00149364,  0.00649998, -0.00775886, ..., -0.01249199,
         0.00185149, -0.01441649],
       [-0.06339188, -0.02417857,  0.14839542, ..., -0.05656068,
         0.03487745, -0.00160358]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>index_in_trajectory</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">-64 -93 -222 -61 ... 342 718 640 69</div><input id="attrs-a7d0eb11-3a14-46f0-923a-c09873574966" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-a7d0eb11-3a14-46f0-923a-c09873574966" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-664cc832-01a9-4a6b-9d34-454189b4bed5" class="xr-var-data-in" type="checkbox"><label for="data-664cc832-01a9-4a6b-9d34-454189b4bed5" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ -64,  -93, -222, ..., -220,  122,  -78],
       [-650,  792,  713, ...,  718,  640,   69]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>largest_eigval</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">nan nan nan nan ... nan nan nan nan</div><input id="attrs-f87eafcb-6646-4235-875d-fad9198a917c" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-f87eafcb-6646-4235-875d-fad9198a917c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-e7b9f160-1151-4342-86b5-2e8807cfcbfe" class="xr-var-data-in" type="checkbox"><label for="data-e7b9f160-1151-4342-86b5-2e8807cfcbfe" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>lp</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-2.203e+03 ... -3.876e+04</div><input id="attrs-f309e84a-0520-41ed-b2c8-1a94b1bb4379" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-f309e84a-0520-41ed-b2c8-1a94b1bb4379" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-b3773880-df2a-4b97-aabf-655c6e9e13f9" class="xr-var-data-in" type="checkbox"><label for="data-b3773880-df2a-4b97-aabf-655c6e9e13f9" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ -2202.71774419,  -2211.92280472,  -2208.17993389, ...,
         -2199.47064093,  -2206.86567974,  -2178.0519969 ],
       [-38932.38829147, -38932.72994788, -38931.56938412, ...,
        -38764.07816292, -38763.82920971, -38763.87205917]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>max_energy_error</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.02517 -0.2357 ... 0.05655</div><input id="attrs-8890c8cc-cf07-4227-9ac7-6759ef1d180f" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-8890c8cc-cf07-4227-9ac7-6759ef1d180f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ee33441e-dc04-4014-b2c2-c07fcf91c8ab" class="xr-var-data-in" type="checkbox"><label for="data-ee33441e-dc04-4014-b2c2-c07fcf91c8ab" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[-0.02516746, -0.23567033, -0.13116677, ..., -0.03576808,
        -0.01607386, -0.05295207],
       [-0.09056458, -0.02747089,  0.24352479, ..., -0.06245752,
         0.04071116,  0.05655323]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>n_steps</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">255.0 255.0 ... 1.023e+03 1.023e+03</div><input id="attrs-e0dc6ac6-5488-40c5-ba5f-302aef7e335f" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-e0dc6ac6-5488-40c5-ba5f-302aef7e335f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-4716a75a-d977-4e1c-a872-a9889f4d210b" class="xr-var-data-in" type="checkbox"><label for="data-4716a75a-d977-4e1c-a872-a9889f4d210b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 255.,  255.,  255., ...,  255.,  255.,  255.],
       [1023., 1023., 1023., ..., 1023., 1023., 1023.]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>perf_counter_diff</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.5792 0.5719 ... 2.127 2.126</div><input id="attrs-98e4f1b3-6748-4b65-b0cf-86864624e31e" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-98e4f1b3-6748-4b65-b0cf-86864624e31e" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-105dd0d6-9f4f-4d33-82c4-854cae6af8c0" class="xr-var-data-in" type="checkbox"><label for="data-105dd0d6-9f4f-4d33-82c4-854cae6af8c0" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.57922823, 0.57192559, 0.58707866, ..., 0.56893247, 0.55719675,
        0.56067238],
       [2.16990024, 2.14157411, 2.17329251, ..., 2.15158507, 2.12707249,
        2.12628313]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>perf_counter_start</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">1.898e+04 1.898e+04 ... 2.261e+04</div><input id="attrs-a3120d70-9841-473c-9b00-96f708018490" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-a3120d70-9841-473c-9b00-96f708018490" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-08fcaf52-d3d1-417b-a69c-d52379de3881" class="xr-var-data-in" type="checkbox"><label for="data-08fcaf52-d3d1-417b-a69c-d52379de3881" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[18980.65525135, 18981.23486371, 18981.80714556, ...,
        19738.33340998, 19738.90274689, 19739.46030336],
       [20368.89350468, 20371.06373941, 20373.20564672, ...,
        22600.8600533 , 22603.01196506, 22605.13936151]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>process_time_diff</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.5792 0.5719 ... 2.127 2.126</div><input id="attrs-8bb48100-f591-4648-8799-d888ef9e18cd" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-8bb48100-f591-4648-8799-d888ef9e18cd" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-f9cfa765-6b4c-496a-b34d-96c9cafae2cc" class="xr-var-data-in" type="checkbox"><label for="data-f9cfa765-6b4c-496a-b34d-96c9cafae2cc" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.57916769, 0.57193154, 0.5870583 , ..., 0.56883855, 0.55646637,
        0.5603387 ],
       [2.16949509, 2.14134836, 2.17300213, ..., 2.15118532, 2.12678611,
        2.12602471]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>reached_max_treedepth</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">bool</div><div class="xr-var-preview xr-preview">False False False ... True True</div><input id="attrs-d2fdbdcf-717f-4b77-be7d-a99d70456586" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-d2fdbdcf-717f-4b77-be7d-a99d70456586" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-674548a9-0aa0-49dc-b8de-a35eed38b12e" class="xr-var-data-in" type="checkbox"><label for="data-674548a9-0aa0-49dc-b8de-a35eed38b12e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[False, False, False, ..., False, False, False],
       [ True,  True,  True, ...,  True,  True,  True]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>smallest_eigval</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">nan nan nan nan ... nan nan nan nan</div><input id="attrs-296d2e11-b016-496a-a68b-b190b7ad68ca" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-296d2e11-b016-496a-a68b-b190b7ad68ca" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-3fd2e412-76ea-4d21-b12e-9fbb11000a23" class="xr-var-data-in" type="checkbox"><label for="data-3fd2e412-76ea-4d21-b12e-9fbb11000a23" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>step_size</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.01291 0.01291 ... 8.867e-05</div><input id="attrs-49a797ec-cab8-4b5a-b4d8-5fd50a74bb05" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-49a797ec-cab8-4b5a-b4d8-5fd50a74bb05" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-288ce32c-2f68-42f4-8b12-971e6cf2cff5" class="xr-var-data-in" type="checkbox"><label for="data-288ce32c-2f68-42f4-8b12-971e6cf2cff5" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[1.29148560e-02, 1.29148560e-02, 1.29148560e-02, ...,
        1.29148560e-02, 1.29148560e-02, 1.29148560e-02],
       [8.86689024e-05, 8.86689024e-05, 8.86689024e-05, ...,
        8.86689024e-05, 8.86689024e-05, 8.86689024e-05]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>step_size_bar</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.01377 0.01377 ... 0.0002591</div><input id="attrs-7c0367f5-edcd-43e4-8b1a-109da0ec98a9" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-7c0367f5-edcd-43e4-8b1a-109da0ec98a9" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-cdceb4a4-85cb-402c-be47-a80335459ba2" class="xr-var-data-in" type="checkbox"><label for="data-cdceb4a4-85cb-402c-be47-a80335459ba2" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.01376505, 0.01376505, 0.01376505, ..., 0.01376505, 0.01376505,
        0.01376505],
       [0.00025905, 0.00025905, 0.00025905, ..., 0.00025905, 0.00025905,
        0.00025905]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>tree_depth</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">8 8 8 8 8 8 8 ... 10 10 10 10 10 10</div><input id="attrs-a9bfa3ca-59ea-4bff-816f-e9b6603e07c1" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-a9bfa3ca-59ea-4bff-816f-e9b6603e07c1" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ae8bd21e-2328-4012-9210-c2601e495468" class="xr-var-data-in" type="checkbox"><label for="data-ae8bd21e-2328-4012-9210-c2601e495468" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 8,  8,  8, ...,  8,  8,  8],
       [10, 10, 10, ..., 10, 10, 10]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-9bc1050b-70b0-4b43-8b96-af17ad7b8896" class="xr-section-summary-in" type="checkbox"><label for="section-9bc1050b-70b0-4b43-8b96-af17ad7b8896" class="xr-section-summary">Indexes: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>chain</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-17964856-cee1-4400-baec-1b3fddf19727" class="xr-index-data-in" type="checkbox"><label for="index-17964856-cee1-4400-baec-1b3fddf19727" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([0, 1], dtype='int64', name='chain'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>draw</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-e39c1464-3469-4e80-a3d2-0519fcc0ad54" class="xr-index-data-in" type="checkbox"><label for="index-e39c1464-3469-4e80-a3d2-0519fcc0ad54" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
       ...
       990, 991, 992, 993, 994, 995, 996, 997, 998, 999],
      dtype='int64', name='draw', length=1000))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-ab8a85ce-5336-47aa-bf72-6bc8cad921b0" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-ab8a85ce-5336-47aa-bf72-6bc8cad921b0" class="xr-section-summary">Attributes: <span>(8)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-05-27T01:38:07.600018+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.15.0+23.g19be124e</dd><dt><span>sampling_time :</span></dt><dd>4434.483409166336</dd><dt><span>tuning_steps :</span></dt><dd>1000</dd><dt><span>modeling_interface :</span></dt><dd>bambi</dd><dt><span>modeling_interface_version :</span></dt><dd>0.13.1.dev39+gb7d6a6cb</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_observed_datac05bdfa0-a472-4be6-9016-624886220936" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_observed_datac05bdfa0-a472-4be6-9016-624886220936" class="xr-section-summary">observed_data</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 177kB
Dimensions:         (__obs__: 11040)
Coordinates:
  * __obs__         (__obs__) int64 88kB 0 1 2 3 4 ... 11036 11037 11038 11039
Data variables:
    p(abortion, n)  (__obs__) int64 88kB 18 16 13 12 11 11 11 ... 0 0 0 0 0 0 0
Attributes:
    created_at:                  2024-05-27T01:38:07.605672+00:00
    arviz_version:               0.18.0
    inference_library:           pymc
    inference_library_version:   5.15.0+23.g19be124e
    modeling_interface:          bambi
    modeling_interface_version:  0.13.1.dev39+gb7d6a6cb</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-c63dbb12-300d-4ba1-9890-63f4ad2e61f0" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-c63dbb12-300d-4ba1-9890-63f4ad2e61f0" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">__obs__</span>: 11040</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-9236ceaf-ffb3-4a62-bd5f-bf2d64190584" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-9236ceaf-ffb3-4a62-bd5f-bf2d64190584" class="xr-section-summary">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">__obs__</span></div><div class="xr-var-dims">(__obs__)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 ... 11036 11037 11038 11039</div><input id="attrs-99bda0f9-498d-4116-9106-6eab4aefd10a" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-99bda0f9-498d-4116-9106-6eab4aefd10a" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-bcd4c7a0-17d1-4ed4-8943-df78e346c079" class="xr-var-data-in" type="checkbox"><label for="data-bcd4c7a0-17d1-4ed4-8943-df78e346c079" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([    0,     1,     2, ..., 11037, 11038, 11039])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-8a623b41-5220-484a-96c8-312d85e2ded8" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-8a623b41-5220-484a-96c8-312d85e2ded8" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>p(abortion, n)</span></div><div class="xr-var-dims">(__obs__)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">18 16 13 12 11 11 ... 0 0 0 0 0 0</div><input id="attrs-2df97e1a-577c-4bd4-b702-a83c2b44726c" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-2df97e1a-577c-4bd4-b702-a83c2b44726c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-bcdf487a-ed05-41a5-a8bf-66ed410aabae" class="xr-var-data-in" type="checkbox"><label for="data-bcdf487a-ed05-41a5-a8bf-66ed410aabae" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([18, 16, 13, ...,  0,  0,  0])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-b6835345-e187-4f60-8f31-b9b46a3265fb" class="xr-section-summary-in" type="checkbox"><label for="section-b6835345-e187-4f60-8f31-b9b46a3265fb" class="xr-section-summary">Indexes: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>__obs__</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-a77f7a00-d044-4684-8cfd-abd6a3a32506" class="xr-index-data-in" type="checkbox"><label for="index-a77f7a00-d044-4684-8cfd-abd6a3a32506" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([    0,     1,     2,     3,     4,     5,     6,     7,     8,     9,
       ...
       11030, 11031, 11032, 11033, 11034, 11035, 11036, 11037, 11038, 11039],
      dtype='int64', name='__obs__', length=11040))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-3cc14803-045a-49d0-b8a8-8009906a20f0" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-3cc14803-045a-49d0-b8a8-8009906a20f0" class="xr-section-summary">Attributes: <span>(6)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2024-05-27T01:38:07.605672+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.18.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.15.0+23.g19be124e</dd><dt><span>modeling_interface :</span></dt><dd>bambi</dd><dt><span>modeling_interface_version :</span></dt><dd>0.13.1.dev39+gb7d6a6cb</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
              </ul>
            </div>
            <style> /* CSS stylesheet for displaying InferenceData objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-sections.group-sections {
  grid-template-columns: auto;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
.xr-wrap{width:700px!important;} </style>
</div>
</div>
</section>
<section id="make-adjustments-by-state" class="level3">
<h3 class="anchored" data-anchor-id="make-adjustments-by-state">Make Adjustments by State</h3>
<p>We need to adjust each state specific strata by the weight appropriate for each state to post-stratify the estimates.To do so we extract the indices for each strata in our data on a state by state basis. Then we weight the predicted estimate by the appropriate percentage on a state basis and sum them to recover a state level estimate.</p>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>estimates <span class="op">=</span> []</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>abortion_posterior_base <span class="op">=</span> az.extract(result, num_samples<span class="op">=</span><span class="dv">2000</span>)[<span class="st">"p"</span>]</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>abortion_posterior_mrp <span class="op">=</span> az.extract(result_adjust, num_samples<span class="op">=</span><span class="dv">2000</span>)[<span class="st">"p"</span>]</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> s <span class="kw">in</span> new_data[<span class="st">"state"</span>].unique():</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>    idx <span class="op">=</span> new_data.index[new_data[<span class="st">"state"</span>] <span class="op">==</span> s].tolist()</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    predicted_mrp <span class="op">=</span> (</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>        ((abortion_posterior_mrp[idx].mean(dim<span class="op">=</span><span class="st">"sample"</span>) <span class="op">*</span> new_data.iloc[idx][<span class="st">"state_percent"</span>]))</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>        .<span class="bu">sum</span>()</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>        .item()</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>    predicted_mrp_lb <span class="op">=</span> (</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>        (</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>            (</span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>                abortion_posterior_mrp[idx].quantile(<span class="fl">0.025</span>, dim<span class="op">=</span><span class="st">"sample"</span>)</span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>                <span class="op">*</span> new_data.iloc[idx][<span class="st">"state_percent"</span>]</span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a>        .<span class="bu">sum</span>()</span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a>        .item()</span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a>    predicted_mrp_ub <span class="op">=</span> (</span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a>        (</span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a>            (</span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a>                abortion_posterior_mrp[idx].quantile(<span class="fl">0.975</span>, dim<span class="op">=</span><span class="st">"sample"</span>)</span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a>                <span class="op">*</span> new_data.iloc[idx][<span class="st">"state_percent"</span>]</span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a>        .<span class="bu">sum</span>()</span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a>        .item()</span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true" tabindex="-1"></a>    predicted <span class="op">=</span> abortion_posterior_base[idx].mean().item()</span>
<span id="cb51-33"><a href="#cb51-33" aria-hidden="true" tabindex="-1"></a>    base_lb <span class="op">=</span> abortion_posterior_base[idx].quantile(<span class="fl">0.025</span>).item()</span>
<span id="cb51-34"><a href="#cb51-34" aria-hidden="true" tabindex="-1"></a>    base_ub <span class="op">=</span> abortion_posterior_base[idx].quantile(<span class="fl">0.975</span>).item()</span>
<span id="cb51-35"><a href="#cb51-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-36"><a href="#cb51-36" aria-hidden="true" tabindex="-1"></a>    estimates.append(</span>
<span id="cb51-37"><a href="#cb51-37" aria-hidden="true" tabindex="-1"></a>        [s, predicted, base_lb, base_ub, predicted_mrp, predicted_mrp_ub, predicted_mrp_lb]</span>
<span id="cb51-38"><a href="#cb51-38" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb51-39"><a href="#cb51-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-40"><a href="#cb51-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-41"><a href="#cb51-41" aria-hidden="true" tabindex="-1"></a>state_predicted <span class="op">=</span> pd.DataFrame(</span>
<span id="cb51-42"><a href="#cb51-42" aria-hidden="true" tabindex="-1"></a>    estimates,</span>
<span id="cb51-43"><a href="#cb51-43" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span>[<span class="st">"state"</span>, <span class="st">"base_expected"</span>, <span class="st">"base_lb"</span>, <span class="st">"base_ub"</span>, <span class="st">"mrp_adjusted"</span>, <span class="st">"mrp_ub"</span>, <span class="st">"mrp_lb"</span>],</span>
<span id="cb51-44"><a href="#cb51-44" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-45"><a href="#cb51-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-46"><a href="#cb51-46" aria-hidden="true" tabindex="-1"></a>state_predicted <span class="op">=</span> (</span>
<span id="cb51-47"><a href="#cb51-47" aria-hidden="true" tabindex="-1"></a>    state_predicted.merge(cces_all_df.groupby(<span class="st">"state"</span>)[[<span class="st">"abortion"</span>]].mean().reset_index())</span>
<span id="cb51-48"><a href="#cb51-48" aria-hidden="true" tabindex="-1"></a>    .sort_values(<span class="st">"mrp_adjusted"</span>)</span>
<span id="cb51-49"><a href="#cb51-49" aria-hidden="true" tabindex="-1"></a>    .rename({<span class="st">"abortion"</span>: <span class="st">"census_share"</span>}, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb51-50"><a href="#cb51-50" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-51"><a href="#cb51-51" aria-hidden="true" tabindex="-1"></a>state_predicted.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>state</th>
      <th>base_expected</th>
      <th>base_lb</th>
      <th>base_ub</th>
      <th>mrp_adjusted</th>
      <th>mrp_ub</th>
      <th>mrp_lb</th>
      <th>census_share</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>36</th>
      <td>WY</td>
      <td>0.338274</td>
      <td>2.440599e-22</td>
      <td>1.0</td>
      <td>0.378751</td>
      <td>0.688924</td>
      <td>0.110863</td>
      <td>0.367188</td>
    </tr>
    <tr>
      <th>9</th>
      <td>OK</td>
      <td>0.357949</td>
      <td>3.722056e-19</td>
      <td>1.0</td>
      <td>0.413191</td>
      <td>0.689851</td>
      <td>0.139452</td>
      <td>0.321553</td>
    </tr>
    <tr>
      <th>41</th>
      <td>HI</td>
      <td>0.424572</td>
      <td>5.972032e-22</td>
      <td>1.0</td>
      <td>0.415080</td>
      <td>0.775743</td>
      <td>0.124029</td>
      <td>0.251969</td>
    </tr>
    <tr>
      <th>37</th>
      <td>NJ</td>
      <td>0.405110</td>
      <td>3.618629e-20</td>
      <td>1.0</td>
      <td>0.430793</td>
      <td>0.719506</td>
      <td>0.160311</td>
      <td>0.426923</td>
    </tr>
    <tr>
      <th>26</th>
      <td>NV</td>
      <td>0.406223</td>
      <td>3.766937e-22</td>
      <td>1.0</td>
      <td>0.434659</td>
      <td>0.756333</td>
      <td>0.152533</td>
      <td>0.581609</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>This was the crucial step and we’ll need to unpack it a little. We have taken (state by state) each demographic strata and reweighted the expected posterior predictive value by the share that strata represents in the national census within that state. We have then aggregated this score within the state to generate a state specific value. This value can now be compared to the expected value derived from our biased data and, more interestingly, the value reported in the national census.</p>
</section>
<section id="plot-the-effect-of-adjustment" class="level3">
<h3 class="anchored" data-anchor-id="plot-the-effect-of-adjustment">Plot the Effect of Adjustment</h3>
<p>These adjusted estimates can be plotted against the shares ascribed at the state level in the census. These adjustments provide a far better reflection of the national picture than the ones derived from model fitted to the biased sample.</p>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">17</span>, <span class="dv">10</span>))</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>axs <span class="op">=</span> axs.flatten()</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> axs[<span class="dv">0</span>]</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>ax1 <span class="op">=</span> axs[<span class="dv">1</span>]</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>ax.scatter(</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    state_predicted[<span class="st">"state"</span>], state_predicted[<span class="st">"base_expected"</span>], color<span class="op">=</span><span class="st">"red"</span>, label<span class="op">=</span><span class="st">"Biased Sample"</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>ax.scatter(</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>    state_predicted[<span class="st">"state"</span>],</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>    state_predicted[<span class="st">"mrp_adjusted"</span>],</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"slateblue"</span>,</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"Mr P Adjusted"</span>,</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>ax.scatter(</span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>    state_predicted[<span class="st">"state"</span>],</span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>    state_predicted[<span class="st">"census_share"</span>],</span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"darkgreen"</span>,</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"Census Aggregates"</span>,</span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>ax.vlines(</span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>    state_predicted[<span class="st">"state"</span>],</span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>    state_predicted[<span class="st">"mrp_adjusted"</span>],</span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>    state_predicted[<span class="st">"census_share"</span>],</span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"black"</span>,</span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a>    linestyles<span class="op">=</span><span class="st">"--"</span>,</span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>ax1.scatter(</span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>    state_predicted[<span class="st">"state"</span>], state_predicted[<span class="st">"base_expected"</span>], color<span class="op">=</span><span class="st">"red"</span>, label<span class="op">=</span><span class="st">"Biased Sample"</span></span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a>ax1.scatter(</span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a>    state_predicted[<span class="st">"state"</span>],</span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a>    state_predicted[<span class="st">"mrp_adjusted"</span>],</span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"slateblue"</span>,</span>
<span id="cb52-37"><a href="#cb52-37" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"Mr P Adjusted"</span>,</span>
<span id="cb52-38"><a href="#cb52-38" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb52-39"><a href="#cb52-39" aria-hidden="true" tabindex="-1"></a>ax1.legend()</span>
<span id="cb52-40"><a href="#cb52-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-41"><a href="#cb52-41" aria-hidden="true" tabindex="-1"></a>ax1.vlines(</span>
<span id="cb52-42"><a href="#cb52-42" aria-hidden="true" tabindex="-1"></a>    state_predicted[<span class="st">"state"</span>], state_predicted[<span class="st">"base_ub"</span>], state_predicted[<span class="st">"base_lb"</span>], color<span class="op">=</span><span class="st">"red"</span></span>
<span id="cb52-43"><a href="#cb52-43" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb52-44"><a href="#cb52-44" aria-hidden="true" tabindex="-1"></a>ax1.vlines(</span>
<span id="cb52-45"><a href="#cb52-45" aria-hidden="true" tabindex="-1"></a>    state_predicted[<span class="st">"state"</span>],</span>
<span id="cb52-46"><a href="#cb52-46" aria-hidden="true" tabindex="-1"></a>    state_predicted[<span class="st">"mrp_ub"</span>],</span>
<span id="cb52-47"><a href="#cb52-47" aria-hidden="true" tabindex="-1"></a>    state_predicted[<span class="st">"mrp_lb"</span>],</span>
<span id="cb52-48"><a href="#cb52-48" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"slateblue"</span>,</span>
<span id="cb52-49"><a href="#cb52-49" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb52-50"><a href="#cb52-50" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"State"</span>)</span>
<span id="cb52-51"><a href="#cb52-51" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Proportion"</span>)</span>
<span id="cb52-52"><a href="#cb52-52" aria-hidden="true" tabindex="-1"></a>ax1.set_title(</span>
<span id="cb52-53"><a href="#cb52-53" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Comparison of Uncertainty in Biased Predictions and Post-stratified Adjustment"</span>, fontsize<span class="op">=</span><span class="dv">15</span></span>
<span id="cb52-54"><a href="#cb52-54" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb52-55"><a href="#cb52-55" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Comparison of Post-stratified Adjustment and Census Report"</span>, fontsize<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb52-56"><a href="#cb52-56" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">"Proportion"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="mister_p_files/figure-html/cell-35-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>In the top plot here we see the state specific MrP estimates for the proportion voting yes, compared to the estimate inferred from the biased sample and estimates from the national census. We can see how the MrP estimates are much closer to those drawn from the national census.</p>
<p>In the below plot we’ve shown the estimates from the MrP model and the estimates drawn from the biased sample, but here we’ve shown the uncertainty in the estimation on a state level. Clearly, the MrP adjustments also shrinks the uncertainty in our estimate of vote-share.</p>
<p>MrP is in this sense a corrective procedure for the avoidance of bias in sample data, where we have strong evidence for adjusting the weight accorded to any stratum of data in our population.</p>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>In this notebook we have seen how to use <code>bambi</code> to concisely and quickly apply the technique of multilevel regression and post-stratification. We’ve seen how this technique is a natural and compelling extension to regression modelling in general, that incorporates prior knowledge in an interesting and flexible manner.</p>
<p>The problems of representation in data are serious. Policy gets made and changed on the basis of anticipated policy effects. Without the ability to control and adjust for non-representative samples, politicians and policy makers risk prioritising initiatives for a vocal majority among the represented in the sample. The question of whether a given sample is “good” or “bad” cannot (at the time) ever be known, so some care needs to be taken when choosing to adjust your model of the data.</p>
<p>Predictions made from sample data are consequential. It’s not even an exaggeration to say that the fates of entire nations can hang on decisions made from poorly understood sampling procedures. Multilevel regression and post-stratification is an apt tool for making the adjustments required and guiding decisions makers in crucial policy choices, but it should be used carefully.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../notebooks/quantile_regression.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Quantile Regression</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../notebooks/ordinal_regression.html" class="pagination-link">
        <span class="nav-page-text">Ordinal Regression</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">© Copyright 2024, The developers of Bambi.</div>
  </div>
</footer>



</body></html>